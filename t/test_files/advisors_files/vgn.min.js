
(function(window)
{'use strict';function VgnConstructor()
{var CORE_LIBRARY='$coreLib',COMPONENT_LIBRARY='VanguardGlobalNavigation',appContainers={},appDependencyRefs={},THIS=this,App=function(name,data)
{var indexOf=function(arr,obj,start)
{var result=-1,i=(start||0),t=arr.length;for(i;i<t;i+=1)
{if(arr[i]===obj)
{result=i;break;}}
return result;},resolveAppDependencies=function()
{var dependencies=appDependencyRefs[name],i=0,thisModuleIndex=-1,dependencyRef,prop,length=dependencies.length,instance;for(i;i<length;i+=1)
{dependencyRef=dependencies[i];instance=THIS.app(dependencyRef).newInstance();instance.run();}
for(prop in appDependencyRefs)
{if(appDependencyRefs.hasOwnProperty(prop))
{thisModuleIndex=indexOf(appDependencyRefs[prop],name);if(thisModuleIndex>-1&&typeof appDependencyRefs[prop][thisModuleIndex]==='string')
{appDependencyRefs[prop][thisModuleIndex]=data;}}}};this.run=function(element)
{element=element||false;resolveAppDependencies();data.setRootElement(element);data.instantiateModules();return data.getRootElement();};this.inject=function(fn)
{var fnBody=fn.toString(),args=new RegExp('\\(([^)]+)').exec(fnBody),modules=[],i=0,moduleName,argsLength,instance;if(args[1])
{args=args[1].split(/\s*,\s*/);}
for(i,argsLength=args.length;i<argsLength;i+=1)
{moduleName=args[i];moduleName=moduleName.substring(1,moduleName.length-1);modules.push(data.getModule(moduleName));}
function Module()
{return this;}
Module.prototype=fn.prototype;instance=new Module();fn.apply(instance,modules);};this.mock=function(mockName,instance)
{data.mockModule(mockName,instance);};},AppData,AppContainer=function(name)
{var data=new AppData(name);this.module=function(moduleName,definition)
{data.storeModule(moduleName,definition);};this.newInstance=function()
{var appData=data.clone();return new App(name,appData);};},createNewAppContainer=function(appReference)
{var instance=new AppContainer(appReference);appContainers[appReference]=instance;return instance;},manageAppDependencies=function(appReference,appDependencies)
{var i=0,j=0,hasDependency=false,dependencies=appDependencyRefs[appReference]||[],newDep,storedDep,depsLength=dependencies.length,appDepsLength=appDependencies.length;for(i;i<appDepsLength;i+=1)
{newDep=appDependencies[i];hasDependency=false;for(j=0;j<depsLength;j+=1)
{storedDep=dependencies[j];if(newDep===storedDep)
{hasDependency=true;}}
if(hasDependency===false)
{dependencies.push(newDep);}}
appDependencyRefs[appReference]=dependencies;};AppData=function(appName)
{var rootElement=false,moduleDefinitions={},modules={},mockDefinitions={},controller=this,resolveDependencies=function(depReferences)
{var i=0,resolved=[],moduleName,module,depRefLength=depReferences.length;for(i;i<depRefLength;i+=1)
{moduleName=depReferences[i];module=controller.getModule(moduleName);if(!module)
{module=controller.addModule(moduleName,controller.getModuleDefinition(moduleName));}
resolved.push(module);}
return resolved;},searchDependencies=function(moduleName,type)
{var i=0,appDependencies=appDependencyRefs[appName],moduleFound,module,appDepsLength=appDependencies.length,appDependency;for(i;i<appDepsLength;i+=1)
{appDependency=appDependencies[i];if(type==='module definition')
{module=appDependency.getModuleDefinition(moduleName);}
else
{module=appDependency.getModule(moduleName);}
if(module!==false)
{moduleFound=module;break;}}
return moduleFound;};this.clone=function()
{var newData=new AppData(appName),definition;for(definition in moduleDefinitions)
{if(moduleDefinitions.hasOwnProperty(definition))
{newData.storeModule(definition,moduleDefinitions[definition]);}}
return newData;};this.setRootElement=function(element)
{rootElement=element;};this.getRootElement=function()
{return rootElement;};this.storeModule=function(name,definition)
{moduleDefinitions[name]=definition;};this.instantiateModules=function()
{var definition;for(definition in mockDefinitions)
{if(mockDefinitions.hasOwnProperty(definition))
{this.addModule(definition,mockDefinitions[definition],true);}}
for(definition in moduleDefinitions)
{if(moduleDefinitions.hasOwnProperty(definition))
{this.addModule(definition,moduleDefinitions[definition],false);}}};this.addModule=function(name,definition,mock)
{function Module()
{return this;}
var ModuleConstructor,moduleArguments,moduleInstance;if(typeof definition==='function')
{definition=[definition];}
if(definition)
{ModuleConstructor=definition[definition.length-1];moduleArguments=resolveDependencies.call(this,definition.slice(0,definition.length-1));Module.prototype=ModuleConstructor.prototype;moduleInstance=new Module();moduleInstance=ModuleConstructor.apply(moduleInstance,moduleArguments);if(!modules[name]||mock===true)
{modules[name]=moduleInstance;}}
else
{throw new Error('Module '+name+' is not defined');}
return moduleInstance;};this.mockModule=function(name,instance)
{mockDefinitions[name]=[function()
{return instance;}];};this.getModule=function(moduleName)
{var module=modules[moduleName]||searchDependencies(moduleName,'module');return module;};this.getModuleDefinition=function(moduleName)
{return moduleDefinitions[moduleName]||searchDependencies(moduleName,'module definition');};};this.app=function(appReference,appDependencies)
{var appContainer=appContainers[appReference]||createNewAppContainer(appReference);manageAppDependencies(appReference,appDependencies||[]);return appContainer;};this.CORE_LIBRARY=CORE_LIBRARY;this.CoreLibrary=function(appDependencies)
{return this.app(CORE_LIBRARY,appDependencies);};THIS.COMPONENT_LIBRARY=COMPONENT_LIBRARY;this.ComponentLibrary=function(appDependencies)
{return this.app(COMPONENT_LIBRARY,appDependencies);};this.util={refresh:function(module)
{return THIS.util[module]&&THIS.util[module].refresh&&THIS.util[module].refresh();},destroy:function(module)
{return THIS.util[module]&&THIS.util[module].destroy&&THIS.util[module].destroy();}};this.api={};}
window.VGN=new VgnConstructor();}(window));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$noOp',function()
{return function()
{return undefined;};});}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$keyCodes',function()
{return{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40};});}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$arrayIndexOf',function()
{return function(arr,obj,start)
{var result=-1,i=(start||0),length;if(arr.indexOf)
{return arr.indexOf(obj,start);}
for(i,length=arr.length;i<length;i+=1)
{if(arr[i]===obj)
{result=i;break;}}
return result;};});}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$bind',function()
{return function(funcToBind,bindTo)
{var args,FNOP=function()
{return this;},fBound=function()
{var obj;if(funcToBind instanceof FNOP&&bindTo)
{obj=funcToBind;}
else
{obj=bindTo;}
return funcToBind.apply(obj,args.concat(Array.prototype.slice.call(arguments)));};if(arguments.length>2)
{args=Array.prototype.slice.call(arguments,2);}
else
{args=[];}
if(typeof funcToBind!=='function')
{throw new TypeError('$coreLib $bind - what is trying to be bound is not a function');}
FNOP.prototype=funcToBind.prototype;fBound.prototype=new FNOP();return fBound;};});}(window.VGN));(function(VGN)
{'use strict';var actualValue=function(value)
{return value===0?value:(value||'');};VGN.CoreLibrary().module('$stringUtils',function()
{function trim(string)
{var result;if(!string)
{result=string;}
else
{result=new RegExp('^\\s*(\\S(.*\\S)?)\\s*$').exec(string);result=result?result[1]:'';}
return result;}
function format(string)
{var arg,args,i,iLength,key,pattern;args=Array.prototype.slice.call(arguments,1);if(args.length&&typeof args[0]==='string')
{for(i=0,iLength=args.length;i<iLength;i+=1)
{if(typeof args[i]==='string')
{string=string.replace('{{'+i+'}}',actualValue(args[i]));}}}
else if(args.length===1)
{arg=args[0];for(key in arg)
{if(arg.hasOwnProperty(key))
{pattern=new RegExp('{{ *'+key+' *}}','g');string=string.replace(pattern,actualValue(arg[key]));}}}
return string;}
return{trim:trim,format:format};});}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$AjaxRequestConfig',['$noOp',function($noOp)
{var AjaxRequestConfig=function()
{this.url=undefined;this.method='GET';this.postData='';this.callback=$noOp;this.forceXHR=false;};return{newInstance:function()
{return new AjaxRequestConfig();}};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$measurements',['$window','$document','$browser',function($window,$document,$browser)
{var getDimension=function(element,measurementName)
{var measurement,firstLetter=measurementName.charAt(0).toUpperCase(),measureItem=measurementName.replace(/^\w/i,firstLetter),isIe7orLess=$browser.isIe7orLess(),elementStyle=element.style,originalDisplay=elementStyle.display,originalLeft=elementStyle.left,originalPosition=elementStyle.position;elementStyle.display='block';elementStyle.left=0;if(isIe7orLess)
{elementStyle.position='static';}
measurement=element['offset'+measureItem]+1;elementStyle.display=originalDisplay;elementStyle.left=originalLeft;if(isIe7orLess)
{elementStyle.position=originalPosition;}
return measurement;};return{getElementBounds:function(element)
{var rect={},result={};try
{rect=element.getBoundingClientRect();}
catch(e)
{rect={height:0,width:0,bottom:0,top:0,left:0,right:0};}
result.width=rect.width||rect.right-rect.left;result.height=rect.bottom-rect.top;result.x=result.left=rect.left;result.y=result.top=rect.top;result.right=rect.right;result.bottom=rect.bottom;return result;},getHeight:function(element)
{return getDimension(element,'height');},getWidth:function(element)
{return getDimension(element,'width');},getPageYOffset:function()
{var offset=$window.pageYOffset;if(isNaN(offset))
{offset=$document.body.scrollTop;}
return offset;},getPageXOffset:function()
{var offset=$window.pageXOffset;if(isNaN(offset))
{offset=$document.body.scrollLeft;}
return offset;}};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$contains',function()
{function contains(container,element)
{return element===container||(element&&element.parentNode&&contains(container,element.parentNode))||false;}
return contains;});}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$hash',function()
{var MAX_INT=2147483648;function orZero(value)
{var even,negative;if(value>MAX_INT-1||value<-MAX_INT)
{negative=value<0;even=Math.floor(Math.abs(value)/MAX_INT)%2===0;value%=MAX_INT;if(!even)
{if(negative)
{value+=MAX_INT;}
else
{value-=MAX_INT;}}}
return value;}
return{orZero:orZero,calculate:function(string)
{var hash=0,i,chr,len;if(string.length===0)
{return hash;}
for(i=0,len=string.length;i<len;i+=1)
{chr=string.charCodeAt(i);hash=orZero(hash*32-hash+chr);}
return hash;}};});}(window.VGN));(function(VGN)
{'use strict';var coreLib=VGN.CoreLibrary();coreLib.module('$document',[function()
{return document;}]);coreLib.module('$window',[function()
{return window;}]);coreLib.module('$XMLHttpRequest',[function()
{return{'newInstance':function()
{return new XMLHttpRequest();},'instance':XMLHttpRequest};}]);coreLib.module('$XDomainRequest',[function()
{return{'newInstance':function()
{return new window.XDomainRequest();},'exist':function()
{return!!window.XDomainRequest;}};}]);coreLib.module('$ActiveXObject',[function()
{return{'newInstance':function(id)
{return new window.ActiveXObject(id);},'exist':function()
{return!!window.ActiveXObject;}};}]);coreLib.module('$browser',['$document',function($document)
{return{isIe7orLess:function()
{return $document.documentMode&&$document.documentMode<8;},supportsCssTransition:function()
{return!$document.documentMode||$document.documentMode>9;}};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$events',['$arrayIndexOf','$window',function($arrayIndexOf,$window)
{var modules={},VgnEvent=function(type)
{this.type=type||'';this.data={};},Events=function()
{this.activeEvents={};},manageDOMEvents=function(subscriptionType,object,eventType,fn)
{var i=0,events=eventType.split(' '),prefix=object.addEventListener?'':'on';for(i;i<events.length;i+=1)
{object[subscriptionType](prefix+events[i],fn,false);}
return{object:object,type:eventType,handler:fn};},initModules=function(moduleName)
{if(!modules[moduleName])
{modules[moduleName]={subscriptions:[],events:[]};}},popList=function(list,item,matcher)
{var i,length=list.length;for(i=0;i<length;i+=1)
{if(list.length===i)
{break;}
if(matcher(list[i],item))
{list.splice(i,1);}}},pushList=function(list,item,matcher)
{var i,length=list.length,isPresent=false;for(i=0;i<length;i+=1)
{if(matcher(list[i],item))
{isPresent=true;break;}}
if(!isPresent)
{list.push(item);}},compareEventObject=function(obj1,obj2)
{return obj1.object===obj2.object&&obj1.type===obj2.type&&obj1.handler.toString()===obj2.handler.toString();},compareSubscriptionObject=function(obj1,obj2)
{return obj1.dispatcher===obj2.dispatcher&&obj1.type===obj2.type&&obj1.callback.toString()===obj2.callback.toString();};Events.prototype.getOrCreateArray=function()
{var location=this.activeEvents,key;while(arguments.length>0)
{key=Array.prototype.shift.call(arguments);if(!location[key])
{location[key]=[];}
location=location[key];}
return location;};Events.prototype.addEvent=function(object,eventType,fn,moduleName)
{var subscriptionType=object.addEventListener?'addEventListener':'attachEvent',eventObj=manageDOMEvents(subscriptionType,object,eventType,fn);if(moduleName)
{initModules(moduleName);pushList(modules[moduleName].events,eventObj,compareEventObject);}};Events.prototype.removeEvent=function(object,eventType,fn,moduleName)
{var subscriptionType=object.removeEventListener?'removeEventListener':'detachEvent',eventObj=manageDOMEvents(subscriptionType,object,eventType,fn);if(modules[moduleName]&&modules[moduleName].events)
{popList(modules[moduleName].events,eventObj,compareEventObject);}};Events.prototype.dispatch=function(event,dispatcher,data)
{var subscriptions,i=0,eventType;if(typeof event==='string')
{event=this.createEvent(event);}
event.target=dispatcher;eventType=event.type;subscriptions=dispatcher?this.getOrCreateArray(dispatcher,eventType):this.getOrCreateArray(eventType);for(i;i<subscriptions.length;i+=1)
{subscriptions[i](event,data);}};Events.prototype.subscribe=function(dispatcher,eventType,callback,moduleName)
{var subscriptions,isNewSubscription=false;if(!dispatcher)
{subscriptions=this.getOrCreateArray(eventType);}
else
{subscriptions=this.getOrCreateArray(dispatcher,eventType);}
if($arrayIndexOf(subscriptions,callback)===-1)
{subscriptions.push(callback);isNewSubscription=true;}
if(moduleName)
{initModules(moduleName);modules[moduleName].subscriptions.push({dispatcher:dispatcher,type:eventType,callback:callback});pushList(modules[moduleName].subscriptions,{dispatcher:dispatcher,type:eventType,callback:callback},compareSubscriptionObject);}
return isNewSubscription;};Events.prototype.unsubscribe=function(dispatcher,eventType,callback,moduleName)
{var subscriptions,callbackIndex;if(!dispatcher)
{subscriptions=this.getOrCreateArray(eventType);}
else
{subscriptions=this.getOrCreateArray(dispatcher,eventType);}
callbackIndex=$arrayIndexOf(subscriptions,callback);if(callbackIndex!==-1)
{subscriptions.splice(callbackIndex,1);}
if(modules[moduleName]&&modules[moduleName].subscriptions)
{popList(modules[moduleName].subscriptions,{dispatcher:dispatcher,type:eventType,callback:callback},compareSubscriptionObject);}};Events.prototype.createEvent=function(type)
{return new VgnEvent(type);};Events.prototype.getTarget=function(evt)
{var e=evt||$window.event;return e.target||e.srcElement||(e.touches&&e.touches[0]&&e.touches[0].target);};Events.prototype.preventDefault=function(event)
{if(event.preventDefault)
{event.preventDefault();}
else
{event.returnValue=false;}};Events.prototype.stopPropagation=function(event)
{if(event.stopPropagation)
{event.stopPropagation();if(event.stopImmediatePropagation)
{event.stopImmediatePropagation();}}
else
{event.cancelBubble=true;}};Events.prototype.removeEvents=function(moduleName)
{var eventObject;if(modules[moduleName]&&modules[moduleName].events)
{eventObject=modules[moduleName].events.pop();while(eventObject)
{this.removeEvent(eventObject.object,eventObject.type,eventObject.handler);eventObject=modules[moduleName].events.pop();}}};Events.prototype.removeSubscriptions=function(moduleName)
{var subsObject;if(modules[moduleName]&&modules[moduleName].subscriptions)
{subsObject=modules[moduleName].subscriptions.pop();while(subsObject)
{this.unsubscribe(subsObject.dispatcher,subsObject.type,subsObject.callback);subsObject=modules[moduleName].subscriptions.pop();}}};Events.prototype.cleanup=function(moduleName)
{this.removeEvents(moduleName);this.removeSubscriptions(moduleName);};return{'newInstance':function()
{return new Events();},'instance':Events};}]);}(window.VGN));(function(VGN)
{'use strict';var coreLib=VGN.CoreLibrary();coreLib.module('$createElement',['$document','$node',function($document,$node)
{return function(elementName,attrs,parent)
{var el=$document.createElement(elementName),prop;for(prop in attrs)
{if(attrs.hasOwnProperty(prop))
{if(prop==='class')
{el.className=attrs[prop];}
else
{$node.attribute(el,prop,attrs[prop]);}}}
$node.append(parent,el);return el;};}]);coreLib.module('$createElementFromString',['$document','$stringUtils','$node',function($document,$stringUtils,$node)
{var wrapper,el;return function(htmlString,config,parent)
{wrapper=$document.createElement('div');wrapper.innerHTML=$stringUtils.format(htmlString,config);el=wrapper.childNodes[0];$node.append(parent,el);return el;};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$cookie',['$document',function($document)
{return{get:function(name)
{var nameEQ=name+'=',cookies=$document.cookie.split(';'),i=0,length,result,c;for(i,length=cookies.length;i<length;i+=1)
{c=cookies[i];while(c.charAt(0)===' ')
{c=c.substring(1,c.length);}
if(c.indexOf(nameEQ)===0)
{result=unescape(c.substring(nameEQ.length,c.length));}}
return result;},set:function(name,value,days,includeDomain)
{var date,expires='';if(days)
{date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires='; expires='+date.toGMTString();}
$document.cookie=name+'='+escape(value)+expires+'; path=/'+(includeDomain?';domain=.vanguard.com':'');},has:function(name)
{return Number($document.cookie.indexOf(name+'='))===0||Number($document.cookie.indexOf(' '+name+'='))>=0;},erase:function(name)
{this.set(name,'',-1);}};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$ajaxRequest',['$document','$XMLHttpRequest','$XDomainRequest','$ActiveXObject',function($document,$XMLHttpRequest,$XDomainRequest,$ActiveXObject)
{var PID=['MSXML2.XMLHTTP.6.0','MSXML2.XMLHTTP.5.0','MSXML2.XMLHTTP.4.0','MSXML2.XMLHTTP.3.0','MSXML2.XMLHTTP.2.0','Microsoft.XMLHTTP'],addQueryParam=function(url,key,value)
{if(url.indexOf('?')>0)
{url=url+'&'+key+'='+value;}
else
{url=url+'?'+key+'='+value;}
return url;},PIDlength=PID.length;return function(configuration)
{var config=configuration||{},request=$XMLHttpRequest.newInstance(),i=0;if(config.forceXHR===true)
{if($XDomainRequest.exist())
{request=$XDomainRequest.newInstance();}
else if($ActiveXObject.exist())
{for(i;i<PIDlength;i+=1)
{request=$ActiveXObject.newInstance(PID[i]);if(request)
{break;}}}}
if(!(request instanceof $XMLHttpRequest.instance))
{config.method='POST';config.postData=String($document.cookie);config.url=addQueryParam(config.url,'noCache',new Date().getTime());if(config.loggedOn)
{config.url=addQueryParam(config.url,'loggedOn','true');}}
return request;};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$ajax',['$window','$document','$arrayIndexOf','$bind','$select','$ajaxRequest','$createElement','$XMLHttpRequest','$noOp',function($window,$document,$arrayIndexOf,$bind,$select,$ajaxRequest,$createElement,$XMLHttpRequest,$noOp)
{var REQUEST_COMPLETE=4,STATUS_OK=200,JSONP_ID='vgnJSONPLoader',JSONP_CALLBACK='vgnJSONPCallback',requests=[],removeRequest=function(request)
{var index=$arrayIndexOf(requests,request);if(index>-1)
{requests.splice(index,1);}},isJSONPcontent=function(url)
{return url.indexOf('.jsonp')>-1||url.indexOf('/jsonp')>-1;};function Loader()
{this.data=undefined;this.callback=undefined;this.config=undefined;}
Loader.prototype={load:function(requestConfig)
{this.config=requestConfig;this.request=$ajaxRequest(this.config);if(isJSONPcontent(this.config.url))
{this.loadJSONP();}
else
{requests.push(this.request);this.request.open(this.config.method,this.config.url,true);this.request.onreadystatechange=$bind(this.onLoaded,this);if(this.request instanceof $XMLHttpRequest.instance)
{this.request.setRequestHeader('Accept','application/json');this.request.withCredentials=true;}
else
{this.request.timeout=5000;this.request.onload=$bind(this.onLoaded,this,true);this.request.onprogress=$noOp;this.request.ontimeout=$bind(this.onTimeout,this);this.request.onerror=$bind(this.onError,this);}
if(this.request)
{this.request.send(this.config.postData);}}},loadJSONP:function()
{var script=$select('#'+JSONP_ID);$window[JSONP_CALLBACK]=this.config.callback;this.config.url=this.config.url.replace('callback=?','callback='+JSONP_CALLBACK);if(script.length>0)
{$document.body.removeChild(script[0]);}
script=$createElement('script',{id:JSONP_ID});script.src=this.config.url;$document.body.appendChild(script);},onLoaded:function(isMicrosoftRequest)
{var readyState,status,responseText;try
{responseText=this.request.responseText;readyState=this.request.readyState;status=this.request.status||STATUS_OK;if((readyState===REQUEST_COMPLETE&&status===STATUS_OK)||(isMicrosoftRequest===true&&responseText&&responseText!==''))
{this.data=responseText;this.config.callback(true,this.data,this);removeRequest(this.request);}
else if(status!==STATUS_OK)
{this.config.callback(false,{status:status},this);}}
catch(ignore)
{}},onError:function()
{this.config.callback(false,{status:0},this);},onTimeout:$noOp,cancel:function()
{this.request.abort();}};return function(requestConfig)
{var loader=new Loader();loader.load(requestConfig);return loader;};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$select',['$document','$browser','$class','$stringUtils',function($document,$browser,$class,$stringUtils)
{return function(selectorString,element)
{var nodes=[],result,selector,className,children,numChildren,child,i;selector=$stringUtils.trim(selectorString);element=element||$document;if(selector.indexOf('#')!==-1&&element.getElementById)
{selector=selector.substring(1);result=element.getElementById(selector);if(result)
{nodes.push(result);}}
else if(selector.indexOf('.')!==-1&&element.getElementsByClassName)
{selector=selector.substring(1);nodes=element.getElementsByClassName(selector);}
else if(element.querySelectorAll)
{nodes=element.querySelectorAll(selectorString);}
else if(selector.indexOf('.')!==-1&&$browser.isIe7orLess())
{children=element.childNodes;numChildren=children.length;className=selector.replace('.','');for(i=0;i<numChildren;i+=1)
{child=children[i];if($class.has(child,className))
{nodes.push(child);}}}
else
{nodes=element.getElementsByTagName(selectorString);}
return nodes;};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$class',['$stringUtils',function($stringUtils)
{var $class={};$class.add=function(element,className)
{if(element)
{if(element.className==='')
{element.className=className;}
else if(!this.has(element,className))
{element.className=element.className+' '+className;}}
return element;};$class.remove=function(element,value)
{var className;if(element)
{className=' '+element.className+' ';while(className.indexOf(' '+value+' ')>=0)
{className=className.replace(' '+value+' ',' ');}
element.className=$stringUtils.trim(className);}
return element;};$class.has=function(element,value)
{var classes=[],i=0,length,hasClass=false;if(element&&element.className)
{classes=element.className.split(' ');for(i,length=classes.length;i<length;i+=1)
{if(classes[i]===value)
{hasClass=true;break;}}}
return hasClass;};$class.toggle=function(element,className,state)
{var isTrue=state===true||state==='true',isFalse=state===false||state==='false',isUndefined=!(isTrue||isFalse),addClass=isTrue||(isUndefined&&!$class.has(element,className));if(addClass)
{$class.add(element,className);}
else
{$class.remove(element,className);}};return $class;}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('ComponentManager',function()
{var ComponentManager=function()
{this.components=[];};ComponentManager.prototype={add:function(component)
{this.components.push(component);},destroy:function()
{var componentList=this.components,listLength=componentList.length,currentItem,index;for(index=0;index<listLength;index+=1)
{currentItem=componentList[index];if(currentItem.destroy)
{currentItem.destroy();}}
this.components=[];}};return ComponentManager;});}(window.VGN));(function(VGN)
{'use strict';var ARIA_HIDDEN='aria-hidden',HIDDEN_CLASS='vgn-displayNone',TRUE_STR='true',FALSE_STR='false',isDefined=function(item)
{return item!==undefined;},isTrue=function(value)
{return value===true||value===TRUE_STR;},isNotTrue=function(value)
{return value!==true&&value!==TRUE_STR;},isFalse=function(value)
{return value===false||value===FALSE_STR;},isHtmlNode=function(element)
{var isNode=false;if(isDefined(element)&&isDefined(element.nodeType))
{isNode=true;}
return isNode;},setStyle=function(property,config)
{var element=config.element,value=config[property];if(isDefined(value))
{element.style[property]=value+'px';}},setStyles=function(config)
{setStyle('width',config);setStyle('left',config);setStyle('top',config);};VGN.CoreLibrary().module('$node',['$class','$window','$document','$measurements',function($class,$window,$document,$measurements)
{return{remove:function(element)
{var wasRemoved=false;if(isHtmlNode(element))
{if(element.remove)
{element.remove();wasRemoved=true;}
else if(element.parentNode&&element.parentNode.removeChild)
{element.parentNode.removeChild(element);wasRemoved=true;}}
return wasRemoved;},append:function(parent,child)
{var wasAdded=false;if(isHtmlNode(child)&&isHtmlNode(parent))
{parent.appendChild(child);wasAdded=true;}
return wasAdded;},insertBefore:function(node,sibling,parent)
{var wasAdded=false;if(isHtmlNode(node)&&isHtmlNode(sibling)&&isHtmlNode(parent))
{parent.insertBefore(node,sibling);wasAdded=true;}
return wasAdded;},attribute:function(element,attribute,value)
{if(isHtmlNode(element))
{if(value===undefined)
{return element.getAttribute(attribute);}
if(value!=='')
{element.setAttribute(attribute,value);}
else
{element.removeAttribute(attribute);}}},hide:function(element,skipAria)
{if(isHtmlNode(element))
{if(isNotTrue(skipAria))
{element.setAttribute(ARIA_HIDDEN,true);}
$class.add(element,HIDDEN_CLASS);}},show:function(element,skipAria)
{if(isHtmlNode(element))
{if(isNotTrue(skipAria))
{element.setAttribute(ARIA_HIDDEN,false);}
$class.remove(element,HIDDEN_CLASS);}},toggle:function(element,isVisible,skipAria)
{if(isHtmlNode(element))
{if(isTrue(isVisible))
{this.show(element,skipAria);}
else if(isFalse(isVisible))
{this.hide(element,skipAria);}}},autoPosition:function(config)
{var element=config.element,target=config.target,indicator=config.indicator,columnSize=config.columnSize,bodyElement=$document.body,isNonCntAlign=$class.has(bodyElement,'nonCntAlign')||$class.has(bodyElement,'vuiLeftAlignPage'),topLocation,leftLocation,targetBounds,elementWidth,elementX,elementY,indicatorX,indicatorY;if(isHtmlNode(element))
{topLocation=$measurements.getPageYOffset();leftLocation=$measurements.getPageXOffset();targetBounds=$measurements.getElementBounds(target);elementX=targetBounds.left+leftLocation;elementY=targetBounds.bottom+topLocation;if(isHtmlNode(indicator))
{indicatorX=elementX+((targetBounds.width-$measurements.getWidth(indicator))/2);indicatorY=targetBounds.bottom+topLocation-$measurements.getHeight(indicator)+(config.indicatorOffset||0);setStyles({element:indicator,left:indicatorX,top:indicatorY});}
if(isDefined(columnSize)&&columnSize>2)
{if(isNonCntAlign)
{elementX=0;}
else
{elementX=($document.body.clientWidth-$measurements.getElementBounds(element).width)/2;}}
if(elementX<0)
{elementX=0;}
if(config.setWidth&&element.style.width==='')
{elementWidth=$measurements.getWidth(element);}
setStyles({element:element,width:elementWidth,left:elementX,top:elementY});}}};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.CoreLibrary().module('$utils',['$window','$createElementFromString',function($window,$createElementFromString)
{var ITEM_START='<a onclick="',ITEM_END='"></a>',isString=function(item)
{return typeof item==='string';},isFunction=function(item)
{return typeof item==='function';},getFunctionFromString=function(functionString)
{var elementTemplate=[ITEM_START,functionString,ITEM_END].join('');return $createElementFromString(elementTemplate).onclick;},getFunction=function(functionItem)
{var theFunction;if(isFunction(functionItem))
{theFunction=functionItem;}
else if(isString(functionItem))
{theFunction=getFunctionFromString(functionItem);}
return theFunction;},extendObject;extendObject=function extend(from,to)
{var name;if(from===null||typeof from!=='object')
{return from;}
if(from.constructor===Date||from.constructor===RegExp||from.constructor===Function||from.constructor===String||from.constructor===Number||from.constructor===Boolean)
{return new from.constructor(from);}
if(from.constructor!==Object&&from.constructor!==Array)
{return from;}
to=to||new from.constructor();for(name in from)
{if(from.hasOwnProperty(name)&&to[name]===undefined)
{to[name]=extendObject(from[name],null);}}
return to;};return{getFunction:getFunction,extend:extendObject};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.ComponentLibrary().module('dataSource',['$ajax','$AjaxRequestConfig','$bind','$document','$arrayIndexOf','$select','$window','$node',function($ajax,$AjaxRequestConfig,$bind,$document,$arrayIndexOf,$select,$window,$node)
{var me=this,responseData={},dataIsLoaded=false,JSON_POLYFILL_LOCATION='https://static.vgcontent.info/web/common/json3/3.2.5/json3.js',callbacks={},rootElement,traverse,customFunctionCallCount,isJSONAvailable=function()
{return!!$window.JSON;},notifyOfLoad=function(success,loader)
{var url=loader.config.url,i,callbackList,callback;if(url.indexOf('?')>-1)
{url=url.substring(0,url.indexOf('?'));}
callbackList=callbacks[url];for(i=0;i<callbackList.length;i+=1)
{callback=callbackList[i];callback(success,responseData);}
callbacks[loader.config.url]=[];},onRequestComplete=function(success,data,loader)
{responseData=success?JSON.parse(data):data;dataIsLoaded=true;notifyOfLoad(success,loader);},makeRequest=function(url,callback)
{var newRequest=false,config,urlID=url;if(urlID.indexOf('?')>-1)
{urlID=urlID.substring(0,urlID.indexOf('?'));}
if(!callbacks[urlID])
{callbacks[urlID]=[];newRequest=true;}
if($arrayIndexOf(callbacks[urlID],callback)===-1)
{callbacks[urlID].push(callback);}
else
{newRequest=false;}
if(newRequest)
{config=$AjaxRequestConfig.newInstance();config.url=url;config.callback=$bind(onRequestComplete,me);config.forceXHR=$node.attribute(rootElement,'data-forceXHR')==='true';config.loggedOn=$node.attribute(rootElement,'data-logged-on')==='true';$ajax(config);}},onJSONPolyfillLoaded=function(url,callback)
{if(isJSONAvailable())
{makeRequest(url,callback);}},createJSONScriptElement=function()
{var script=$document.createElement('script');$document.getElementsByTagName('head')[0].appendChild(script);script.id='JSONPolyfill';script.src=JSON_POLYFILL_LOCATION;return script;},loadData=function(url,callback)
{var script;if(isJSONAvailable())
{if(dataIsLoaded)
{callback(true,responseData);}
else
{makeRequest(url,callback);}}
else
{script=createJSONScriptElement();script.onload=script.onreadystatechange=$bind(onJSONPolyfillLoaded,this,url,callback);}},loadObject=function(response,callback)
{responseData=dataIsLoaded?responseData:response;callback(true,responseData);},readFromLocal=function(json_str,callback)
{if(isJSONAvailable())
{responseData=dataIsLoaded?responseData:JSON.parse(json_str);dataIsLoaded=true;callback(true,responseData);}
else
{var script=createJSONScriptElement();script.onload=script.onreadystatechange=$bind(onRequestComplete,this,callback,true,json_str);}},findSilo=function(key,obj)
{var result='',prop;if(obj&&key!=='')
{for(prop in obj)
{if(obj.hasOwnProperty(prop)&&(prop.indexOf(key)>-1&&obj.hasOwnProperty(prop)))
{result=obj[prop];break;}}}
return result;},callCustomFunction=function(obj,key,func,callback,data)
{customFunctionCallCount+=1;func(function(result)
{obj[key]=result;customFunctionCallCount-=1;if(customFunctionCallCount===0)
{callback(true,responseData);}},data);},preprocess=function(callback)
{return function(success,resposne)
{customFunctionCallCount=1;traverse(responseData,callback);if(customFunctionCallCount===1)
{callback(success,resposne);}
customFunctionCallCount-=1;};};traverse=function(obj,callback)
{var key,value;for(key in obj)
{if(obj.hasOwnProperty(key))
{value=obj[key];if(value!==null&&typeof value==="object")
{traverse(value,callback);}
if(value.sharedDefinition&&responseData.sharedDefinitions&&responseData.sharedDefinitions[value.sharedDefinition])
{obj[key]=JSON.parse(JSON.stringify(responseData.sharedDefinitions[value.sharedDefinition]));}
if(value.customFunction&&typeof $window[value.customFunction]==='function')
{callCustomFunction(obj,key,$window[value.customFunction],callback,value.data);}}}};return{load:function(element,callback)
{var hrefAttr=$node.attribute(element,'data-ref'),jsonAttr=$node.attribute(element,'data-json'),endpointAttr=$node.attribute(element,'data-endpoint'),namedJson=$node.attribute(element,'data-name'),preprocessingEnable=$node.attribute(element,'data-preprocessing-enabled');rootElement=element;if(preprocessingEnable!==null)
{callback=preprocess(callback);}
if(hrefAttr)
{this.load($select(decodeURI(hrefAttr))[0],callback);}
else if(jsonAttr)
{readFromLocal(decodeURI(jsonAttr),callback);}
else if(endpointAttr)
{loadData(decodeURI(endpointAttr),callback);}
else if(namedJson)
{loadObject($window[namedJson],callback);}},getComponentData:function(componentName)
{var data=responseData[componentName];if(data&&data.sharedResource)
{data=responseData[data.sharedResource];}
return data||undefined;},getActiveSilo:function(element)
{var primaryKey=$node.attribute(element,'data-primary-silo')||'',secondaryKey=$node.attribute(element,'data-secondary-silo')||'',mappings=this.getComponentData('taxonomyMapping'),activeSilo='';if(mappings)
{activeSilo=findSilo(secondaryKey,mappings.secondary);if(activeSilo==='')
{activeSilo=findSilo(primaryKey,mappings.primary);}
if(activeSilo==='')
{activeSilo=primaryKey;}}
return activeSilo;},getData:function()
{return responseData;},setData:function(newData)
{responseData=newData;}};}]);}(window.VGN));(function(VGN)
{'use strict';var MOBILE_DEVICE_USER_AGENTS=['ipad','ipod','iphone','android','kindle','silk'];VGN.ComponentLibrary().module('detection',['$window',function($window)
{return{isMobileDevice:function()
{var userAgent=$window.navigator.userAgent.toLowerCase(),i,length;for(i=0,length=MOBILE_DEVICE_USER_AGENTS.length;i<length;i+=1)
{if(userAgent.indexOf(MOBILE_DEVICE_USER_AGENTS[i])>-1)
{return true;}}
return false;}};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.ComponentLibrary().module('EventManager',['$events',function($events)
{return $events.newInstance();}]);}(window.VGN));(function(VGN)
{'use strict';var TAB_INDEX='tabindex';VGN.ComponentLibrary().module('KeystrokeManager',['$document','$bind','$node','$arrayIndexOf','EventManager','$keyCodes',function($document,$bind,$node,$arrayIndexOf,EventManager,$keyCodes)
{var wrapKeysInArray=function(keys)
{if(!(keys instanceof Array))
{keys=[keys];}
return keys;},setItemTabIndex=function(item)
{var tabIndex=$node.attribute(item,TAB_INDEX);if(tabIndex===null)
{$node.attribute(item,TAB_INDEX,0);}},KeystrokeManager=function(list,makeFirstItemTabStop,eventNamespace)
{this.list=list||[];this.FORWARD=[];this.BACKWARD=[];this.ALL=[];this.setForward([$keyCodes.RIGHT_ARROW,$keyCodes.DOWN_ARROW]);this.setBackward([$keyCodes.LEFT_ARROW,$keyCodes.UP_ARROW]);this.eventNamespace=eventNamespace;if(this.list.length>0)
{this.registerItems(this.list,makeFirstItemTabStop);}};KeystrokeManager.prototype={clearItems:function()
{var i,iLength;for(i=0,iLength=this.list.length;i<iLength;i+=1)
{this.list.pop();}},registerItems:function(list,makeFirstItemTabStop)
{var listLength=list.length,index;for(index=0;index<listLength;index+=1)
{setItemTabIndex(list[index]);}
if(list.length>0&&makeFirstItemTabStop)
{setItemTabIndex(list[0]);}
this.list=list;},setListeningElement:function(element)
{EventManager.addEvent(element,'keydown',$bind(this.navigateList,this),this.eventNamespace);},setAll:function()
{var i,iLength;this.ALL=[];for(i=0,iLength=this.FORWARD.length;i<iLength;i+=1)
{this.ALL.push(this.FORWARD[i]);}
for(i=0,iLength=this.BACKWARD.length;i<iLength;i+=1)
{this.ALL.push(this.BACKWARD[i]);}},setKeys:function(keys,directionArray)
{var i,iLength,key;keys=wrapKeysInArray(keys);for(i=0,iLength=keys.length;i<iLength;i+=1)
{key=keys[i];if($arrayIndexOf(directionArray,key)===-1)
{directionArray.push(key);}}},setForward:function(keys)
{this.FORWARD=wrapKeysInArray(keys);this.setAll();},setBackward:function(keys)
{this.BACKWARD=wrapKeysInArray(keys);this.setAll();},addForward:function(keys)
{this.setKeys(keys,this.FORWARD);this.setAll();},addBackward:function(keys)
{this.setKeys(keys,this.BACKWARD);this.setAll();},getNextIndex:function(currentIndex,direction)
{var THIS=this,numListItems=THIS.list.length-1,nextIndex=currentIndex+direction;if(nextIndex>numListItems)
{nextIndex=0;}
if(nextIndex<0)
{nextIndex=numListItems;}
return nextIndex;},navigate:function(currentIndex,direction)
{var THIS=this,nextIndex=THIS.getNextIndex(currentIndex,direction),tabIndex,nextItem;nextItem=THIS.list[nextIndex];if(nextItem)
{tabIndex=parseInt($node.attribute(nextItem,TAB_INDEX),10);if(tabIndex!==-1)
{nextItem.focus();}
else
{THIS.navigate(nextIndex,direction);}}},navigateList:function(e)
{var THIS=this,event=e||window.event,activeElement=$document.activeElement||EventManager.getTarget(event),currentIndex=$arrayIndexOf(THIS.list,activeElement),keyCode=event.keyCode,shiftDepressed=event.shiftKey===true;if($arrayIndexOf(THIS.ALL,keyCode)>-1&&shiftDepressed===false)
{EventManager.preventDefault(e);if(isNaN(currentIndex))
{currentIndex=-1;}
THIS.navigate(currentIndex,$arrayIndexOf(THIS.BACKWARD,keyCode)>-1?-1:1);}},destroy:function()
{EventManager.cleanup(this.eventNamespace);this.list=this.listener=this.FORWARD=this.BACKWARD=this.ALL=undefined;}};return KeystrokeManager;}]);}(window.VGN));(function(VGN)
{'use strict';var KEYBOARD_ACTIVE_CLASS_NAME='vgn-keyboardModeActive',KEYBOARD_INACTIVE_CLASS_NAME='vgn-keyboardModeInactive';VGN.ComponentLibrary().module('KeyboardModeDetector',['$arrayIndexOf','$bind','$class','EventManager','$keyCodes','$window',function($arrayIndexOf,$bind,$class,EventManager,$keyCodes,$window)
{var KeyboardModeDetector=function()
{return this;};KeyboardModeDetector.prototype={init:function(element)
{this.element=element;this.boundKeyboardActivity=$bind(this.onKeyboardActivity,this);this.boundMouseActivity=$bind(this.onMouseActivity,this);$class.add(this.element,KEYBOARD_INACTIVE_CLASS_NAME);EventManager.addEvent(this.element,'keydown',this.boundKeyboardActivity);EventManager.addEvent(this.element,'mousedown',this.boundMouseActivity);},onKeyboardActivity:function(evt)
{var event=evt||$window.event,keyCode=event.keyCode;if($arrayIndexOf([$keyCodes.TAB,$keyCodes.LEFT_ARROW,$keyCodes.RIGHT_ARROW,$keyCodes.DOWN_ARROW,$keyCodes.UP_ARROW],keyCode)>-1)
{$class.add(this.element,KEYBOARD_ACTIVE_CLASS_NAME);$class.remove(this.element,KEYBOARD_INACTIVE_CLASS_NAME);}
else
{$class.add(this.element,KEYBOARD_INACTIVE_CLASS_NAME);$class.remove(this.element,KEYBOARD_ACTIVE_CLASS_NAME);}},onMouseActivity:function()
{$class.add(this.element,KEYBOARD_INACTIVE_CLASS_NAME);$class.remove(this.element,KEYBOARD_ACTIVE_CLASS_NAME);},destroy:function()
{EventManager.removeEvent(this.element,'keydown',this.boundKeyboardActivity);EventManager.removeEvent(this.element,'mousedown',this.boundKeyboardActivity);$class.remove(this.element,KEYBOARD_ACTIVE_CLASS_NAME);$class.remove(this.element,KEYBOARD_INACTIVE_CLASS_NAME);}};return KeyboardModeDetector;}]);}(window.VGN));(function(VGN)
{'use strict';var vgnApp=VGN.ComponentLibrary();vgnApp.module('linkTracking',['EventManager',function(EventManager)
{return function(element,nameSpace)
{var getAnchorSrc=function(e)
{var target=EventManager.getTarget(e),source;if(target.tagName.toLowerCase()==='a')
{source=target;}
else if(target.parentNode&&target.parentNode.tagName.toLowerCase()==='a')
{source=target.parentNode;}
else if(target.parentElement&&target.parentElement.tagName.toLowerCase()==='a')
{source=target.parentElement;}
return source;},containsCurrentNamespace=function(dataObj)
{var i=0,len=dataObj.namespace.length;for(i,len;i<len;i+=1)
{if(dataObj.namespace[i]===nameSpace)
{return true;}}},sendEvent=function(e,dataObj)
{var ltData=e.data||dataObj;if(!ltData)
{ltData={namespace:[],originalSrc:getAnchorSrc(e)};}
if(!containsCurrentNamespace(ltData))
{ltData.namespace.push(nameSpace);e.data=ltData;}};EventManager.addEvent(element,'click touchstart',sendEvent);};}]);vgnApp.module('linkReporting',['EventManager','webUsageProxy','$hash','$class',function(EventManager,webUsageProxy,$hash,$class)
{return function(element)
{var getNameSpace=function(nsList)
{var namespace='',i;for(i=nsList.length-1;i>=0;i-=1)
{namespace=namespace+nsList[i]+'.';}
return namespace.substr(0,namespace.length-1);},getTrackingID=function(elem,e,dataObj)
{var href=elem.href,text=e,className=elem.className;if(elem.textContent)
{text=elem.textContent;}
else
{text=elem.innerText;}
text=text.replace(new RegExp('[\t\n]','g'),'').replace(new RegExp('\\s','g'),'-').replace(new RegExp('[^a-zA-Z0-9\\-]','g'),'').substring(0,16);href=href.substring(href.indexOf('/',8));return getNameSpace(dataObj.namespace)+'.'+text+'.'+$hash.calculate(href+text+className);},trackLink=function(e,dataObj)
{var anchor=dataObj.originalSrc,linkName=getTrackingID(anchor,e,dataObj);webUsageProxy.trackLinkUsage(linkName,$class.has(anchor,'externalSiteIconLink'));},handleClickEvent=function(e)
{var dataObj=e.data;if(dataObj&&dataObj.originalSrc)
{trackLink(e,dataObj);}};EventManager.addEvent(element,'click touchstart',handleClickEvent);EventManager.subscribe(null,'ghwebtrends',handleClickEvent);};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.ComponentLibrary().module('webUsageFactory',['$noOp','$window','$document','$cookie',function($noOp,$window,$document,$cookie)
{return function()
{if(typeof $window.WebTrends!=='function')
{return{dcsGetId:$noOp,dcsCollect:$noOp};}
$window.WebTrends.prototype.dcsGetId=function()
{var script;if(this.enabled&&!$cookie.has(this.fpc)&&!$cookie.has('WTLOPTOUT'))
{script=$document[0].createElement('script');script.src="http"+($window.location.protocol.indexOf('https:')===0?'s':'')
+"://"+this.domain+"/"+this.dcsid+"/wtid.js";$document[0].documentElement.firstChild.appendChild(script);}};$window.WebTrends.prototype.dcsAnchor=$noOp;return new $window.WebTrends();};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.ComponentLibrary().module('webUsageProxy',['$window','$document','windowData','$createElement','EventManager',function($window,$document,windowData,$createElement,EventManager)
{var webUsageProxy={};webUsageProxy.getPageID=function()
{if($document.getElementsByName('DCSext.pageid')[0])
{return $document.getElementsByName('DCSext.pageid')[0].content+$window.location.hash.replace('#','');}
return'';};webUsageProxy.trackLinkUsage=function(linkName,isExternal)
{webUsageProxy.clearValues();if(isExternal)
{if($window.dcsMultiTrack)
{$window.dcsMultiTrack('DCS.Link',linkName,'DCS.LinkLocation',webUsageProxy.getPageID());}}
else
{windowData.setWindowName(linkName+':'+webUsageProxy.getPageID());}};webUsageProxy.trackActionUsage=function(linkName,uri)
{webUsageProxy.clearValues();if($window.dcsMultiTrack)
{$window.dcsMultiTrack('DCS.Link',linkName,'DCS.LinkLocation',webUsageProxy.getPageID(),'DCS.dcsuri',uri);}};webUsageProxy.trackAction=function(namespace)
{var linkName=namespace,pathname=$window.location.pathname,uri=pathname+(pathname.lastIndexOf('/')===pathname.length-1?'':'/')+$window.location.hash.replace('#','')+'.'+linkName;webUsageProxy.trackActionUsage(linkName,uri);};webUsageProxy.trackLink=function(event,element,namespace)
{var src=null,target=EventManager.getTarget(event)||element,wtEvent;if(target.tagName.toLowerCase()==='a')
{src=target;}
else if(target.parentElement&&target.parentElement.tagName.toLowerCase()==='a')
{src=target.parentElement;}
else if(target.parentNode&&target.parentNode.tagName.toLowerCase()==='a')
{src=target.parentNode;}
wtEvent=EventManager.createEvent('ghwebtrends');wtEvent.data={namespace:[],originalSrc:src};if(namespace)
{wtEvent.data.namespace[0]=namespace;}
EventManager.dispatch(wtEvent);};webUsageProxy.clearValue=function(nameSpace,attribute)
{if($window._tag&&$window._tag[nameSpace]&&$window._tag[nameSpace][attribute])
{$window._tag[nameSpace][attribute]="";}};webUsageProxy.clearValues=function()
{webUsageProxy.clearValue('DCSext','Link');webUsageProxy.clearValue('DCSext','LinkLocation');webUsageProxy.clearValue('DCSext','dcsuri');webUsageProxy.clearValue('WT','ti');webUsageProxy.clearValue('DCSext','sharebtn');webUsageProxy.clearValue('DCSext','sharemedia');};webUsageProxy.addMetaTag=function(name,value)
{name=name.indexOf('WT.')===0?name:'DCSext.'+name;var metaTag=$document.getElementsByName(name)[0];if(!metaTag)
{metaTag=$createElement('meta',{'name':name,'content':value});$document.getElementsByTagName('head')[0].appendChild(metaTag);}
else
{metaTag.content=value;}};webUsageProxy.addMetaTagsLinkLocation=function()
{var windowName=windowData.getWindowName(),link=null,linkLocation=null;if(typeof windowName==="string"&&windowName.indexOf(":")>-1)
{link=windowName.split(":")[0].replace("__sWU","");linkLocation=windowName.split(":")[1].replace("__eWU","");webUsageProxy.addMetaTag('Link',link);webUsageProxy.addMetaTag('LinkLocation',linkLocation);}};webUsageProxy.clearLogonMetaTag=function()
{var logonMetaTag=$document.getElementsByName('WT.z_lv1')[0];if(logonMetaTag&&logonMetaTag.content==="1")
{logonMetaTag.content='';}
webUsageProxy.clearValue('WT','z_lv1');};return webUsageProxy;}]);}(window.VGN));(function(VGN)
{'use strict';VGN.ComponentLibrary().module('windowData',['$window',function($window)
{var WEB_USAGE_PREFIX='__s',WEB_USAGE_SUFFIX='__e',WEB_USAGE_NAME='WU';return{setWindowName:function(value)
{if($window.name.indexOf(WEB_USAGE_PREFIX)>=0)
{this.removeWindowData(WEB_USAGE_NAME);}
$window.name=$window.name+WEB_USAGE_PREFIX+WEB_USAGE_NAME+value+WEB_USAGE_SUFFIX+WEB_USAGE_NAME;},removeWindowData:function(name)
{var regex=new RegExp(WEB_USAGE_PREFIX+name+"(.*)"+WEB_USAGE_SUFFIX+name);$window.name=$window.name.replace(regex,"");},getWindowName:function()
{return $window.name;}};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.ComponentLibrary().module('AutoSuggestData',['$ajax','$AjaxRequestConfig','$bind','EventManager',function($ajax,$AjaxRequestConfig,$bind,EventManager)
{var AutoSuggestData=function(moduleName)
{this.DATA_AVAILABLE='onAutoSuggestDataAvailable';this.loadEvent=EventManager.createEvent(this.DATA_AVAILABLE+(moduleName||''));},getParameters=function(modifier,parameters)
{return(modifier&&(modifier[0].checked?modifier[0].data.parameters:modifier[1].data.parameters))||parameters||'';};AutoSuggestData.prototype={populate:function(data,modifier)
{this.data=data;this.modifier=modifier;},query:function(term)
{var compositeURL=this.data.href+'?'+getParameters(this.modifier,this.data.parameters)+'&callback=?'+'&'+this.data.queryTerm+'='+encodeURIComponent(term),config;if(!this.loader)
{this.boundRequestLoaded=$bind(this.onRequestLoaded,this);config=$AjaxRequestConfig.newInstance();config.callback=this.boundRequestLoaded;config.url=compositeURL;this.loader=$ajax(config);}
else
{config=this.loader.config;config.url=compositeURL;this.loader.cancel();this.loader.load(config);}},onRequestLoaded:function(data)
{this.loadEvent.data=data;EventManager.dispatch(this.loadEvent,this);},destroy:function()
{if(this.loader)
{this.loader.cancel();this.loader=undefined;}
this.data=this.boundRequestLoaded=this.loadEvent=undefined;}};return AutoSuggestData;}]);}(window.VGN));(function(VGN)
{'use strict';var AUTO_SUGGEST_RESULTS_COMP='AutoSuggestResult',RESULT_COUNT=0,CLASSES={PREFIX:'vgn-',TYPE:'-type',SEARCH_RESULT:'vgn-searchResult',ADDITIONAL:'vgn-additional',HIDDEN:'vgn-displayNone'},TEMPLATES={SEARCH_ICON_FUND:'<span class="vgn-searchResultIcon_fund"></span>',CLEAR_FLOAT:'<div class="vgn-clearFloat"></div>'},TYPE={FUND:'fund'},getLinkClass=function(type)
{var typeClass=type?[CLASSES.PREFIX,type,CLASSES.TYPE].join(''):'',cssClass=[CLASSES.SEARCH_RESULT,typeClass];return cssClass.join(' ');},encodeUrl=function(url)
{return url&&url.replace(/\s/ig,'%20');};VGN.ComponentLibrary().module(AUTO_SUGGEST_RESULTS_COMP,['$createElementFromString','$createElement','$node','ComponentManager','Link','EventManager','$bind','$keyCodes','$document',function($createElementFromString,$createElement,$node,ComponentManager,Link,EventManager,$bind,$keyCodes,$document)
{var AutoSuggestResult=function()
{this.rendered=false;this.componentManager=new ComponentManager();this.eventNamespace=AUTO_SUGGEST_RESULTS_COMP+RESULT_COUNT;RESULT_COUNT+=1;};AutoSuggestResult.prototype={clickFund:function(event)
{var keyCode=event.keyCode;if(keyCode===$keyCodes.ENTER&&EventManager.getTarget(event)===this.div)
{EventManager.stopPropagation(event);EventManager.preventDefault(event);this.a.click();}
else if(keyCode===$keyCodes.TAB)
{if(this.additionalLink===$document.activeElement)
{if(event.shiftKey)
{EventManager.stopPropagation(event);EventManager.preventDefault(event);}
this.div.focus();}
else if(this.div===$document.activeElement)
{EventManager.stopPropagation(event);EventManager.preventDefault(event);this.additionalLink.focus();}}},clickLink:function(event)
{if(event.keyCode===$keyCodes.ENTER)
{EventManager.preventDefault(event);this.a.click();}},populate:function(data)
{this.data=data;},render:function()
{var data=this.data,linkComponent=new Link({href:encodeUrl(data.url)}),additionalLinkComp=new Link({href:encodeUrl(data.additionalUrl),visible:!!data.additionalUrl,label:data.additionalHtml,cssClass:CLASSES.ADDITIONAL});this.componentManager.add(linkComponent);this.div=$createElement('div',{role:'option','class':getLinkClass(data.type)});this.a=linkComponent.render();if(data.type===TYPE.FUND)
{this.icon=$createElementFromString(TEMPLATES.SEARCH_ICON_FUND);this.componentManager.add(additionalLinkComp);this.additionalLink=additionalLinkComp.render();$node.append(this.a,this.icon);$node.append(this.div,this.a);this.a.innerHTML+=data.html;$node.append(this.div,this.additionalLink);$createElementFromString(TEMPLATES.CLEAR_FLOAT,{'class':!!data.additionalUrl?'':CLASSES.HIDDEN},this.div);}
else
{$node.append(this.div,this.a);this.a.innerHTML+=data.html;}
this.rendered=true;this.clickBindFunction=$bind(!!data.additionalUrl?this.clickFund:this.clickLink,this);EventManager.addEvent(this.div,'keydown',this.clickBindFunction,this.eventNamespace);},getAnchor:function()
{return this.div;},destroy:function()
{EventManager.cleanup(this.eventNamespace);this.rendered=false;this.componentManager.destroy();$node.remove(this.div);this.div=this.link=this.additionalLink=this.a=undefined;}};return AutoSuggestResult;}]);}(window.VGN));(function(VGN)
{'use strict';var MODULE_NAME='AutoSuggest',CLASSES={HIDDEN:'vgn-displayNone',CONTAINER:'vgn-autoSuggestContainer',AUTO_SUGGEST:'vgn-autoSuggest',SEARCH_ALL:'vgn-searchAll',NEWS:'vgn-news-type',RESEARCH:'vgn-research-type'},EVENTS={CLICK:'click',KEY_UP:'keyup',KEY_DOWN:'keydown',FOCUS:'focus',BLUR:'blur'},ARIA_HIDDEN='aria-hidden';VGN.ComponentLibrary().module(MODULE_NAME,['$bind','$class','$createElement','$document','EventManager','$keyCodes','$window','AutoSuggestResult','AutoSuggestData','KeystrokeManager','$contains','$node','$utils','$stringUtils',function($bind,$class,$createElement,$document,EventManager,$keyCodes,$window,AutoSuggestResult,AutoSuggestData,KeystrokeManager,$contains,$node,$utils,$stringUtils)
{var AutoSuggest=function(moduleName,submitAction,modifier)
{this.rendered=false;this.resultsData=[];this.results=[];this.isVisible=false;this.keystrokeManager=new KeystrokeManager(undefined,undefined,moduleName);this.location=moduleName;this.modifier=modifier;this.submitAction=submitAction;};AutoSuggest.prototype={populate:function(data)
{this.data=data;this.minimumCharacterSearch=this.data.minimumCharacterSearch;},getModifierData:function()
{return(this.modifier&&(this.modifier[0].checked?this.modifier[0].data:this.modifier[1].data))||{};},render:function()
{if(this.rendered===false)
{this.div=$createElement('div',{'class':CLASSES.CONTAINER+' '+CLASSES.HIDDEN,'aria-hidden':true});$createElement('div',{'class':CLASSES.AUTO_SUGGEST,role:'listbox'},this.div);this.autoSuggestData=new AutoSuggestData(this.location);this.autoSuggestData.populate(this.data,this.modifier);EventManager.subscribe(this.autoSuggestData,this.autoSuggestData.DATA_AVAILABLE+this.location,$bind(this.onResultsAvailable,this),this.location);EventManager.addEvent($document,EVENTS.CLICK,$bind(this.hide,this),this.location);this.rendered=true;}},setInputField:function(input,submitButton)
{var inputContainer=input.parentNode;this.input=input;this.submitButton=submitButton;EventManager.addEvent(this.input,EVENTS.KEY_UP,$bind(this.onInputUpdate,this),this.location);EventManager.addEvent(inputContainer,EVENTS.KEY_DOWN,$bind(this.onSearchKeyDown,this),this.location);EventManager.addEvent(this.div,EVENTS.KEY_DOWN,$bind(this.onSearchKeyDown,this),this.location);this.keystrokeManager.setListeningElement(inputContainer);this.keystrokeManager.setListeningElement(this.div);},onSearchKeyDown:function(event)
{var tabbed=$keyCodes.TAB===event.keyCode,shifted=event.shiftKey,target=EventManager.getTarget(event),toHide=(target===this.input&&tabbed&&shifted);if(toHide)
{this.hide();}
else if($keyCodes.ESC===event.keyCode)
{this.input.focus();}
else if($contains(this.div,target)&&tabbed)
{EventManager.preventDefault(event);if(shifted)
{this.input.focus();}
else
{this.submitButton.focus();}}},onInputUpdate:function(e)
{var THIS=this,term=THIS.input.value;if(term.length>=THIS.minimumCharacterSearch&&e.keyCode!==$keyCodes.ESC)
{$window.clearTimeout(THIS.keyDownTimeout);THIS.keyDownTimeout=$window.setTimeout(function()
{THIS.autoSuggestData.query(term);},250);}
else
{THIS.hide();}},onResultsAvailable:function(event)
{this.result=event.data;if(this.result)
{this.resultsData=this.result&&this.result.results;this.show();}
else
{this.hide();}},getDiv:function()
{return this.div;},show:function()
{this.showTopResults();this.setVisible();},setVisible:function()
{if(this.isVisible!==true)
{$class.remove(this.div,CLASSES.HIDDEN);$node.attribute(this.div,ARIA_HIDDEN,false);this.isVisible=true;}},hide:function()
{if(this.isVisible)
{$class.add(this.div,CLASSES.HIDDEN);$node.attribute(this.div,ARIA_HIDDEN,true);this.clearResults();this.clearResultsData();this.isVisible=false;}},maxNumResults:function()
{return Math.min(this.resultsData.length,this.data.maximumSearchResults);},clearResults:function()
{var result,length=this.results.length;while(length>0)
{result=this.results.shift();result.destroy();length=this.results.length;}},clearResultsData:function()
{var length=this.resultsData.length;while(length>0)
{this.resultsData.shift();length=this.resultsData.length;}},replaceQueryKeysAndStore:function(resultData,url,location)
{var val=url&&url.match(new RegExp('\\{\\{(.*?)\\}\\}','g')),str,key;while(val&&val.length>0)
{str=val[val.length-1];key=str.replace(new RegExp('[\\{\\{\\}\\}\']+','g'),'');resultData[location]=url=url.replace(new RegExp('\\{\\{'+key+'\\}\\}','g'),resultData[key]||('{{'+key+'}}'));val.pop();}
return resultData;},addBottomLink:function(linkTemplate,customClass,counter)
{var data,result,queryObject={},text,modifierData=this.getModifierData();queryObject[this.data.queryTerm]=this.input.value;queryObject.number=counter||'';text=$stringUtils.format(linkTemplate.text,$utils.extend(modifierData,queryObject));data=this.replaceQueryKeysAndStore({html:text,url:linkTemplate.href,query:this.input.value},linkTemplate.href,'url');data.url=$stringUtils.format(data.url,modifierData);result=this.renderResult(data);$class.add(result.getAnchor(),customClass);return result;},renderResult:function(data)
{var result=new AutoSuggestResult(this.location);result.populate(data);result.render();this.div.firstChild.appendChild(result.getAnchor());this.results.push(result);return result;},setContent:function(resultData,data)
{this.replaceQueryKeysAndStore(resultData,$stringUtils.format(data.href,this.getModifierData()),'url');this.replaceQueryKeysAndStore(resultData,data.text||resultData.term||'','html');},getSubmitAction:function()
{return $stringUtils.format(this.submitAction,this.getModifierData());},showTopResults:function()
{var i,resultData,result,resultsLength=this.maxNumResults(),resultAnchors=[this.input],linkTemplates=this.data.linkTemplates,additionalInfo,linkTemplate;this.clearResults();if(linkTemplates)
{for(i=0;i<resultsLength;i+=1)
{resultData=this.resultsData[i];$utils.extend(this.getModifierData(),resultData);resultData[this.data.queryTerm]=this.input.value;linkTemplate=typeof resultData.type==='string'&&linkTemplates[resultData.type];if(linkTemplate)
{this.setContent(resultData,linkTemplate);additionalInfo=linkTemplate.additional;if(additionalInfo&&resultData[additionalInfo.key])
{this.replaceQueryKeysAndStore(resultData,additionalInfo.href,'additionalUrl');resultData.additionalHtml=additionalInfo.text;}
result=this.renderResult(resultData);resultAnchors.push(result.getAnchor());}}
if(this.result.numberOfResearch&&linkTemplates.research)
{result=this.addBottomLink(linkTemplates.research,CLASSES.RESEARCH,this.result.numberOfResearch);resultAnchors.push(result.getAnchor());}
if(this.result.numberofNews&&linkTemplates.news)
{result=this.addBottomLink(linkTemplates.news,CLASSES.NEWS,this.result.numberofNews);resultAnchors.push(result.getAnchor());}
if(linkTemplates.all)
{result=this.addBottomLink(linkTemplates.all,CLASSES.SEARCH_ALL);resultAnchors.push(result.getAnchor());}}
this.keystrokeManager.clearItems();this.keystrokeManager.registerItems(resultAnchors,true);}};return AutoSuggest;}]);}(window.VGN));(function(VGN)
{'use strict';var MODULE_NAME='Search',ARIA_HIDDEN='aria-hidden',INPUT_MAXLENGTH=255,CLASSES={BAR:'vgn-searchBar',FORM:'vgn-searchForm',ACCESSIBILITY:'vgn-accessibleOffscreenText',INPUT:'vgn-searchInput',SEARCH_CLOSE_BUTTON:'vgn-closeBtn vgn-small',HIDDEN:'vgn-displayNone',SUBMIT_BUTTON:'vgn-searchSubmitButton'},EVENTS={CLICK:'click',MOUSE_DOWN:'mousedown',KEY_DOWN:'keydown',KEY_UP:'keyup',FOCUS:'focus',KEY_PRESS:'keypress',BLUR:'blur',MOUSE_ENTER:'mouseenter',MOUSE_LEAVE:'mouseleave',DE_ACTIVATE:'mousedown touchstart'},TEMPLATES={MODIFIER_CONTAINER:'<div class="vgn-searchModifierContainer vgn-searchModifierContainer-int" role="menu"></div>',MODIFIER_ARROW:'<div class="vgn-modifierIcon"></div>',MODIFIER_ITEM:'<div class="vgn-searchModifierItem" title="{{title}}">'+'<input id="{{id}}" class="vgn-searchModifierItemInput" role="menuitemradio" name="vgnSourceSelector" type="radio" value="{{value}}" {{checked}}>'+'<label class="vgn-searchModifierItemLabel" for="{{id}}">{{label}}</label>'+'</div>',HIDDEN_INPUT:'<input type="hidden" name="{{key}}" value="{{value}}">'},namedParamsParser=function(result,original)
{var i,length=original.length;for(i=0;i<length;i+=1)
{result[original[i].key]=original[i].value;}},flattenNamedParamsObject=function(obj)
{var result={},key;for(key in obj)
{if(obj.hasOwnProperty(key))
{if(key==='namedParams')
{namedParamsParser(result,obj[key]);}
else
{result[key]=obj[key];}}}
return result;};VGN.ComponentLibrary().module(MODULE_NAME,['$bind','$class','$node','$contains','$createElement','$createElementFromString','$browser','$stringUtils','$document','EventManager','$keyCodes','$measurements','$window','AutoSuggest','dataSource',function($bind,$class,$node,$contains,$createElement,$createElementFromString,$browser,$stringUtils,$document,EventManager,$keyCodes,$measurements,$window,AutoSuggest,dataSource)
{var Search=function(moduleName)
{this.bar=undefined;this.offscreenLabel=undefined;this.input=undefined;this.clearBtn=undefined;this.autoSuggest=undefined;this.placeholderStr='';this.rendered=false;this.emulatedPlaceholderTextEventsAttached=false;this.data=undefined;this.location=(moduleName||'search')+MODULE_NAME;},createHiddenInput=function(url,form,queryKey,queryValue)
{var tempIndex=url.indexOf('?&'),indexOfQueryParams=tempIndex===-1?url.indexOf('?'):tempIndex,offset=tempIndex===-1?1:2,params=url.substring(indexOfQueryParams+offset),queries=params.split('&'),i,length=queries.length,value,key,string;for(i=0;i<length;i+=1)
{string=queries[i].split('=');key=string[0];value=string[1];$createElementFromString(TEMPLATES.HIDDEN_INPUT,{key:key,value:value},form);}
$createElementFromString(TEMPLATES.HIDDEN_INPUT,{key:queryKey,value:queryValue},form);};Search.prototype={ON_ACTIVATION:'onActivation',ON_DEACTIVATION:'onDeActivation',populate:function()
{this.data=dataSource.getComponentData('search');},generateBar:function()
{var context=(this.location!=='searchSearch')?this.location:'defaultSearch';this.bar=$createElement('div',{'class':CLASSES.BAR});this.form=$createElement('form',{'id':'vgn-'+context+'Form','class':CLASSES.FORM,method:'GET',name:'site'+context,autocomplete:this.data.autocomplete||'off',role:'search'},this.bar);this.setAutoSuggestSearchModifier(this.data.autoSuggest&&this.data.autoSuggest.searchModifiers,context,this.form);this.inputContainer=$createElementFromString('<span class="vgn-searchInputContainer"></span>',{},this.form);this.offscreenLabel=$createElement('label',{'class':CLASSES.ACCESSIBILITY,'for':'vgn-'+context+'Input'},this.inputContainer);this.offscreenLabel.innerHTML=MODULE_NAME;this.input=$createElement('input',{'id':'vgn-'+context+'Input','class':CLASSES.INPUT,'type':'text',value:'',maxlength:INPUT_MAXLENGTH,autocomplete:'off'},this.inputContainer);this.placeholderNotSupported=this.input.attachEvent;this.clearBtn=$createElement('button',{'class':CLASSES.SEARCH_CLOSE_BUTTON+' '+CLASSES.HIDDEN,type:'reset',role:'button','aria-hidden':true,'aria-label':'Reset','tabIndex':-1,value:''},this.inputContainer);this.submitButton=$createElement('button',{'id':'vgn-'+context+'SubmitButton','class':CLASSES.SUBMIT_BUTTON,type:'submit',role:'button','aria-label':'Vanguard Search',value:''},this.form);$createElementFromString('<div class="vgn-clearFloat"></div>',{},this.form);if(this.data.autoSuggest)
{this.autoSuggest=new AutoSuggest(this.location,this.data.submit.href,this.form.vgnSourceSelector);this.autoSuggest.populate(this.data.autoSuggest);this.autoSuggest.render();this.autoSuggest.setInputField(this.input,this.submitButton);this.bar.appendChild(this.autoSuggest.getDiv());}},setAutoSuggestSearchModifier:function(modifiers,context,location)
{var i,length=modifiers&&modifiers.length,item,modifier;this.modifierContainer=$createElementFromString(TEMPLATES.MODIFIER_CONTAINER,{},length&&location);for(i=0;i<length;i+=1)
{modifier=flattenNamedParamsObject(modifiers[i]);item=$createElementFromString(TEMPLATES.MODIFIER_ITEM,{id:'vgn-'+context+'SearchModifier'+i,label:modifier.label,value:modifier.value,title:modifier.title,checked:modifier.checked?'checked':''},this.modifierContainer);item.firstChild.data=modifier;EventManager.addEvent(item.firstChild,'click',$bind(this.setPlaceHolderText,this),this.location);}
if(length)
{$createElementFromString(TEMPLATES.MODIFIER_ARROW,{},location);}},render:function()
{this.populate();if(this.data&&this.rendered===false)
{this.generateBar();EventManager.addEvent(this.clearBtn,EVENTS.MOUSE_DOWN+' '+EVENTS.KEY_DOWN,$bind(this.onClearInput,this),this.location);EventManager.addEvent(this.input,EVENTS.KEY_UP+' '+EVENTS.KEY_DOWN,$bind(this.evaluateClearBtn,this),this.location);EventManager.addEvent(this.input,EVENTS.FOCUS,$bind(this.addCustomBlurEvent,this),this.location);EventManager.addEvent(this.inputContainer,EVENTS.MOUSE_ENTER+' '+EVENTS.MOUSE_LEAVE+' '+EVENTS.BLUR,$bind(this.toggleClearButton,this),this.location);EventManager.addEvent(this.submitButton,EVENTS.KEY_DOWN,$bind(this.onSearchSubmitKeydown,this),this.location);EventManager.addEvent(this.submitButton,EVENTS.CLICK,$bind(this.onSearchSubmitEvaluation,this),this.location);EventManager.addEvent(this.form,'submit',$bind(this.submitForm,this),this.location);$window.setTimeout($bind(this.setPlaceHolderText,this),333);this.rendered=true;}
return this.bar;},submitForm:function()
{this.form.action=this.autoSuggest.getSubmitAction();createHiddenInput(this.form.action,this.form,this.data.queryTerm,this.input.value);$node.remove(this.modifierContainer);},activate:function()
{EventManager.dispatch(this.ON_ACTIVATION+this.location,this);EventManager.addEvent($document,EVENTS.DE_ACTIVATE,$bind(this.evaluateDocumentClick,this),this.location);this.input.focus();},getDelimiter:function()
{return this.data&&this.data.placeholderText&&this.data.placeholderText.delimiter;},setPlaceHolderText:function()
{var widthToTriggerShortPlaceholderText=this.getDelimiter()||200,str,bounds;if(this.data&&this.data.placeholderText)
{str=this.data.placeholderText.longText;bounds=$measurements.getElementBounds(this.input);if(bounds.width<=widthToTriggerShortPlaceholderText)
{str=this.data.placeholderText.shortText;}
this.placeholderStr=str;$node.attribute(this.input,'placeholder',str);$node.attribute(this.input,'title',str);if(this.emulatedPlaceholderTextEventsAttached!==true&&this.placeholderNotSupported)
{EventManager.addEvent(this.input,EVENTS.KEY_PRESS,$bind(this.clearInput,this,str),this.location);EventManager.addEvent(this.input,EVENTS.BLUR,$bind(this.restorePlaceholderText,this,str),this.location);EventManager.addEvent(this.input,EVENTS.CLICK+' '+EVENTS.FOCUS,$bind(this.setCaretIndex,this,0,str),this.location);this.emulatedPlaceholderTextEventsAttached=true;}
this.restorePlaceholderText(str);}
return str;},evaluateDocumentClick:function(event)
{var isWithinSearchArea=$contains(this.bar,EventManager.getTarget(event));if(!isWithinSearchArea)
{this.blurInput();}},toggleClearButton:function(event)
{if(this.input.value!==''&&this.input.value!==this.placeholderStr)
{if(event.type===EVENTS.MOUSE_ENTER)
{this.showClearBtn();}
else if($document.activeElement!==this.input)
{this.hideClearBtn();}}},addCustomBlurEvent:function()
{EventManager.addEvent($document,EVENTS.DE_ACTIVATE,$bind(this.evaluateDocumentClick,this),this.location);},setCaretIndex:function(index,placeholderText)
{var range;if(this.input.value===placeholderText)
{if(this.input.createTextRange)
{range=this.input.createTextRange();range.move('character',index);range.select();}
else if(this.input.selectionStart)
{this.input.focus();this.input.setSelectionRange(index,index);}}},showClearBtn:function()
{$class.remove(this.clearBtn,CLASSES.HIDDEN);$node.attribute(this.clearBtn,ARIA_HIDDEN,false);},hideClearBtn:function()
{$class.add(this.clearBtn,CLASSES.HIDDEN);$node.attribute(this.clearBtn,ARIA_HIDDEN,true);},blurInput:function()
{if(this.autoSuggest)
{this.autoSuggest.hide();}
this.hideClearBtn();EventManager.removeEvent($document,EVENTS.DE_ACTIVATE,$bind(this.evaluateDocumentClick,this),this.location);EventManager.dispatch(this.ON_DEACTIVATION+this.location,this);},deactivate:function()
{this.blurInput();this.setPlaceHolderText();this.input.value='';this.input.blur();},getSearchBar:function()
{return this.bar||this.render();},onClearInput:function(evt)
{var isMousedown=evt.type===EVENTS.MOUSE_DOWN,isValidClick=evt.keyCode===$keyCodes.SPACE||evt.keyCode===$keyCodes.ENTER||evt.keyCode===$keyCodes.ESC,isToBeCleared=evt.type===EVENTS.KEY_DOWN&&isValidClick;if(isMousedown||isToBeCleared)
{this.restorePlaceholderText(this.placeholderStr,true);if(this.autoSuggest)
{this.autoSuggest.hide();}
if(evt)
{EventManager.preventDefault(evt);}
this.deactivate();this.activate();}},evaluateClearBtn:function(evt)
{var placeholderText='',event=evt||$window.event,keyCode=event.keyCode,stayInInput=keyCode===$keyCodes.RIGHT_ARROW||keyCode===$keyCodes.LEFT_ARROW;if(this.data.placeholderText)
{placeholderText=this.data.placeholderText.longText;}
if(keyCode===$keyCodes.ESC)
{this.input.value='';}
else if(evt.type===EVENTS.KEY_DOWN&&stayInInput)
{EventManager.stopPropagation(evt);}
if(this.input.value!==''&&this.input.value!==placeholderText)
{this.showClearBtn();}
else
{this.hideClearBtn();}},onSearchSubmitKeydown:function(evt)
{if(evt.keyCode===$keyCodes.TAB&&!evt.shiftKey)
{this.blurInput();}
else if(evt.keyCode===$keyCodes.ENTER)
{this.onSearchSubmitEvaluation(evt);}},onSearchSubmitEvaluation:function(evt)
{var searchTerm=this.input.value.replace(/^\s+|\s+$/g,'');if(searchTerm===''||searchTerm===this.placeholderStr)
{EventManager.preventDefault(evt);}},destroy:function()
{EventManager.cleanup(this.location);this.data=this.form=this.label=this.input=this.submitButton=this.clearBtn=this.autoSuggest=undefined;this.bar.innerHTML='';},clearInput:function(placeholderText)
{if(placeholderText===this.input.value)
{this.input.value='';}},restorePlaceholderText:function(placeholderText,override)
{if(this.input&&(this.input.value===''||override===true))
{if(this.placeholderNotSupported)
{this.input.value=placeholderText||this.placeholderStr;}
else
{this.input.value='';}
this.hideClearBtn();}}};return Search;}]);}(window.VGN));(function(VGN)
{'use strict';var VERTICAL_NAV_COMP='verticalNav',ARIA_DISABLED='aria-disabled',ARIA_HAS_POPUP='aria-haspopup',TAB_INDEX='tabindex';VGN.ComponentLibrary().module(VERTICAL_NAV_COMP,['$noOp','$window','$document','$node','EventManager','$createElement','$class','Link','$utils','$keyCodes','$contains','linkTracking','webUsageProxy','dataSource','ComponentManager',function($noOp,$window,$document,$node,EventManager,$createElement,$class,Link,$utils,$keyCodes,$contains,linkTracking,webUsageProxy,dataSource,ComponentManager)
{var siloItems={},verticalNavData,utilItems={},siteList={},verticalNavContainer={},highLevelNav=$createElement('div',{'class':'vgn-highLevelNav','tabindex':-1}),utilityNav=$createElement('div',{'class':'vgn-utilityNav'}),scrim={},subMenuList={},mainMenu={},mainMenuLinks=[],activeMenuLinkIndex=-1,transitionSpeed=500,delay=100,currentOpenMenu={},currentOpenMenuLink={},closeMainMenuTimeout,closeSubMenuTimeout,getSubMenuId=$noOp,componentManager=new ComponentManager(),createLink=function(config,hasPanel)
{var linkComponent=new Link($utils.extend(config,{href:hasPanel?'':undefined}));componentManager.add(linkComponent);return linkComponent.render();},resetTabIndices=function()
{var menuElements=verticalNavContainer.getElementsByTagName('li'),i,menuLength=menuElements.length;for(i=1;i<menuLength;i+=1)
{$node.attribute(menuElements[i],TAB_INDEX,-1);}},setListFocus=function(element)
{$node.attribute(element,TAB_INDEX,0);element.focus();},addNoDisplayDelayed=function()
{$class.add(currentOpenMenu,'vgn-noDisplay');$class.add(currentOpenMenuLink,'vgn-needToBeUsed');},closeSubMenu=function()
{$class.add(currentOpenMenu,'vgn-offScreen');$class.add(currentOpenMenuLink,'vgn-needToBeUsed');closeSubMenuTimeout=setTimeout(addNoDisplayDelayed,transitionSpeed+delay);},closeSubMenuAndOpenMain=function(event)
{if(event.keyCode===$keyCodes.ENTER||event.keyCode===$keyCodes.ESC||event.keyCode===$keyCodes.LEFT_ARROW||event.type==='click')
{$class.remove(mainMenu,'vgn-noDisplay');clearTimeout(closeMainMenuTimeout);$window.setTimeout(function()
{$class.add(currentOpenMenu,'vgn-offScreen');$class.remove(mainMenu,'vgn-offScreen');},delay);closeSubMenuTimeout=setTimeout(addNoDisplayDelayed,transitionSpeed+delay);webUsageProxy.trackAction(VERTICAL_NAV_COMP+'.'+$node.attribute(currentOpenMenuLink,'id').replace(/[ &]/g,'')+'.closeSubMenu');currentOpenMenuLink.parentNode.focus();}},openMenu=function()
{$class.add(verticalNavContainer,'vgn-open');$class.add(scrim,'vgn-openScrim');$class.remove(mainMenu,'vgn-offScreen');$class.remove(mainMenu,'vgn-noDisplay');mainMenu.focus();},closeMenu=function(event)
{if(event.keyCode===$keyCodes.ESC&&currentOpenMenu.className&&!$class.has(currentOpenMenu,'vgn-offScreen'))
{closeSubMenuAndOpenMain(event);}
else if(event.keyCode===$keyCodes.ESC||(event.keyCode===$keyCodes.TAB&&!$contains(currentOpenMenu,$document.activeElement))||event.type==='click')
{$class.remove(verticalNavContainer,'vgn-open');$class.remove(scrim,'vgn-openScrim');$window.setTimeout(function()
{if($class.has(mainMenu,'vgn-offScreen')&&$class.has(mainMenu,'vgn-noDisplay'))
{$class.add(mainMenu,'vgn-offScreen');$class.add(mainMenu,'vgn-noDisplay');}
closeSubMenu();},transitionSpeed+delay);activeMenuLinkIndex=-1;resetTabIndices();}},closeMainMenu=function()
{if(!$class.has(mainMenu,'vgn-offScreen'))
{$class.add(mainMenu,'vgn-offScreen');closeMainMenuTimeout=setTimeout(function()
{$class.add(mainMenu,'vgn-noDisplay');},transitionSpeed+delay);}},stopPropagation=function(event)
{EventManager.stopPropagation(event);},openSubMenu=function(event)
{var target=EventManager.getTarget(event),subMenuId=getSubMenuId(target),subMenuToOpen;if(event.keyCode===$keyCodes.SPACE||event.keyCode===$keyCodes.RIGHT_ARROW||event.keyCode===$keyCodes.ENTER||event.type==='click')
{stopPropagation(event);subMenuToOpen=subMenuList[subMenuId].menu;if(subMenuToOpen===currentOpenMenu)
{clearTimeout(closeSubMenuTimeout);}
currentOpenMenu=subMenuToOpen;subMenuList[subMenuId].currentActiveIndex=-1;$class.remove(currentOpenMenu,'vgn-noDisplay');$class.remove(currentOpenMenuLink,'vgn-needToBeUsed');$window.setTimeout(function()
{$class.remove(currentOpenMenu,'vgn-offScreen');$class.remove(currentOpenMenuLink,'vgn-needToBeUsed');$window.setTimeout(function()
{closeMainMenu();currentOpenMenu.focus();},delay);},delay);webUsageProxy.trackAction(VERTICAL_NAV_COMP+'.'+
$node.attribute(currentOpenMenuLink,'id').replace(/[ &]/g,'')+'.openSubMenu');}},nextIndex=function(index,max,direction)
{if(direction===$keyCodes.DOWN_ARROW)
{if(index===max-1)
{index=0;}
else
{index+=1;}}
else if(direction===$keyCodes.UP_ARROW)
{if(index>0)
{index-=1;}
else
{index=max-1;}}
return index;},keyboardNavigation=function(event)
{var keyCode=event.keyCode;if(keyCode===$keyCodes.DOWN_ARROW)
{EventManager.preventDefault(event);activeMenuLinkIndex=nextIndex(activeMenuLinkIndex,mainMenuLinks.length,$keyCodes.DOWN_ARROW);setListFocus(mainMenuLinks[activeMenuLinkIndex]);}
else if(keyCode===$keyCodes.UP_ARROW)
{EventManager.preventDefault(event);activeMenuLinkIndex=nextIndex(activeMenuLinkIndex,mainMenuLinks.length,$keyCodes.UP_ARROW);setListFocus(mainMenuLinks[activeMenuLinkIndex]);}
else if(keyCode===$keyCodes.ENTER||keyCode===$keyCodes.SPACE)
{EventManager.getTarget(event).firstChild.click();}},siloKeyboardNavigation=function(event)
{var currentMenuId=$node.attribute(currentOpenMenuLink,'id'),index=subMenuList[currentMenuId].currentActiveIndex,linkList=subMenuList[currentMenuId].links,keyCode=event.keyCode,inVerticalNav=$contains(verticalNavContainer,EventManager.getTarget(event))&&keyCode===$keyCodes.TAB;if(keyCode===$keyCodes.DOWN_ARROW||(inVerticalNav&&!event.shiftKey))
{EventManager.preventDefault(event);index=nextIndex(index,linkList.length,$keyCodes.DOWN_ARROW);setListFocus(linkList[index]);subMenuList[currentMenuId].currentActiveIndex=index;}
else if(keyCode===$keyCodes.UP_ARROW||(inVerticalNav&&event.shiftKey))
{EventManager.preventDefault(event);index=nextIndex(index,linkList.length,$keyCodes.UP_ARROW);setListFocus(linkList[index]);subMenuList[currentMenuId].currentActiveIndex=index;}
else if(keyCode===$keyCodes.LEFT_ARROW)
{closeSubMenuAndOpenMain(event);}
else if(keyCode===$keyCodes.ENTER||event.keyCode===$keyCodes.SPACE)
{EventManager.getTarget(event).firstChild.click();}},attachKeyboardNavigation=function()
{EventManager.addEvent(mainMenu,'keydown',keyboardNavigation,VERTICAL_NAV_COMP);},attachSiloKeyboardNavigation=function(siloName)
{subMenuList[siloName].currentActiveIndex=-1;EventManager.addEvent(subMenuList[siloName].menu,'keydown',siloKeyboardNavigation,VERTICAL_NAV_COMP);},attachCloseMenu=function()
{EventManager.addEvent(verticalNavContainer,'click',stopPropagation,VERTICAL_NAV_COMP);EventManager.addEvent($document,'keydown',closeMenu,VERTICAL_NAV_COMP);EventManager.addEvent(scrim,'click',closeMenu,VERTICAL_NAV_COMP);},attachOpenMenu=function()
{EventManager.subscribe(null,'openVerticalNav',openMenu,VERTICAL_NAV_COMP);},attachOpenSubMenu=function(el)
{EventManager.addEvent(el,'click',openSubMenu,VERTICAL_NAV_COMP);EventManager.addEvent(el,'keydown',openSubMenu,VERTICAL_NAV_COMP);},attachCloseSubMenu=function(el)
{EventManager.addEvent(el,'click',closeSubMenuAndOpenMain,VERTICAL_NAV_COMP);EventManager.addEvent(el,'keydown',closeSubMenuAndOpenMain,VERTICAL_NAV_COMP);},openSetSitePref=function(event)
{if(event.keyCode===$keyCodes.ENTER||event.type==='click')
{closeMenu(event);EventManager.dispatch('openSetSitePreference');}},attachOpenSetSitePref=function(element)
{EventManager.addEvent(element,'click',openSetSitePref,VERTICAL_NAV_COMP);EventManager.addEvent(element,'keydown',openSetSitePref,VERTICAL_NAV_COMP);},createSiloLink=function(linkConfig,parentNode)
{linkConfig.tabindex=-1;linkConfig.parentElement=parentNode;createLink(linkConfig,linkConfig.panel);},buildHighLevelNav=function(parentNode)
{var siloIndex,siloList=$createElement('ul'),siloItem,numberOfSilos=siloItems&&siloItems.length,currentSilo;$node.append(parentNode,highLevelNav);$node.append(highLevelNav,siloList);for(siloIndex=0;siloIndex<numberOfSilos;siloIndex+=1)
{currentSilo=siloItems[siloIndex];siloItem=$createElement('li',{'role':'menuitem','tabindex':-1,'class':'vgn-verticalNavItem'},siloList);createSiloLink(currentSilo,siloItem);if(currentSilo.panel&&currentSilo.panel.length>0)
{$class.add(siloItem,'vgn-expandable');$node.attribute(siloItem,'data-subMenuId',currentSilo.id);$node.attribute(siloItem,ARIA_HAS_POPUP,true);attachOpenSubMenu(siloItem);}
mainMenuLinks[siloIndex]=siloItem;}},buildUtilityNav=function(parentNode)
{var label=(siteList&&siteList.mobileLabel)||'Vanguard Sites',name=label&&label.replace(' ',''),i,iLength,ul=$createElement('ul',{},utilityNav),li={},currentItem,linkIndex=mainMenuLinks.length;$node.append(parentNode,utilityNav);for(i=0,iLength=utilItems&&utilItems.length;i<iLength;i+=1)
{currentItem=utilItems[i];li=$createElement('li',{'role':'menuitem','class':'vgn-verticalNavItem','tabindex':-1},ul);if(currentItem.items)
{$class.add(li,'vgn-expandable');$node.attribute(li,'data-subMenuId',currentItem.id);$node.attribute(li,'aria-popup',true);attachOpenSubMenu(li);}
createLink($utils.extend(currentItem,{tabindex:-1,parentElement:li,cssClass:'',id:currentItem.id||currentItem.label.replace(' ','')}));mainMenuLinks[linkIndex]=li;linkIndex+=1;}
if(label)
{li=$createElement('li',{'class':'vgn-verticalNavItem vgn-expandable','data-subMenuId':name,'tabindex':-1,'role':'menuitem','aria-haspopup':true},ul);createLink({tabindex:-1,id:name,label:label,parentElement:li});attachOpenSubMenu(li);mainMenuLinks[linkIndex]=li;}},buildMainMenu=function(parentNode)
{mainMenu=$createElement('div',{'class':'vgn-mainMenu vgn-offScreen vgn-noDisplay','tabindex':-1});buildHighLevelNav(mainMenu);buildUtilityNav(mainMenu);attachKeyboardNavigation();$node.append(parentNode,mainMenu);},generateBackButton=function(name,label,altText)
{var div=$createElement('div',{'class':'vgn-back','tabindex':-1});createLink({tabindex:-1,alt:altText,label:label,parentElement:div});attachCloseSubMenu(div);subMenuList[name].links=[div];return div;},generateSubSilo=function(siloName,data)
{var ul=$createElement('ul',{'class':'vgn-subSilo'}),li,i=0,iLength,hasContentPages=false,hasSubOverviewPage=false,siloLinks=[],linkIndex=0;if(subMenuList[siloName].links)
{siloLinks=subMenuList[siloName].links;linkIndex=subMenuList[siloName].links.length;}
li=$createElement('li',{'class':['vgn-verticalNavItem',data.items?'vgn-heading':''].join(' '),'role':'menuitem','tabindex':-1});if(data.items)
{hasSubOverviewPage=true;if(data.disabled)
{$class.add(li,'vgn-disabled');$node.attribute(li,ARIA_DISABLED,true);}
if(data.internal)
{$class.add(li,'vgn-intOnly');}}
else
{hasSubOverviewPage=false;}
if(data.label)
{createLink($utils.extend(data,{tabindex:-1,parentElement:li}));$node.append(ul,li);siloLinks[linkIndex]=li;linkIndex+=1;}
if(data.items)
{hasContentPages=true;for(i=0,iLength=data.items.length;i<iLength;i+=1)
{li=$createElement('li',{'role':'menuitem','class':'vgn-verticalNavItem','tabindex':-1});if(!hasSubOverviewPage)
{$class.add(li,'vgn-heading');}
if(data.items[i].disabled)
{$class.add(li,'vgn-disabled');$node.attribute(li,ARIA_DISABLED,true);}
createLink($utils.extend(data.items[i],{tabindex:-1,parentElement:li}));$node.append(ul,li);siloLinks[linkIndex]=li;linkIndex+=1;}}
if(!hasContentPages)
{$class.add(ul,'vgn-subOverviewOnly');}
subMenuList[siloName].links=siloLinks;return ul;},generateSiloLinks=function(name,data)
{var div=$createElement('div',{'class':'vgn-siloLinks'}),ul=$createElement('ul'),li={},i,iLength;for(i=0,iLength=data.length;i<iLength;i+=1)
{li=$createElement('li');$node.append(li,generateSubSilo(name,data[i]));$node.append(ul,li);}
$node.append(div,ul);return div;},generateActionBar=function(actionBarData,siloName)
{var div=$createElement('div',{'class':'vgn-actionBar'}),ul=$createElement('ul'),li={},link={},i,iLength,linksIndex=subMenuList[siloName].links.length;if(actionBarData.links)
{for(i=0,iLength=actionBarData.links.length;i<iLength;i+=1)
{li=$createElement('li',{'role':'menuitem','class':'vgn-verticalNavItem','tabindex':-1});createLink({href:actionBarData.links[i].href,label:actionBarData.links[i].label,tabindex:-1,parentElement:li});$node.append(ul,li);subMenuList[siloName].links[linksIndex]=li;linksIndex+=1;}
$node.append(div,ul);}
if(actionBarData.buttons)
{for(i=0,iLength=actionBarData.buttons.length;i<iLength;i+=1)
{link=createLink({href:actionBarData.buttons[i].href,cssClass:'vgn-actionButton vgn-actionButton-'+actionBarData.buttons[i].type,tabindex:-1,label:actionBarData.buttons[i].label,parentElement:div});subMenuList[siloName].links[linksIndex]=link;linksIndex+=1;}}
return div;},buildDropDownSubMenu=function(data,parentNode)
{var label=data.mobileLabel||'Vanguard Sites',name=data.name||(label&&label.replace(' ','')),subMenu=$createElement('div',{'class':'vgn-subMenu vgn-offScreen vgn-noDisplay','tabindex':-1}),ul,siloLinks=$createElement('div',{'class':'vgn-siloLinks'}),li={},currentItem,link,i,iLength,siloLinksList=[],linkIndex=0;subMenuList[name]={};$node.append(subMenu,generateBackButton(name,label));if(subMenuList[name].links)
{siloLinksList=subMenuList[name].links;linkIndex=subMenuList[name].links.length;}
ul=$createElement('ul',{'class':'vgn-subSilo vgn-subOverviewOnly'},siloLinks);for(i=0,iLength=data.items.length;i<iLength;i+=1)
{currentItem=data.items[i];if(currentItem.separator)
{ul=$createElement('ul',{'class':'vgn-subSilo vgn-subOverviewOnly'},siloLinks);}
else
{li=$createElement('li',{'tabindex':-1,'class':'vgn-verticalNavItem'},ul);link=createLink($utils.extend(currentItem,{tabindex:-1,parentElement:li}));if(currentItem.onClick==='VGN_SSP')
{attachOpenSetSitePref(link);}
siloLinksList[linkIndex]=li;linkIndex+=1;}}
subMenuList[name].menu=subMenu;subMenuList[name].links=siloLinksList;attachSiloKeyboardNavigation(name);$node.append(subMenu,siloLinks);linkTracking(subMenu,name);$node.append(parentNode,subMenu);},buildSubMenus=function(parentNode)
{var subMenuDocFrag=$document.createDocumentFragment(),altText=verticalNavData?verticalNavData.back.altText:'Back',i,label,name,iLength,subMenu,siloPanel,currentSilo;for(i=0,iLength=siloItems&&siloItems.length;i<iLength;i+=1)
{currentSilo=siloItems[i];siloPanel=currentSilo.panel;label=currentSilo.label;name=currentSilo.id;if(siloPanel&&siloPanel.length>0)
{subMenuList[name]={};subMenu=$createElement('div',{'class':'vgn-subMenu vgn-offScreen vgn-noDisplay','tabindex':-1});$node.append(subMenu,generateBackButton(name,label,altText));$node.append(subMenu,generateSiloLinks(name,siloPanel));if(currentSilo.actionBar)
{$class.add(subMenu,'vgn-containsActionBar');$node.append(subMenu,generateActionBar(currentSilo.actionBar,name));}
$node.append(subMenuDocFrag,subMenu);subMenuList[name].menu=subMenu;attachSiloKeyboardNavigation(name);linkTracking(subMenu,name);}}
for(i=0,iLength=utilItems&&utilItems.length;i<iLength;i+=1)
{currentSilo=utilItems[i];siloPanel=currentSilo.items;if(siloPanel)
{buildDropDownSubMenu({mobileLabel:currentSilo.label,name:currentSilo.id,items:siloPanel},subMenuDocFrag);}}
$node.append(parentNode,subMenuDocFrag);},setHeightToDoc=function(div)
{if($document.compatMode==='BackCompat'&&$window.screen)
{div.style.height=$window.screen.availHeight+'px';}},populate=function()
{var sitePreference=dataSource.getComponentData('sitePreferences');siteList=sitePreference&&sitePreference.siteList;siloItems=dataSource.getComponentData('navItems');verticalNavData=dataSource.getComponentData('verticalNav');utilItems=dataSource.getComponentData('utilityItems');},render=function(element)
{populate();scrim=$createElement('div',{'class':'vgn-verticalNavScrim'});setHeightToDoc(scrim);verticalNavContainer=$createElement('div',{'class':'vgn-verticalNav','role':'menu'});if(siloItems||utilItems||siteList)
{buildMainMenu(verticalNavContainer);buildSubMenus(verticalNavContainer);if(siteList)
{buildDropDownSubMenu(siteList,verticalNavContainer);}
setHeightToDoc(verticalNavContainer);attachCloseMenu();attachOpenMenu();linkTracking(verticalNavContainer,'vgn-verticalNav');$node.append(element,scrim);$node.append(element,verticalNavContainer);}},destroy=function()
{EventManager.cleanup(VERTICAL_NAV_COMP);componentManager.destroy();$node.remove(verticalNavContainer);$node.remove(scrim);};getSubMenuId=function(element)
{var menuId,subMenuId=element&&$node.attribute(element,'id');if(subMenuId)
{currentOpenMenuLink=element;menuId=subMenuId;}
else if(element&&element.firstChild)
{menuId=getSubMenuId(element.firstChild);}
return menuId;};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var MODULE_NAME='languageToggle',LANGUAGE_CHANGE_EVENT='LANGUAGE_CHANGE_EVENT',TOGGLE_LIST_TEMPLATE='<ul class="vgn-languageToggle" role="menu"></ul>',TOGGLE_ITEM_TEMPLATE=['<li class="vgn-languageToggleItem vgn-utilityLinkItem vgn-showOnLarge" role="menuitem" aria-selected="false">','<button class="vgn-languageToggleButton" data-code="{{code}}" aria-label="{{longName}}">{{shortName}}</button>','</li>'].join(''),ARIA_SELECTED_ATTRIBUTE='aria-selected',CODE_ATTRIBUTE='data-code',SELECTED_CLASS='selected';function languageToggleModule(EventManager,$createElementFromString,dataSource,$class,$node)
{var languageToggleData,currentLanguage,toggleRootElement;function getLanguageIndex(languageCode)
{var i,iLength;for(i=0,iLength=languageToggleData.languages.length;i<iLength;i+=1)
{if(languageToggleData.languages[i].code===languageCode)
{return i;}}
return 0;}
function clearSelectedLanguage(languageCode,buttonList)
{var button=buttonList[getLanguageIndex(languageCode)];$node.attribute(button.parentNode,ARIA_SELECTED_ATTRIBUTE,false);$class.remove(button,SELECTED_CLASS);}
function setSelectedLanguage(languageCode,buttonList)
{var button=buttonList[getLanguageIndex(languageCode)];$node.attribute(button.parentNode,ARIA_SELECTED_ATTRIBUTE,true);$class.add(button,SELECTED_CLASS);}
function updateCurrentLanguage(languageCode)
{var buttons;if(currentLanguage!==languageCode)
{buttons=toggleRootElement.getElementsByTagName('button');if(buttons.length)
{clearSelectedLanguage(currentLanguage,buttons);currentLanguage=languageCode;setSelectedLanguage(languageCode,buttons);}}}
function languageToggleClick(event)
{var newLanguageCode,languageChangeEvent;if(event)
{if(event.target)
{newLanguageCode=$node.attribute(event.target,CODE_ATTRIBUTE);}
else
{newLanguageCode=$node.attribute(event.srcElement,CODE_ATTRIBUTE);}
if(currentLanguage!==newLanguageCode)
{languageChangeEvent=EventManager.createEvent(LANGUAGE_CHANGE_EVENT);languageChangeEvent.data.previousLanguage=currentLanguage;languageChangeEvent.data.language=newLanguageCode;EventManager.dispatch(languageChangeEvent);}}}
function addLanguageLineItems(element)
{var i,iLength,li;for(i=0,iLength=languageToggleData.languages.length;i<iLength;i+=1)
{li=$createElementFromString(TOGGLE_ITEM_TEMPLATE,languageToggleData.languages[i],element);EventManager.addEvent(li.children[0],'click',languageToggleClick,MODULE_NAME);}}
function getDefaultLanguage()
{var result="";if(languageToggleData.defaultLanguage)
{result=languageToggleData.defaultLanguage;}
else if(languageToggleData.languages.length)
{result=languageToggleData.languages[0].code;}
return result;}
function languageChangeEvent(event)
{if(event&&event.data&&event.data.language)
{updateCurrentLanguage(event.data.language);}}
function create()
{languageToggleData=dataSource.getComponentData(MODULE_NAME);if(languageToggleData&&languageToggleData.languages&&languageToggleData.languages.length)
{toggleRootElement=$createElementFromString(TOGGLE_LIST_TEMPLATE);addLanguageLineItems(toggleRootElement);EventManager.subscribe(null,LANGUAGE_CHANGE_EVENT,languageChangeEvent,MODULE_NAME);updateCurrentLanguage(getDefaultLanguage());}
else
{toggleRootElement=null;}
return toggleRootElement;}
function render(parentElement)
{var toggle=create();if(toggle&&parentElement)
{parentElement.appendChild(toggle);}}
function getCurrentLanguage()
{return currentLanguage;}
function destroy()
{EventManager.removeEvents(MODULE_NAME);}
return{render:render,create:create,destroy:destroy,getCurrentLanguage:getCurrentLanguage,events:{LANGUAGE_CHANGE_EVENT:LANGUAGE_CHANGE_EVENT}};}
VGN.ComponentLibrary().module(MODULE_NAME,['EventManager','$createElementFromString','dataSource','$class','$node',languageToggleModule]);}(window.VGN));(function(VGN)
{'use strict';var LINK_COMP='Link',JS='javascript',COLON=':',VOID='void(0);',SPECIAL_IE_HREF=[JS,COLON,VOID].join(''),linkCount=0,CLASSES={DISABLED:'vgn-disabled',HIDDEN:'vgn-displayNone',INTERNAL:'vgn-intOnly',INTERNAL_DISABLED:'vgn-intDisabled',LINK:'vgn-link',SELECTED:'vgn-selectedLink',SITE_PREFERENCE_LINK:'vgn-setSitePreference'},CLASS='class',SSP_CLICK='VGN_SSP',EVENTS={CLICK_TOUCH_START:'click touchstart',KEY_DOWN:'keydown',OPEN_SITE_PREFERENCE:'openSetSitePreference'},ARIA_LABEL='aria-label',ARIA_LIVE='aria-live',ARIA_DISABLED='aria-disabled',ARIA_HIDDEN='aria-hidden',TAB_INDEX='tabindex',isTrue=function(value)
{return(value===true)||(value==='true');},isNotFalse=function(value)
{return(value!==false)&&(value!=='false');},isDefined=function(item)
{return item!==undefined;},setConfigDefaults=function(config)
{config.separator=isTrue(config.separator);config.disabled=isTrue(config.disabled);config.internal=isTrue(config.internal);config.visible=isNotFalse(config.visible);},setId=function(config,linkConfig)
{var id=config.id;if(id)
{linkConfig.id=id;}},setCustomClass=function(config,classList)
{var cssClass=config.cssClass;if(cssClass)
{classList.push(cssClass);}},setVisibleClass=function(config,classList)
{if(config.visible===false)
{classList.push(CLASSES.HIDDEN);}},setInternalAndDisabledClasses=function(config,classList)
{if(!config.suppressDefaultClasses)
{if(config.disabled===true)
{if(config.internal===true)
{classList.push(CLASSES.INTERNAL_DISABLED);}
else
{classList.push(CLASSES.DISABLED);}}
else if(config.internal===true)
{classList.push(CLASSES.INTERNAL);}}},setSitePreferenceClass=function(config,classList)
{if(config.onClick===SSP_CLICK)
{classList.push(CLASSES.SITE_PREFERENCE_LINK);}},setClass=function(config,linkConfig)
{var classList=config.suppressDefaultClasses?[]:[CLASSES.LINK];setCustomClass(config,classList);setVisibleClass(config,classList);setInternalAndDisabledClasses(config,classList);setSitePreferenceClass(config,classList);linkConfig[CLASS]=classList.join(' ');},setAriaHidden=function(config,linkConfig)
{linkConfig[ARIA_HIDDEN]=!config.visible;},setAriaDisabled=function(config,linkConfig)
{linkConfig[ARIA_DISABLED]=config.disabled;},setAriaRole=function(config,linkConfig)
{var ariaRole=config.role;if(ariaRole)
{linkConfig.role=ariaRole;}},setAriaLabel=function(config,linkConfig)
{var ariaLabel=config.ariaLabel;if(ariaLabel)
{linkConfig[ARIA_LABEL]=ariaLabel;}},setAriaLive=function(config,linkConfig)
{var ariaLive=config.ariaLive;if(ariaLive)
{linkConfig[ARIA_LIVE]=ariaLive;}},setAria=function(config,linkConfig)
{setAriaHidden(config,linkConfig);setAriaDisabled(config,linkConfig);setAriaRole(config,linkConfig);setAriaLabel(config,linkConfig);setAriaLive(config,linkConfig);},setHref=function(config,linkConfig,isIe7orLess)
{var href=config.href;if(!href&&isIe7orLess)
{href=SPECIAL_IE_HREF;}
if(href)
{linkConfig.href=href;}},setTarget=function(config,linkConfig)
{var target=config.target;if(target)
{linkConfig.target=target;}},setRel=function(config,linkConfig)
{var rel=config.rel;if(rel)
{linkConfig.rel=rel;}},setTabIndex=function(config,linkConfig)
{var tabindex=config.tabindex;if(isDefined(tabindex))
{linkConfig.tabindex=tabindex;}
else if(!isDefined(config.href))
{config.tabindex=0;linkConfig.tabindex=0;}
else
{config.tabindex='';}},setTitle=function(config,linkConfig)
{var title=config.title;if(isDefined(title))
{linkConfig.title=title;}},getLinkConfig=function(config,isIe7orLess)
{var linkConfig={};setId(config,linkConfig);setHref(config,linkConfig,isIe7orLess);setTarget(config,linkConfig);setRel(config,linkConfig);setClass(config,linkConfig);setAria(config,linkConfig);setTabIndex(config,linkConfig);setTitle(config,linkConfig);return linkConfig;},setInnerHtml=function(element,config)
{var label=config.label;if(label)
{element.innerHTML=label;}};VGN.ComponentLibrary().module(LINK_COMP,['$createElement','$window','$browser','$node','$class','$utils','$keyCodes','EventManager',function($createElement,$window,$browser,$node,$class,$utils,$keyCodes,EventManager)
{var Link=function(config)
{var THIS=this,id,groupId;config=config||{};setConfigDefaults(config);id=config.id;if(id)
{THIS.id=id;}
groupId=config.groupId;if(groupId)
{THIS.groupId=groupId;}
linkCount+=1;THIS.eventNamespace=LINK_COMP+linkCount;THIS.suppressDefaultClasses=config.suppressDefaultClasses;THIS.linkConfig=getLinkConfig(config,$browser.isIe7orLess());THIS.originalTabIndex=config.tabindex;THIS.compConfig=config;},openSetSitePreferences=function()
{EventManager.dispatch(EVENTS.OPEN_SITE_PREFERENCE);};Link.prototype={updateTabIndex:function()
{var THIS=this,newTabIndex;if(THIS.isDisabled)
{newTabIndex=-1;}
else
{newTabIndex=THIS.originalTabIndex;}
$node.attribute(THIS.element,TAB_INDEX,newTabIndex);},toggleDisabledClass:function(isDisabled)
{var THIS=this,element,isInternal;if(!THIS.suppressDefaultClasses)
{element=THIS.element;isInternal=$class.has(element,CLASSES.INTERNAL)||$class.has(element,CLASSES.INTERNAL_DISABLED);if(isInternal)
{$class.toggle(element,CLASSES.INTERNAL_DISABLED,isDisabled);$class.toggle(element,CLASSES.INTERNAL,!isDisabled);}
else
{$class.toggle(element,CLASSES.DISABLED,isDisabled);}}},setSelected:function(isSelected)
{var THIS=this;if(isSelected!==THIS.isSelected)
{THIS.isSelected=isSelected;$class.toggle(THIS.element,CLASSES.SELECTED,isSelected);}},setDisabled:function(isDisabled)
{var THIS=this,element;if(isDisabled!==THIS.isDisabled)
{element=THIS.element;THIS.isDisabled=isDisabled;THIS.updateTabIndex();$node.attribute(element,ARIA_DISABLED,isDisabled);THIS.toggleDisabledClass(isDisabled);}},onClick:function(event,clickFunction)
{var THIS=this;if(THIS.isDisabled)
{EventManager.preventDefault(event);return false;}
clickFunction(event);},onKeyDown:function(event,clickFunction)
{var THIS=this;if(event.keyCode===$keyCodes.ENTER)
{THIS.onClick(event,clickFunction);}},addClickEventListener:function(functionToCall)
{var THIS=this;EventManager.addEvent(THIS.element,EVENTS.CLICK_TOUCH_START,function(event)
{THIS.onClick(event,functionToCall);},THIS.eventNamespace);},addKeyDownEventListener:function(functionToCall)
{var THIS=this;EventManager.addEvent(THIS.element,EVENTS.KEY_DOWN,function(event)
{THIS.onKeyDown(event,functionToCall);},THIS.eventNamespace);},addClickEvent:function(eventFunction)
{var THIS=this,functionToCall;if(eventFunction===SSP_CLICK)
{functionToCall=openSetSitePreferences;}
else
{functionToCall=$utils.getFunction(eventFunction);}
if(isDefined(functionToCall))
{THIS.addClickEventListener(functionToCall);THIS.addKeyDownEventListener(functionToCall);}},render:function()
{var THIS=this;THIS.element=$createElement('a',THIS.linkConfig);THIS.setDisabled(THIS.compConfig.disabled);THIS.setSelected(THIS.compConfig.selected);THIS.addClickEvent(THIS.compConfig.onClick);setInnerHtml(THIS.element,THIS.compConfig);$node.append(THIS.compConfig.parentElement,THIS.element);return THIS.element;},destroy:function()
{var THIS=this;EventManager.cleanup(THIS.eventNamespace);$node.remove(THIS.element);THIS=null;}};return Link;}]);}(window.VGN));(function(VGN)
{'use strict';var CLASSES={DROP_DOWN_LINK:'vgn-dropDownLink',DROP_DOWN_MENU_OPEN:'vgn-dropDownMenuOpen',DROP_LEADER_VISIBLE:'vgn-dropDownMenuLeaderVisible'},TEMPLATES={DROP_DOWN_MENU:'<ul class="vgn-dropDownMenu" role="menu" aria-hidden="true"></ul>',DROP_DOWN_ITEM:'<li class="vgn-dropDownMenuItem" role="menuitem"></li>',DROP_DOWN_SEPARATOR:'<li class="vgn-dropDownSeparator" role="separator" tabindex="-1">&#160;</li>',SITE_PREFERENCE_ICON:'<span class="vgn-preferredSiteIcon" aria-label="{{ariaLabel}}"></span>',DROP_DOWN_LEADER:'<div class="vgn-dropDownMenuLeader"></div>'},EVENTS={CLICK_TOUCH_START:'click touchstart',KEY_DOWN:'keydown',OPEN_SITE_PREFERENCE:'openSetSitePreference',UPDATE_SITE_PREFERENCE:'vgnUpdateSitePreference',LINK_DROP_DOWN_OPEN:'linkDropDownOpen',RESIZE:'resize'},ARIA_HIDDEN='aria-hidden',LINK_DROP_DOWN='LinkDropDown',linkDropDownCount=0;VGN.ComponentLibrary().module(LINK_DROP_DOWN,['$window','$document','$keyCodes','$createElementFromString','$class','$node','EventManager','KeystrokeManager','Link','ComponentManager',function($window,$document,$keyCodes,$createElementFromString,$class,$node,EventManager,KeystrokeManager,Link,ComponentManager)
{var LinkDropDown=function(config)
{linkDropDownCount+=1;this.eventNamespace=LINK_DROP_DOWN+linkDropDownCount;this.linkItemArray=[];this.componentManager=new ComponentManager();this.list=config.list;this.trigger=config.trigger;this.dropDownParentElement=config.wrapper;this.dropDownParentData=config.parentCompData;this.linkDropDownMenu={};this.isSiteList=config.isSiteList;},ENTER_KEY=$keyCodes.ENTER,SPACE_KEY=$keyCodes.SPACE,ESCAPE_KEY=$keyCodes.ESC,TAB_KEY=$keyCodes.TAB;LinkDropDown.prototype={updateSitePreference:function(event,data)
{var THIS=this,newSite=data.newSite,oldSite=data.oldSite,links,numLinks,currentLink,currentLinkId,index;if(newSite!==oldSite)
{links=THIS.linkItemArray;numLinks=links.length;for(index=0;index<numLinks;index+=1)
{currentLink=links[index];currentLinkId=currentLink.id;if(newSite===currentLinkId)
{THIS.dropDownParentData.preferredSite=newSite;THIS.createSitePreferenceIcon({id:currentLinkId},currentLink);}
else if(oldSite===currentLinkId)
{$node.remove(currentLink.vgnSspIcon);currentLink.vgnSspIcon=undefined;}}
THIS.linkDropDownMenu.style.width='';}},createSitePreferenceIcon:function(link,parentNode)
{var THIS=this,linkId=link.id,sspIcon;if((linkId!==undefined)&&THIS.dropDownParentData&&THIS.dropDownParentData.preferredSite===linkId)
{sspIcon=$createElementFromString(TEMPLATES.SITE_PREFERENCE_ICON,{ariaLabel:THIS.dropDownParentData.preferredSiteAltText},parentNode);parentNode.vgnSspIcon=sspIcon;}},addDropDownKeyStrokeListener:function()
{var THIS=this,keystrokeManager=new KeystrokeManager(THIS.linkItemArray,true,THIS.eventNamespace);keystrokeManager.setListeningElement(THIS.dropDownParentElement);},addMenuOpenClass:function(element,leader)
{$class.add(element,CLASSES.DROP_DOWN_MENU_OPEN);$class.add(leader,CLASSES.DROP_LEADER_VISIBLE);$node.attribute(element,ARIA_HIDDEN,false);},removeMenuOpenClass:function(element,leader)
{$class.remove(element,CLASSES.DROP_DOWN_MENU_OPEN);$class.remove(leader,CLASSES.DROP_LEADER_VISIBLE);$node.attribute(element,ARIA_HIDDEN,true);},focusFirstItemLink:function(element)
{var firstItem=element.childNodes[0],firstAnchor=firstItem?firstItem.childNodes[0]:false;if(firstAnchor)
{firstAnchor.focus();}},openDropDownMenu:function(event)
{var THIS=this,dropDown,leader;if(!THIS.isOpen)
{EventManager.dispatch(EVENTS.LINK_DROP_DOWN_OPEN,null,{event:event});EventManager.stopPropagation(event);dropDown=event.vgnDropDown;leader=event.vgnDropDownLeader;$node.autoPosition({element:dropDown,target:event.vgnDropDownLabel,indicator:leader,indicatorOffset:2,setWidth:true});THIS.addMenuOpenClass(dropDown,leader);THIS.focusFirstItemLink(dropDown);THIS.isOpen=true;}},closeDropDownMenu:function(event)
{var THIS=this,dropDown=event.vgnDropDown,dropDownLabel=event.vgnDropDownLabel,leader=event.vgnDropDownLeader;if(THIS.isOpen)
{THIS.removeMenuOpenClass(dropDown,leader);if(dropDownLabel)
{dropDownLabel.focus();}
THIS.isOpen=false;}},closeOpenMenus:function(event,data)
{var THIS=this,currentMenu=event.vgnDropDown,openedMenu=data.event.vgnDropDown;if(currentMenu!==openedMenu)
{THIS.closeDropDownMenu(event);}},handleKeyDown:function(event)
{var THIS=this,keyCode=event.keyCode;if(keyCode===ENTER_KEY||keyCode===SPACE_KEY)
{EventManager.preventDefault(event);THIS.openDropDownMenu(event);}
else if(keyCode===ESCAPE_KEY||keyCode===TAB_KEY)
{THIS.closeDropDownMenu(event);}},addDropDownEventBinding:function(dropDownLabel,dropDownMenu,dropDownLeader)
{var THIS=this,addDropDownToEvent=function(event)
{event.vgnDropDown=dropDownMenu;event.vgnDropDownLabel=dropDownLabel;event.vgnDropDownLeader=dropDownLeader;},closeMenu=function(event)
{addDropDownToEvent(event);THIS.closeDropDownMenu(event);},onKeyDown=function(event)
{addDropDownToEvent(event);THIS.handleKeyDown(event);};EventManager.addEvent(dropDownLabel,EVENTS.KEY_DOWN,function(event)
{onKeyDown(event);},THIS.eventNamespace);EventManager.addEvent(dropDownMenu,EVENTS.KEY_DOWN,function(event)
{if(event.keyCode===ESCAPE_KEY)
{onKeyDown(event);}},THIS.eventNamespace);EventManager.addEvent(dropDownMenu,EVENTS.CLICK_TOUCH_START,function(event)
{EventManager.stopPropagation(event);},THIS.eventNamespace);EventManager.addEvent(dropDownLabel,EVENTS.CLICK_TOUCH_START,function(event)
{EventManager.preventDefault(event);addDropDownToEvent(event);THIS.openDropDownMenu(event);},THIS.eventNamespace);EventManager.addEvent($document,EVENTS.CLICK_TOUCH_START,closeMenu,THIS.eventNamespace);EventManager.addEvent($window,EVENTS.RESIZE,closeMenu,THIS.eventNamespace);EventManager.subscribe(null,EVENTS.OPEN_SITE_PREFERENCE,closeMenu,THIS.eventNamespace);EventManager.subscribe(null,EVENTS.LINK_DROP_DOWN_OPEN,function(event,data)
{addDropDownToEvent(event);THIS.closeOpenMenus(event,data);},THIS.eventNamespace);if(THIS.isSiteList===true)
{EventManager.subscribe(null,EVENTS.UPDATE_SITE_PREFERENCE,function(event,data)
{THIS.updateSitePreference(event,data);},THIS.eventNamespace);}},addLink:function(linkInfo,parentItem)
{var THIS=this,linkComponent,linkElement;linkInfo.cssClass=CLASSES.DROP_DOWN_LINK;linkInfo.parentElement=parentItem;linkComponent=new Link(linkInfo);THIS.componentManager.add(linkComponent);linkElement=linkComponent.render();THIS.createSitePreferenceIcon(linkInfo,linkElement);THIS.linkItemArray.push(linkElement);},addItem:function(itemInfo,parentMenu)
{var THIS=this,item;if(itemInfo.separator===true)
{item=$createElementFromString(TEMPLATES.DROP_DOWN_SEPARATOR);}
else
{item=$createElementFromString(TEMPLATES.DROP_DOWN_ITEM);THIS.addLink(itemInfo,item);}
$node.append(parentMenu,item);},createListMembers:function(itemList,parentMenu)
{var THIS=this,numberOfItems=itemList?itemList.length:{},itemIndex;for(itemIndex=0;itemIndex<numberOfItems;itemIndex+=1)
{THIS.addItem(itemList[itemIndex],parentMenu);}
THIS.addDropDownKeyStrokeListener();},render:function()
{var THIS=this;THIS.isOpen=false;THIS.linkDropDownMenu=$createElementFromString(TEMPLATES.DROP_DOWN_MENU);THIS.linkDropDownMenuLeader=$createElementFromString(TEMPLATES.DROP_DOWN_LEADER);THIS.createListMembers(THIS.list,THIS.linkDropDownMenu);THIS.addDropDownEventBinding(THIS.trigger,THIS.linkDropDownMenu,THIS.linkDropDownMenuLeader);$node.append(THIS.dropDownParentElement,THIS.linkDropDownMenu);$node.append(THIS.dropDownParentElement,THIS.linkDropDownMenuLeader);},destroy:function()
{var THIS=this;EventManager.cleanup(THIS.eventNamespace);THIS.componentManager.destroy();$node.remove(THIS.linkDropDownMenu);THIS=null;}};return LinkDropDown;}]);}(window.VGN));(function(VGN)
{'use strict';var UTILITY_ITEMS_COMP='utilityItems',CLASSES={LOG_ON_OFF:'vgn-logOnOff',SHOW_ON_LARGE:'vgn-showOnLarge',DROP_DOWN_CONTAINER:'vgn-dropDownContainer',DROP_DOWN_LABEL:'vgn-utilityLink vgn-dropDownLabel vgn-arrow',UTILITY_LINK:'vgn-utilityLink',UTILITY_LINK_ITEM:'vgn-utilityLinkItem'},TEMPLATES={UTILITY_LINK_LIST:'<ul class="vgn-utilityLinks"></ul>',UTILITY_ITEM:'<li class="{{cssClass}}" aria-haspopup="{{hasPopup}}"></li>',ARROW_ELEMENT:'<span class="vgn-arrowIcon"></span>'};VGN.ComponentLibrary().module(UTILITY_ITEMS_COMP,['$createElementFromString','$node','$browser','dataSource','LinkDropDown','Link','ComponentManager',function($createElementFromString,$node,$browser,dataSource,LinkDropDown,Link,ComponentManager)
{var utilityItemsElement,componentManager=new ComponentManager(),renderLinkComponent=function(linkConfig)
{var linkComponent=new Link(linkConfig);componentManager.add(linkComponent);return linkComponent.render();},createLink=function(linkConfig,parentNode)
{linkConfig.cssClass=CLASSES.UTILITY_LINK;linkConfig.parentElement=parentNode;return renderLinkComponent(linkConfig);},createDropDownLabel=function(linkConfig,parentNode)
{var linkElement;linkConfig.cssClass=CLASSES.DROP_DOWN_LABEL;linkConfig.tabindex=0;linkConfig.parentElement=parentNode;linkElement=renderLinkComponent(linkConfig);if($browser.isIe7orLess())
{$createElementFromString(TEMPLATES.ARROW_ELEMENT,{},linkElement);}
return linkElement;},createUtilityLink=function(link,parentNode)
{if(link.items)
{return createDropDownLabel(link,parentNode);}
return createLink(link,parentNode);},getUtilityLinkItemClass=function(link)
{var cssClass=[CLASSES.UTILITY_LINK_ITEM];if(link.logOnOff)
{cssClass.push(CLASSES.LOG_ON_OFF);}
else
{cssClass.push(CLASSES.SHOW_ON_LARGE);}
if(link.items)
{cssClass.push(CLASSES.DROP_DOWN_CONTAINER);}
return cssClass.join(' ');},createUtilityLinkItem=function(link)
{return $createElementFromString(TEMPLATES.UTILITY_ITEM,{cssClass:getUtilityLinkItemClass(link),hasPopup:link.items?true:false});},render=function(parentElement)
{var utilityLinkData=dataSource.getComponentData(UTILITY_ITEMS_COMP)||{},numberOfLinks=utilityLinkData.length||0,listItem=null,itemAnchor=null,link={},linkIndex=0,dropDown;if(numberOfLinks>0)
{utilityItemsElement=$createElementFromString(TEMPLATES.UTILITY_LINK_LIST);for(linkIndex;linkIndex<numberOfLinks;linkIndex+=1)
{link=utilityLinkData[linkIndex];listItem=createUtilityLinkItem(link);itemAnchor=createUtilityLink(link,listItem);if(link.items)
{dropDown=new LinkDropDown({list:link.items,parentCompData:utilityLinkData,trigger:itemAnchor,wrapper:listItem});componentManager.add(dropDown);dropDown.render();}
$node.append(utilityItemsElement,listItem);}
$node.append(parentElement,utilityItemsElement);}},destroy=function()
{componentManager.destroy();$node.remove(utilityItemsElement);utilityItemsElement=null;};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var UTILITY_BAR_COMP='utilityBar',UTILITY_BAR_CLASS='vgn-utilityBar',UTILITY_BAR_SELECTOR='.'+UTILITY_BAR_CLASS,TEMPLATES={CLEAR_FLOAT:'<div class="vgn-clearFloat"></div>',UTILITY_BAR:['<div class="',UTILITY_BAR_CLASS,'"></div>'].join(''),UTILITY_BAR_CONTAINER:'<div class="vgn-container"></div>'};VGN.ComponentLibrary().module(UTILITY_BAR_COMP,['$createElementFromString','$node','$select','linkTracking','utilityItems','siteListMenu','languageToggle','shoppingCart',function($createElementFromString,$node,$select,linkTracking,utilityItems,siteListMenu,languageToggle,shoppingCart)
{var utilityBarElement,getUtilityBar=function(parentNode)
{utilityBarElement=$select(UTILITY_BAR_SELECTOR,parentNode)[0]||$createElementFromString(TEMPLATES.UTILITY_BAR,{},parentNode);},render=function(element)
{var containerDiv=$createElementFromString(TEMPLATES.UTILITY_BAR_CONTAINER);getUtilityBar(element);languageToggle.render(containerDiv);siteListMenu.render(containerDiv);utilityItems.render(containerDiv);shoppingCart.render(containerDiv);$node.append(containerDiv,$createElementFromString(TEMPLATES.CLEAR_FLOAT));$node.append(utilityBarElement,containerDiv);linkTracking(utilityBarElement,UTILITY_BAR_COMP);},destroy=function()
{languageToggle.destroy();siteListMenu.destroy();utilityItems.destroy();shoppingCart.destroy();$node.remove(utilityBarElement);utilityBarElement=null;};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var MODULE_NAME='vanguardPromises',LINK_TRACKING_ID='promises',PROMISES_DATA='promises',SOCIAL_DATA='social',CLASSES={PREFIX:'vgn-',SOCIAL:'vgn-socialIcon'},TEMPLATES={LIST:'<ul></ul>',LIST_ITEM:'<li></li>',LINK_ICON:'<span class="vgn-linkIcon"></span>',PROMISE:'<p class="vgn-promise">{{promise}}</p>',PROMISES:'<div class="vgn-vanguardPromises"></div>',PROMISES_CONTAINER:'<div class="vgn-promisesContainer vgn-isCenterAligned"></div>',PROMISES_FOOTER:'<div class="vgn-promisesFooter"></div>',PROMISES_REGION:'<div class="vgn-promisesRegion"></div>',SOCIAL:'<div class="vgn-socialMedia"></div>',INTRO:'<p>{{intro}}</p>',REGISTERED:'<sup>{{registeredSymbol}}</sup>'};VGN.ComponentLibrary().module(MODULE_NAME,['$createElementFromString','$node','$stringUtils','linkTracking','dataSource','ComponentManager','Link',function($createElementFromString,$node,$stringUtils,linkTracking,dataSource,ComponentManager,Link)
{var promisesData,socialData,promisesContainer,promisesFooter,componentManager=new ComponentManager(),createLink=function(config)
{var linkComponent=new Link(config);componentManager.add(linkComponent);return linkComponent.render();},getSocialMediaClass=function(type)
{var cssClass=[CLASSES.SOCIAL];cssClass.push(CLASSES.PREFIX+type);return cssClass.join(' ');},buildLi=function(linkData)
{var li;if(linkData&&linkData.type&&linkData.label&&linkData.href)
{li=$createElementFromString(TEMPLATES.LIST_ITEM);linkData.cssClass=getSocialMediaClass(linkData.type);linkData.parentElement=li;createLink(linkData);}
return li;},buildUl=function(startPoint,endPoint)
{var ul=$createElementFromString(TEMPLATES.LIST),i;for(i=startPoint;i<=endPoint;i+=1)
{if(socialData.links&&socialData.links[i])
{$node.append(ul,buildLi(socialData.links[i]));}}
return ul;},buildSocialMedia=function()
{var socialMedia=$createElementFromString(TEMPLATES.SOCIAL),nLinks=socialData.links.length,nHalfLinks=Math.ceil(nLinks/2)-1,intro,ulLeft,ulRight;if(nLinks>0)
{ulLeft=buildUl(0,nHalfLinks);}
if(nHalfLinks+1<=nLinks-1)
{ulRight=buildUl(nHalfLinks+1,nLinks-1);}
if(socialData.registeredSymbol&&socialData.intro)
{intro=$createElementFromString(TEMPLATES.INTRO,socialData);$createElementFromString(TEMPLATES.REGISTERED,socialData,intro);$node.append(socialMedia,intro);}
$node.append(socialMedia,ulLeft);$node.append(socialMedia,ulRight);return socialMedia;},createPromisesLink=function()
{var linkData=promisesData.link,link;linkData.cssClass='vgn-promises';linkData.target='_blank';link=createLink(linkData);$createElementFromString(TEMPLATES.LINK_ICON,{},link);return link;},buildVanguardPromises=function()
{var vanguardPromises=$createElementFromString(TEMPLATES.PROMISES);$createElementFromString(TEMPLATES.INTRO,promisesData,vanguardPromises);$createElementFromString(TEMPLATES.PROMISE,promisesData,vanguardPromises);$node.append(vanguardPromises,createPromisesLink());return vanguardPromises;},buildPromisesRegion=function()
{var promisesRegion=$createElementFromString(TEMPLATES.PROMISES_REGION);if(promisesData.promise)
{$node.append(promisesRegion,buildVanguardPromises());}
if(socialData.links)
{$node.append(promisesRegion,buildSocialMedia());}
return promisesRegion;},buildPromisesContainer=function()
{promisesContainer=$createElementFromString(TEMPLATES.PROMISES_CONTAINER);$node.append(promisesContainer,buildPromisesRegion());return promisesContainer;},buildPromisesFooter=function()
{promisesFooter=$createElementFromString(TEMPLATES.PROMISES_FOOTER);$node.append(promisesFooter,buildPromisesContainer());linkTracking(promisesFooter,LINK_TRACKING_ID);return promisesFooter;},render=function(element)
{promisesData=dataSource.getComponentData(PROMISES_DATA);socialData=dataSource.getComponentData(SOCIAL_DATA);if(promisesData&&socialData)
{$node.append(element,buildPromisesFooter());}},destroy=function()
{componentManager.destroy();$node.remove(promisesFooter);promisesData=socialData=promisesContainer=promisesFooter=null;};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var MODULE_NAME='feedbackLink';VGN.ComponentLibrary().module(MODULE_NAME,['$window','$document','EventManager','$cookie','$node','ComponentManager','Link',function($window,$document,EventManager,$cookie,$node,ComponentManager,Link)
{var pageLoadTime=new Date().getTime(),componentManager=new ComponentManager(),feedbackLinkData={},feedbackLink,openFeedbackForm=function(event)
{var referer=encodeURIComponent($window.location.href),prev=encodeURIComponent($document.referrer),tleaf_cookie=$cookie.get('TLTSID')+'|',url=feedbackLinkData.feedback?feedbackLinkData.feedback.href:feedbackLinkData.href,clickTime=new Date().getTime();EventManager.preventDefault(event);url+='?time1='+pageLoadTime+'&time2='+clickTime+'&prev='+prev+'&referer='+referer+'&custom_var='+tleaf_cookie;$window.open(url,'comments','menubar=no, toolbar=no, scrollbars=no, titlebar=no, resizable=yes, copyhistory=yes, width=540, height=250');},render=function(data,parentNode)
{var linkComponent;feedbackLinkData=data;if(feedbackLinkData)
{feedbackLinkData.parentElement=parentNode;linkComponent=new Link(feedbackLinkData);componentManager.add(linkComponent);feedbackLink=linkComponent.render();linkComponent.addClickEvent(openFeedbackForm);}
return feedbackLink;},destroy=function()
{EventManager.cleanup(MODULE_NAME);componentManager.destroy();};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var SUPER_FOOTER_COMP='superFooter',TEMPLATES={COLUMN:'<div class="vgn-column"></div>',COLUMNS:'<div class="vgn-columns-{{columnNumber}}"></div>',COLUMN_GROUP:'<div class="vgn-column-group-{{groupNumber}}"></div>',HEADING:'<span class="vgn-heading"></span>',LIST_MENU:'<ul role="menu"></ul>',LIST_MENU_ITEM:'<ul role="menuitem"></ul>',LIST_ITEM:'<li role="menuitem"></li>',NAVIGATION:'<div class="{{cssClass}}"></div>',SUPER_FOOTER:'<div class="vgn-superFooter vgn-isCenterAligned"></div>',SUPER_FOOTER_CONTAINER:'<div class="vgn-superFooterContainer vgn-isCenterAligned"></div>',SUPER_FOOTER_REGION:'<div class="vgn-superFooterRegion"></div>'};VGN.ComponentLibrary().module(SUPER_FOOTER_COMP,['$createElementFromString','$node','$stringUtils','KeystrokeManager','linkTracking','dataSource','ComponentManager','Link',function($createElementFromString,$node,$stringUtils,KeystrokeManager,linkTracking,dataSource,ComponentManager,Link)
{var superFooterData,superFooter,linkItems=[],superFooterContainer,componentManager=new ComponentManager(),createLink=function(config)
{var linkComponent=new Link(config);componentManager.add(linkComponent);return linkComponent.render();},buildLi=function(linkData)
{var listItem;if(linkData)
{listItem=$createElementFromString(TEMPLATES.LIST_ITEM);linkData.parentElement=listItem;linkItems.push(createLink(linkData));return listItem;}},buildUl=function(linkListsData)
{var linkLists=linkListsData,list=$createElementFromString(TEMPLATES.LIST_MENU),currentItem,currentSubItem,currentSubOverview,currentContentPages,currentContentPageItem,i=0,j=0,k=0;if(linkLists!=='undefined'&&linkLists)
{for(i=0;i<linkLists.length;i+=1)
{currentItem=linkLists[i];for(j=0;j<currentItem.length;j+=1)
{currentSubItem=currentItem[j];currentSubOverview=currentSubItem.subOverview;if(currentSubOverview&&!currentSubOverview.overview&&!currentSubOverview.demote)
{$node.append(list,buildLi(currentSubOverview));}
currentContentPages=currentSubItem.contentPages;if(currentContentPages)
{for(k=0;k<currentContentPages.length;k+=1)
{currentContentPageItem=currentContentPages[k];if(currentContentPageItem.promote)
{$node.append(list,buildLi(currentContentPageItem));}}}}}}
return list;},buildColumn=function(siloData)
{var column=$createElementFromString(TEMPLATES.COLUMN),list=buildUl(siloData.linkLists);$node.append(column,list);return column;},buildHeading=function(siloData)
{var heading=$createElementFromString(TEMPLATES.HEADING);siloData.label=siloData.name;siloData.parentElement=heading;linkItems.push(createLink(siloData));return heading;},breakLongColumn=function(longColumn)
{var shortColumns=[],list=[],breakIndex=8,i=0,j=0;if(longColumn)
{for(i=0;i<2;i+=1)
{list[i]=$createElementFromString(TEMPLATES.LIST_MENU_ITEM);shortColumns[i]=$createElementFromString(TEMPLATES.COLUMN);for(j=0;j<breakIndex;j+=1)
{if(longColumn.firstChild&&longColumn.firstChild.children[0])
{$node.append(list[i],longColumn.firstChild.children[0]);}}
$node.append(shortColumns[i],list[i]);}}
return shortColumns;},getNavClass=function(isLast,isTwoColumn)
{var cssClasses=['vgn-navigation'];if(isLast)
{cssClasses.push('last');}
if(isTwoColumn)
{cssClasses.push('vgn-two-column-navigation');}
return cssClasses.join(' ');},buildNavElement=function(isLast,isTwoColumn)
{return $createElementFromString(TEMPLATES.NAVIGATION,{cssClass:getNavClass(isLast,isTwoColumn)});},buildNavigation=function(siloData,isLastNavigationGroup)
{var silo=siloData,navigation=buildNavElement(isLastNavigationGroup,false),heading=buildHeading(silo),column=buildColumn(silo),columns=[];$node.append(navigation,heading);if(column&&column.firstChild&&column.firstChild.children.length>8)
{columns=breakLongColumn(column);navigation=buildNavElement(false,true);$node.append(navigation,heading);if(columns)
{$node.append(navigation,columns[0]);$node.append(navigation,columns[1]);}}
else
{$node.append(navigation,column);}
return navigation;},getGroupNumber=function(start,end)
{if(start===0&&end===0)
{return 2;}
return(end-start+1);},buildColGroupElement=function(start,end)
{return $createElementFromString(TEMPLATES.COLUMN_GROUP,{groupNumber:getGroupNumber(start,end)});},buildColumnGroup=function(startPoint,endPoint,silosData)
{var columnGroup=buildColGroupElement(startPoint,endPoint),navigation,i;for(i=startPoint;i<=endPoint;i+=1)
{navigation=buildNavigation(silosData[i],i===endPoint);$node.append(columnGroup,navigation);}
return columnGroup;},buildColumnsElement=function(columnNumber)
{return $createElementFromString(TEMPLATES.COLUMNS,{columnNumber:columnNumber});},buildColumns=function(silos)
{var columns,firstSilo,firstSiloLinks,columnGroup,breakPoint=0,columnNumber,numberOfSilos=silos?silos.length:-1;if(silos&&numberOfSilos>0)
{firstSilo=silos[0];firstSiloLinks=firstSilo?firstSilo.linkLists:false;columnNumber=numberOfSilos;breakPoint=2;if(firstSilo&&firstSiloLinks&&firstSiloLinks.length>1)
{columnNumber=numberOfSilos+1;breakPoint=0;}
columns=buildColumnsElement(columnNumber);columnGroup=buildColumnGroup(0,breakPoint,silos);$node.append(columns,columnGroup);columnGroup=buildColumnGroup(breakPoint+1,(numberOfSilos-1),silos);$node.append(columns,columnGroup);}
return columns;},buildSuperFooterRegion=function()
{var superFooterRegion;if(superFooterData&&superFooterData.silos)
{superFooterRegion=$createElementFromString(TEMPLATES.SUPER_FOOTER_REGION);$node.append(superFooterRegion,buildColumns(superFooterData.silos));}
return superFooterRegion;},buildSuperFooterContainer=function()
{var keystrokeManager=new KeystrokeManager(linkItems,true);superFooterContainer=$createElementFromString(TEMPLATES.SUPER_FOOTER_CONTAINER);$node.append(superFooterContainer,buildSuperFooterRegion());$node.append(superFooter,superFooterContainer);keystrokeManager.setListeningElement(superFooterContainer);},render=function(element)
{superFooterData=dataSource.getComponentData(SUPER_FOOTER_COMP);if(superFooterData)
{superFooter=$createElementFromString(TEMPLATES.SUPER_FOOTER);$node.append(element,superFooter);linkTracking(superFooter,SUPER_FOOTER_COMP);if(superFooterData.silos)
{buildSuperFooterContainer();}}},destroy=function()
{componentManager.destroy();$node.remove(superFooter);superFooterData=superFooter=linkItems=superFooterContainer=null;};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var MODULE_NAME='legalFooter',LINK_TRACKING_KEY='vgn-legalFooter',BUILD_VERSION_VISIBLE_CLASS='vgn-buildVersionVisible',ATTRIBUTES={BUILD:'data-build',TYPE:'data-footer-type',CUSTOM_TEXT:'data-custom-text'},NBSP='&nbsp;',CUSTOM_TEXT_CLASS='vgn-customTextField',TEMPLATES={BOILER_PLATE:'<p class="vgn-boilerplate"></p>',BOILER_PLATE_TEXT:'<span class="vgn-boilerplateText"></span>',BUILD_VERSION:'<small class="vgn-buildVersion" tabindex="-1">{{version}}</small>',COPYRIGHT:'<span class="vgn-copyrightDates">{{date}}</span>',DISCLOSURE:'<p class="vgn-legalFooterDisclosure">{{disclosure}}</p>',FEEDBACK_LINK_ITEM:'<li class="vgn-feedbackLink"></li>',LEGAL_CONTAINER:'<div class="vgn-legalContainer vgn-isCenterAligned"></div>',LEGAL_FOOTER:'<div class="vgn-legalFooter" role="complementary"></div>',LINK_LIST:'<ul class="vgn-linkList"></ul>',LINK_ITEM:'<li class="vgn-siteWideLinks"></li>',LOGO:'<div class="vgn-logo"></div>',MAIN_CONTENT:'<div class="vgn-mainContent"></div>',TERMS_OF_USE:'<span class="vgn-termsOfUse">{{terms}}</span>'};VGN.ComponentLibrary().module(MODULE_NAME,['$arrayIndexOf','KeystrokeManager','feedbackLink','$class','$node','linkTracking','EventManager','dataSource','ComponentManager','Link','$createElementFromString',function($arrayIndexOf,KeystrokeManager,feedbackLink,$class,$node,linkTracking,EventManager,dataSource,ComponentManager,Link,$createElementFromString)
{var legalFooterData,legalFooterDiv,buildData,type,customText,buildVersionElement,componentManager=new ComponentManager(),createLink=function(linkConfig)
{var linkComponent=new Link(linkConfig);componentManager.add(linkComponent);return linkComponent.render();},setAlternativeText=function(data,node)
{var currentItem,i;if(type&&data&&data.length>0)
{for(i=0;i<data.length;i+=1)
{currentItem=data[i];if(currentItem.type===type)
{node=currentItem.content;}}}
return node;},toggleBuildVersion=function(event)
{var isVisible;EventManager.stopPropagation(event);isVisible=$class.has(buildVersionElement,BUILD_VERSION_VISIBLE_CLASS);$class.toggle(buildVersionElement,BUILD_VERSION_VISIBLE_CLASS,!isVisible);},getDisclosureElement=function()
{var disclosureElement;if(legalFooterData&&legalFooterData.disclosure)
{disclosureElement=$createElementFromString(TEMPLATES.DISCLOSURE,legalFooterData);}
return disclosureElement;},getCopyrightElement=function()
{return $createElementFromString(TEMPLATES.COPYRIGHT,{date:legalFooterData.copyright+new Date().getFullYear()});},getTermsOfUseText=function()
{var terms=legalFooterData.termsAndConditions,termsAlt=legalFooterData.alternativeTermsAndConditions;if(termsAlt)
{terms=setAlternativeText(termsAlt,terms);}
return terms;},getTermsOfUseElement=function()
{return $createElementFromString(TEMPLATES.TERMS_OF_USE,{terms:getTermsOfUseText()});},getBoilerPlateElement=function()
{var boilerplateElement,termsAndConditionsElement,copyrightSpan,boilerplateString,boilerplateSpan;if(legalFooterData&&legalFooterData.copyright)
{boilerplateElement=$createElementFromString(TEMPLATES.BOILER_PLATE);boilerplateSpan=$createElementFromString(TEMPLATES.BOILER_PLATE_TEXT);copyrightSpan=getCopyrightElement();EventManager.addEvent(copyrightSpan,'click',toggleBuildVersion,MODULE_NAME);if(!customText||customText==='')
{termsAndConditionsElement=getTermsOfUseElement();boilerplateString=legalFooterData.boilerplate;if(legalFooterData.alternativeBoilerplates)
{boilerplateString=setAlternativeText(legalFooterData.alternativeBoilerplates,boilerplateString);}
boilerplateString=NBSP+boilerplateString+NBSP;}
else
{$class.add(boilerplateSpan,CUSTOM_TEXT_CLASS);boilerplateString=' '+customText+' ';}
$node.append(boilerplateElement,$createElementFromString(TEMPLATES.LOGO));$node.append(boilerplateElement,copyrightSpan);if(boilerplateString)
{boilerplateSpan.innerHTML=boilerplateString;$node.append(boilerplateElement,boilerplateSpan);}
$node.append(boilerplateElement,termsAndConditionsElement);}
return boilerplateElement;},getLinkList=function()
{var linkList,count,i,linkLi,linkConfig,links=[],keystrokeManager,pageTypeArrayForLink;if(legalFooterData&&legalFooterData.links)
{linkList=$createElementFromString(TEMPLATES.LINK_LIST);for(i=0,count=legalFooterData.links.length;i<count;i+=1)
{pageTypeArrayForLink=legalFooterData.links[i].type;if(!type||!pageTypeArrayForLink||$arrayIndexOf(pageTypeArrayForLink,type)!==-1)
{linkLi=$createElementFromString(TEMPLATES.LINK_ITEM);linkConfig=legalFooterData.links[i];linkConfig.parentElement=linkLi;links.push(createLink(linkConfig));$node.append(linkList,linkLi);}}
keystrokeManager=new KeystrokeManager(links,true,MODULE_NAME);keystrokeManager.setListeningElement(linkList);}
return linkList;},getFeedbackLink=function()
{var feedbackLi;if(legalFooterData&&legalFooterData.feedbackLink)
{feedbackLi=$createElementFromString(TEMPLATES.FEEDBACK_LINK_ITEM);feedbackLink.render(legalFooterData.feedbackLink,feedbackLi);componentManager.add(feedbackLink);}
return feedbackLi;},getBuildVersion=function()
{if(buildData)
{buildVersionElement=$createElementFromString(TEMPLATES.BUILD_VERSION,{version:buildData});}
return buildVersionElement;},populate=function(element)
{legalFooterData=dataSource.getComponentData(MODULE_NAME);buildData=$node.attribute(element,ATTRIBUTES.BUILD);type=$node.attribute(element,ATTRIBUTES.TYPE);customText=$node.attribute(element,ATTRIBUTES.CUSTOM_TEXT);},render=function(element)
{var legalContainerDiv,mainContent,linkList;populate(element);if(legalFooterData)
{legalFooterDiv=$createElementFromString(TEMPLATES.LEGAL_FOOTER);legalContainerDiv=$createElementFromString(TEMPLATES.LEGAL_CONTAINER);mainContent=$createElementFromString(TEMPLATES.MAIN_CONTENT);$node.append(mainContent,getDisclosureElement());$node.append(legalContainerDiv,mainContent);$node.append(legalFooterDiv,legalContainerDiv);if(!customText||customText==='')
{linkList=getLinkList();$node.append(linkList,getFeedbackLink());}
$node.append(mainContent,getBoilerPlateElement());$node.append(mainContent,linkList);$node.append(legalContainerDiv,getBuildVersion());$node.append(element,legalFooterDiv);linkTracking(legalFooterDiv,LINK_TRACKING_KEY);}},destroy=function()
{EventManager.cleanup(MODULE_NAME);componentManager.destroy();$node.remove(legalFooterDiv);legalFooterDiv=buildVersionElement=legalFooterData=null;buildData=type=customText=null;};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var MODULE_NAME='Silo',SILOCOUNT=0,MAX_COLUMN=4,EVENTS={CLICK:'click',KEY_DOWN:'keydown',KEY_UP:'keyup',SILO_UPDATED:'VGN_SILO_UPDATED',LINK_DROP_DOWN_OPEN:'linkDropDownOpen'},CLASSES={PREFIX:'vgn-',ACTION_BAR:'vgn-actionBar',ACTION_BAR_CONTAINER:'vgn-actionBarContainer',ACTION_BUTTON_LIST:'vgn-actionButtonList',HAS_BUTTON_LIST:'vgn-hasButtonList',NO_BUTTON_LIST:'vgn-noButtonList',ACTION_LINK_LIST:'vgn-actionLinkList',HAS_LINK_LIST:'vgn-hasLinkList',NO_LINK_LIST:'vgn-noLinkList',ACTION_BUTTON:'vgn-actionButton',ACTIVE_SILO:'vgn-activeSilo',ACTIVE_INTERNAL_SILO:'vgn-intOnlyActiveSilo',LINK_ONLY:'vgn-linkOnly',PLAIN_LINK:'vgn-plainLink',SILO_PANEL:'vgn-siloPanel',SILO_PANEL_CONTENT:'vgn-siloPanelContent',SUB_SILO_SECTION:'vgn-subSiloSection',SECTION_LINK:'vgn-sectionLink',HEADER:'vgn-header',SUB_SILO_ITEM:'vgn-subSiloItemLevel',SILO_TAB:'vgn-siloTab',INTERNAL:'vgn-intOnlySilo',LINK_CHILDREN:'vgn-subSiloGroup',SELECTED:'vgn-selectedSilo',INTERNAL_SELECTED:'vgn-intOnlySelectedSilo'},TEMPLATES={SILO:'<li id="{{id}}SiloTab" class="vgn-silo {{siloClass}}" data-name="{{name}}" role="tab" aria-haspopup="true"></li>',SILO_PANEL:'<div class="vgn-siloPanel {{class}}" role="tabpanel" aria-hidden="true"></div>',SILO_PANEL_CONTENT:'<div class="vgn-siloPanelContent"></div>',TOP_ACTION_BAR_CONTAINER:'<div class="vgn-topActionBarContainer"></div>',ACTION_BAR_CONTAINER:'<div class="vgn-actionBarContainer"></div>',SUB_SILO_SECTION:'<div class="vgn-subSiloSection" role="list"></div>',SUB_SILO:'<ul class="vgn-subSilo" role="menu"></ul>',ACTION_BAR:'<div class="vgn-actionBar"></div>',ARROW_ELEMENT:'<span class="vgn-arrowIcon"></span>',ACTIVE_INDICATOR:'<div class="vgn-activeSiloIndicator"></div>',CLEAR_FLOAT:'<div class="vgn-clearFloat"></div>'},getActiveClass=function(siloData)
{var activeClass=CLASSES.ACTIVE_SILO;if(siloData.internal)
{activeClass=CLASSES.ACTIVE_INTERNAL_SILO;}
return activeClass;},getSelectedClass=function(siloData)
{var selectedClass=CLASSES.SELECTED;if(siloData.internal)
{selectedClass=CLASSES.INTERNAL_SELECTED;}
return selectedClass;},getSiloClass=function(silo)
{var classList=[],siloData=silo.data;if(siloData.internal)
{classList.push(CLASSES.INTERNAL);}
if(siloData.selected)
{classList.push(silo.selectedClass);}
return classList.join(' ');},getButtonClass=function(data)
{var baseClass='vgn-actionButton',intClass='-int',disClass='-disabled',typeClass='-'+data.type,buttonClass=[baseClass],comboClass=[baseClass];if(data.internal)
{comboClass.push(intClass);}
else if(data.type)
{comboClass.push(typeClass);}
if(data.disabled)
{comboClass.push(disClass);}
buttonClass.push(comboClass.join(''));return buttonClass.join(' ');},isValidUpdateConfig=function(config)
{return config&&config.id&&(config.selected===true||config.selected===false);};VGN.ComponentLibrary().module(MODULE_NAME,['$createElementFromString','$createElement','$node','ComponentManager','KeystrokeManager','$browser','Link','EventManager','$bind','$class','$document','$contains','$utils','$measurements','$window','$keyCodes',function($createElementFromString,$createElement,$node,ComponentManager,KeystrokeManager,$browser,Link,EventManager,$bind,$class,$document,$contains,$utils,$measurements,$window,$keyCodes)
{var Silo=function(data)
{this.eventNamespace='Silo'+SILOCOUNT;SILOCOUNT+=1;this.manager=new ComponentManager();this.data=data;this.updatePanelPositionBindFunction=$bind(this.updatePanelPosition,this);this.closeSiloPanelBindFunction=$bind(this.closeSiloPanel,this);this.handleKeyEventBindFunction=$bind(this.handleKeyEvent,this);this.openSiloPanelBindFunction=$bind(this.openSiloPanel,this);this.updateSiloBindFunction=$bind(this.update,this);this.closeOpenMenuBindFunction=$bind(this.closeSiloPanel,this);this.links=[];this.keystrokeManager=new KeystrokeManager();this.activeClass=getActiveClass(data);this.selectedClass=getSelectedClass(data);};Silo.prototype={createLink:function(linkConfig)
{var linkComp=new Link(linkConfig),link=linkComp.render();this.manager.add(linkComp);if(linkConfig.href!==undefined)
{this.links.push(link);}
return link;},renderSubSiloSectionLinks:function(ul,link)
{var isHead=false,i=0,level=0,items=link.items,length,li,itemsUl,a;if(link.label)
{li=$createElement('li',{'role':'menuitem','aria-checked':link.selected||false},ul);a=this.createLink($utils.extend(link,{parentElement:li}));}
if(items)
{li=$createElement('li',{},ul);itemsUl=$createElement('ul',{'class':CLASSES.LINK_CHILDREN},li);for(i=0,length=items.length;i<length;i+=1)
{isHead=true;level=this.renderSubSiloSectionLinks(itemsUl,items[i]);}}
$class.add(a,isHead?CLASSES.HEADER:CLASSES.SECTION_LINK);$class.add(a,CLASSES.SUB_SILO_ITEM+level);return level+1;},renderSiloPanelContent:function(panelContainer,panelSectionsData)
{var iLength=panelSectionsData&&(panelSectionsData.length),subSiloUl,i,sectionData,j,subSiloSection;for(i=0;i<iLength;i)
{subSiloSection=$createElementFromString(TEMPLATES.SUB_SILO_SECTION,{},panelContainer);for(j=0;j<MAX_COLUMN&&i<iLength;j+=1,i+=1)
{sectionData=panelSectionsData[i];subSiloUl=$createElementFromString(TEMPLATES.SUB_SILO,{},subSiloSection);this.renderSubSiloSectionLinks(subSiloUl,sectionData,0);}
$createElementFromString(TEMPLATES.CLEAR_FLOAT,{},subSiloSection);}
return subSiloSection;},renderActionButtons:function(buttons,actionBar)
{var actionBarButtons=buttons&&$createElement('ul',{'class':CLASSES.ACTION_BUTTON_LIST,'role':'menu'}),i,iLength=buttons&&buttons.length,barClass=iLength>0?CLASSES.HAS_BUTTON_LIST:CLASSES.NO_BUTTON_LIST,actionBarLi,buttonData;$class.add(actionBar,barClass);for(i=0;i<iLength;i+=1)
{buttonData=buttons[i];actionBarLi=$createElement('li',{'role':'menuitem'});this.createLink($utils.extend(buttonData,{parentElement:actionBarLi,cssClass:getButtonClass(buttonData),suppressDefaultClasses:true}));$node.append(actionBarButtons,actionBarLi);}
$node.append(actionBar,actionBarButtons);},renderActionLinks:function(links,actionBar)
{var actionBarLinks=links&&$createElement('ul',{'class':CLASSES.ACTION_LINK_LIST,'role':'menu'}),i,iLength=links&&links.length,barClass=iLength>0?CLASSES.HAS_LINK_LIST:CLASSES.NO_LINK_LIST,linkConfig,actionBarLi;$class.add(actionBar,barClass);for(i=0;i<iLength;i+=1)
{linkConfig=links[i];actionBarLi=$createElement('li',{'role':'menuitem'});this.createLink($utils.extend(linkConfig,{parentElement:actionBarLi,cssClass:CLASSES.PLAIN_LINK}));$node.append(actionBarLinks,actionBarLi);}
$node.append(actionBar,actionBarLinks);},renderActionBar:function(actionBarData)
{var actionBarContainer=$createElementFromString(TEMPLATES.ACTION_BAR_CONTAINER),actionBar=$createElementFromString(TEMPLATES.ACTION_BAR);if(this.data.panel.length<3)
{this.renderActionLinks(actionBarData.links,actionBar);this.renderActionButtons(actionBarData.buttons,actionBar);}
else
{this.renderActionButtons(actionBarData.buttons,actionBar);this.renderActionLinks(actionBarData.links,actionBar);}
$node.append(actionBarContainer,actionBar);return actionBarContainer;},renderSiloPanel:function()
{var actionData=this.data.actionBar,navigationData=this.data.panel,size=(navigationData&&navigationData.length)||'',panelContentContainer=$createElementFromString(TEMPLATES.SILO_PANEL_CONTENT);this.size=(size>MAX_COLUMN?MAX_COLUMN:size);this.panel=$createElementFromString(TEMPLATES.SILO_PANEL,{'class':CLASSES.SILO_PANEL+this.size});this.renderSiloPanelContent(panelContentContainer,navigationData);this.keystrokeManager.registerItems(this.links,true);$node.append(this.panel,panelContentContainer);$node.append(this.panel,actionData&&this.renderActionBar(actionData));return this.panel;},updatePanelPosition:function()
{var THIS=this;$node.autoPosition({element:THIS.panel,target:THIS.silo,indicator:THIS.activeIndicator,indicatorOffset:1,columnSize:THIS.size});},openSiloPanel:function(event)
{var keyCode=event&&event.keyCode,backwardArrows=keyCode===$keyCodes.UP_ARROW||keyCode===$keyCodes.LEFT_ARROW,linkToFocus;if(this.panel)
{$class.add(this.silo,this.activeClass);EventManager.addEvent($window,'resize',this.updatePanelPositionBindFunction,this.eventNamespace);EventManager.addEvent($document,'click',this.closeSiloPanelBindFunction,this.eventNamespace);linkToFocus=this.links[backwardArrows?(this.links.length-1):1];if(parseInt($node.attribute(linkToFocus,'tabindex'),10)!==-1)
{linkToFocus.focus();}
this.updatePanelPosition();}},closeSiloPanel:function(event)
{var keyCode=event&&event.keyCode;if(this.siloLink!==EventManager.getTarget(event)||keyCode===$keyCodes.TAB||keyCode===$keyCodes.ESC||(keyCode===$keyCodes.ENTER&&event.type==='keydown'))
{$class.remove(this.silo,this.activeClass);EventManager.removeEvent($window,'resize',this.updatePanelPositionBindFunction,this.eventNamespace);EventManager.removeEvent($document,'click',this.closeSiloPanelBindFunction,this.eventNamespace);}},isActive:function()
{return $class.has(this.silo,this.activeClass);},handleKeyEvent:function(event)
{var target=EventManager.getTarget(event),keyCode=event.keyCode,advanceArrows=keyCode===$keyCodes.DOWN_ARROW||keyCode===$keyCodes.RIGHT_ARROW,backwardArrows=keyCode===$keyCodes.UP_ARROW||keyCode===$keyCodes.LEFT_ARROW;if(((keyCode===$keyCodes.TAB&&this.isActive())||keyCode===$keyCodes.ESC)&&event.type!=='keyup')
{this.closeSiloPanel(event);}
else if((keyCode===$keyCodes.ENTER||advanceArrows||backwardArrows||keyCode===$keyCodes.SPACE)&&$contains(this.silo,target)&&event.type==='keydown')
{if(!this.isActive())
{this.openSiloPanel(event);}
else if(keyCode===$keyCodes.ENTER||keyCode===$keyCodes.SPACE)
{this.closeSiloPanel(event);}}
if((target!==this.siloLink&&keyCode===$keyCodes.TAB&&event.shiftKey)||keyCode===$keyCodes.ESC)
{this.siloLink.focus();}},update:function(event,newSiloData)
{var THIS=this,siloIdMatches,isSelected;if(isValidUpdateConfig(newSiloData))
{siloIdMatches=newSiloData.id===THIS.data.id;if(newSiloData.selected===true)
{isSelected=siloIdMatches;}
else if(siloIdMatches)
{isSelected=false;}
if(isSelected!==undefined)
{THIS.data.selected=isSelected;$class.toggle(THIS.silo,THIS.selectedClass,THIS.data.selected);}}},render:function()
{var THIS=this,siloData=THIS.data,hasHref=siloData.href,hasPanel=siloData.panel,href=!hasPanel&&hasHref;THIS.silo=$createElementFromString(TEMPLATES.SILO,{id:siloData.id,name:siloData.label,siloClass:getSiloClass(THIS)});THIS.keystrokeManager.setListeningElement(THIS.silo);THIS.siloLink=THIS.createLink($utils.extend(siloData,{href:href,cssClass:[CLASSES.SILO_TAB,href||$browser.isIe7orLess()?'':'vgn-arrow'].join(' '),parentElement:THIS.silo}));if(hasPanel)
{if($browser.isIe7orLess())
{$createElementFromString(TEMPLATES.ARROW_ELEMENT,{},THIS.siloLink);}
$node.append(THIS.silo,THIS.renderSiloPanel());THIS.activeIndicator=$createElementFromString(TEMPLATES.ACTIVE_INDICATOR,{},THIS.silo);}
EventManager.addEvent(THIS.silo,EVENTS.CLICK,THIS.openSiloPanelBindFunction,THIS.eventNamespace);EventManager.addEvent(THIS.silo,EVENTS.KEY_UP,THIS.handleKeyEventBindFunction,THIS.eventNamespace);EventManager.addEvent(THIS.silo,EVENTS.KEY_DOWN,THIS.handleKeyEventBindFunction,THIS.eventNamespace);EventManager.subscribe(null,EVENTS.SILO_UPDATED,THIS.updateSiloBindFunction,THIS.eventNamespace);EventManager.subscribe(null,EVENTS.LINK_DROP_DOWN_OPEN,THIS.closeOpenMenuBindFunction,THIS.eventNamespace);return THIS.silo;},getElement:function()
{return this.silo||this.render();},destroy:function()
{this.manager.destroy();EventManager.cleanup(this.eventNamespace);}};VGN.silo={update:function(config)
{EventManager.dispatch(EVENTS.SILO_UPDATED,null,config);}};return Silo;}]);}(window.VGN));(function(VGN)
{'use strict';var MODULE_NAME='navBar',OPEN_RESP_NAV_EVENT='openVerticalNav',PX='px',SEARCH_ICON_WIDTH=50,CLASSES={PREFIX:'vgn-',HIDDEN:'vgn-displayNone',NAV_BAR:'vgn-navBar',NAV_BAR_CONTAINER:'vgn-container',NAVIGATION:'vgn-navigation',NAVIGATION_LARGE:'vgn-navigation vgn-showOnLarge',HAS_NAV:'vgn-hasNav',NO_NAV:'vgn-noNav',HAS_RESP_MENU:'vgn-hasRespMenu',HIGH_LEVEL_NAV:'vgn-highLevelNav',BREAK_BEFORE:'vgn-breakBefore',AUTO_SUGGEST:'vgn-autoSuggest',HIDDEN_LARGE:'vgn-hideOnLarge',SEARCH:'vgn-navBarSearch',RESP_CONTAINER:'vgn-navBarResponsiveContainer'},SELECTORS={NAV_BAR:'.'+CLASSES.NAV_BAR,NAV_BAR_CONTAINER:'.'+CLASSES.NAV_BAR_CONTAINER,AUTO_SUGGEST:'.'+CLASSES.AUTO_SUGGEST},DIV_START='<div class="',DIV_END='"></div>',TEMPLATES={NAV_BAR:[DIV_START,CLASSES.NAV_BAR,DIV_END].join(''),NAV_BAR_CONTAINER:[DIV_START,CLASSES.NAV_BAR_CONTAINER,DIV_END].join('')},EVENTS={CLICK:'click',CLICK_TOUCH_START:'click touchstart',FOCUS:'focus',KEY_DOWN:'keydown',RE_RENDER_NAV_BAR:'RERENDER_NAVBAR',DISPLAY_SUB_SILO_CONTENTS:'DISPLAY_SUBSILO_CONTENTS',RESIZE:'resize',AUTO_SUGGEST_AVAILABLE:'onAutoSuggestDataAvailable'},MENU_BUTTON={START:'<button class="vgn-menuButton">',END:'</button>'};VGN.ComponentLibrary().module(MODULE_NAME,['$window','$document','$browser','$bind','$createElement','$createElementFromString','$class','$select','$keyCodes','$measurements','$node','EventManager','KeystrokeManager','linkTracking','webUsageProxy','dataSource','Search','ComponentManager','Silo',function($window,$document,$browser,$bind,$createElement,$createElementFromString,$class,$select,$keyCodes,$measurements,$node,EventManager,KeystrokeManager,linkTracking,webUsageProxy,dataSource,Search,ComponentManager,Silo)
{var containerDiv,data,verticalNavData,navigation,mainDiv,search,supportsTransition=$browser.supportsCssTransition(),transitionSpeed=supportsTransition?500:0,componentManager=new ComponentManager(),siloContainer,silos=[],addNavSearchEvents=function()
{var input=search.input,form=search.form,searchIcon=search.submitButton,closeInput=function()
{input.style.width='';input.style.padding='0px';$window.setTimeout(function()
{$class.add(input,CLASSES.HIDDEN);},transitionSpeed);},refreshInputWidth=function()
{input.style.width='';input.style.width=(form.clientWidth-SEARCH_ICON_WIDTH)+PX;input.style.padding='';};$class.add(input,CLASSES.HIDDEN);EventManager.addEvent(searchIcon,EVENTS.CLICK_TOUCH_START,function(event)
{var isClosed=$class.has(input,CLASSES.HIDDEN);if(isClosed)
{$class.remove(input,CLASSES.HIDDEN);EventManager.stopPropagation(event);EventManager.preventDefault(event);refreshInputWidth(form);search.setPlaceHolderText();input.focus();}
else
{closeInput();}},MODULE_NAME);EventManager.addEvent($window,EVENTS.RESIZE,function()
{if(!$class.has(input,CLASSES.HIDDEN))
{input.style.display='none';refreshInputWidth();search.setPlaceHolderText();input.style.display='';}},MODULE_NAME);EventManager.subscribe(search.autoSuggest.autoSuggestData,EVENTS.AUTO_SUGGEST_AVAILABLE+MODULE_NAME+'Search',function()
{if(!$class.has(input,CLASSES.HIDDEN))
{input.style.display='none';refreshInputWidth();input.style.display='';}},MODULE_NAME);EventManager.addEvent(input,EVENTS.CLICK_TOUCH_START,function(event)
{EventManager.stopPropagation(event);});EventManager.addEvent($document,EVENTS.CLICK_TOUCH_START,function(event)
{closeInput();},MODULE_NAME);},renderMenuButton=function()
{var label=verticalNavData&&verticalNavData.label,menuButton;if(label)
{menuButton=$createElementFromString([MENU_BUTTON.START,label,MENU_BUTTON.END].join(''));EventManager.addEvent(menuButton,EVENTS.CLICK,function()
{EventManager.dispatch(OPEN_RESP_NAV_EVENT);webUsageProxy.trackAction(MODULE_NAME+'.'+OPEN_RESP_NAV_EVENT);},MODULE_NAME);$class.add(mainDiv,CLASSES.HAS_RESP_MENU);}
return menuButton;},renderNavigation=function()
{var i,length,current,siloComp,isNoNav=true;if(data)
{length=data.length;if(length>0)
{isNoNav=false;navigation=$createElement('div',{'class':CLASSES.NAVIGATION_LARGE,role:'navigation','aria-label':'main navigation'});siloContainer=$createElement('ul',{'class':CLASSES.HIGH_LEVEL_NAV,role:'tabList','aria-controls':'st1'});for(i=0;i<length;i+=1)
{current=data[i];siloComp=new Silo(current);componentManager.add(siloComp);silos.push(siloComp.getElement());$node.append(siloContainer,siloComp.getElement());}
$node.append(navigation,siloContainer);$node.append(containerDiv,navigation);}
$class.toggle(mainDiv,CLASSES.NO_NAV,isNoNav);$class.toggle(mainDiv,CLASSES.HAS_NAV,!isNoNav);}},getMainDiv=function(parentNode)
{mainDiv=$select(SELECTORS.NAV_BAR,parentNode)[0]||$createElementFromString(TEMPLATES.NAV_BAR,{},parentNode);},render=function(element)
{var respContainer,bar;data=dataSource.getComponentData('navItems');if(data)
{verticalNavData=dataSource.getComponentData('verticalNav');getMainDiv(element);containerDiv=$createElementFromString(TEMPLATES.NAV_BAR_CONTAINER,{},mainDiv);respContainer=$createElement('div',{'class':CLASSES.HIDDEN_LARGE+' '+CLASSES.RESP_CONTAINER},containerDiv);renderNavigation();$node.append(respContainer,renderMenuButton());if(data.showSearch!==false)
{search=new Search(MODULE_NAME);componentManager.add(search);bar=search.getSearchBar();$node.append($createElement('div',{'class':CLASSES.SEARCH},respContainer),bar);if(bar)
{addNavSearchEvents();}}
linkTracking(mainDiv,MODULE_NAME);}
return containerDiv;},destroy=function()
{EventManager.cleanup(MODULE_NAME);componentManager.destroy();$node.remove(mainDiv);containerDiv=navigation=mainDiv=data=null;return true;},refresh=function(element)
{return destroy()&&render(element);};VGN.util.navBar={refresh:refresh,destroy:destroy};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var SHOPPING_CART_COMP='shoppingCart',CART_UPDATED_EVENT='VGN_SHOPPING_CART_UPDATED',ARIA_HIDDEN_ATTR='aria-hidden',ARIA_LABEL_ATTR='aria-label',DISPLAY_NONE_CLASS='vgn-displayNone',ARIA_LABEL_DEFAULT="There are {{total}} items in your cart.",TEMPLATES={TOTAL:'<span class="vgn-cartTotal" aria-hidden="true">{{total}}</span>',ICON:'<span class="vgn-cartIcon" aria-hidden="true"></span>'};VGN.ComponentLibrary().module(SHOPPING_CART_COMP,['$createElementFromString','$stringUtils','$class','$node','dataSource','EventManager','Link','ComponentManager',function($createElementFromString,$stringUtils,$class,$node,dataSource,EventManager,Link,ComponentManager)
{var cartElement,totalElement,iconElement,compConfig,componentManager=new ComponentManager(),hideElement=function(element,skipAria)
{$class.add(element,DISPLAY_NONE_CLASS);if(!skipAria)
{$node.attribute(element,ARIA_HIDDEN_ATTR,true);}},showElement=function(element,skipAria)
{$class.remove(element,DISPLAY_NONE_CLASS);if(!skipAria)
{$node.attribute(element,ARIA_HIDDEN_ATTR,false);}},updateCartVisibility=function(isVisible)
{if(isVisible===false)
{hideElement(cartElement);}
else
{showElement(cartElement);}},updateAriaLabel=function(newTotal)
{var ariaLabel=compConfig.ariaLabel,labelSingle=ariaLabel.single,labelEmpty=ariaLabel.empty,labelTemplate=ariaLabel.multiple,newLabel;if(newTotal===0&&labelEmpty)
{labelTemplate=labelEmpty;}
else if(newTotal===1&&labelSingle)
{labelTemplate=labelSingle;}
newLabel=$stringUtils.format(labelTemplate,{total:newTotal});$node.attribute(cartElement,ARIA_LABEL_ATTR,newLabel);},updateCartTotal=function(newTotal)
{if(newTotal!==undefined)
{newTotal=parseInt(newTotal,10);if(newTotal!==0&&newTotal>0)
{totalElement.innerHTML=newTotal;showElement(totalElement,true);}
else
{newTotal=0;totalElement.innerHTML=newTotal;hideElement(totalElement,true);}
updateAriaLabel(newTotal);}},onCartUpdate=function(event,data)
{updateCartTotal(data.total);updateCartVisibility(data.visible);},buildAnchor=function()
{var linkComponent=new Link({href:compConfig.href,cssClass:'vgn-cart',ariaLive:'assertive',tabindex:0});componentManager.add(linkComponent);cartElement=linkComponent.render();updateCartVisibility(compConfig.visible);},buildTotal=function()
{totalElement=$createElementFromString(TEMPLATES.TOTAL,compConfig);$node.append(cartElement,totalElement);updateCartTotal(compConfig.total);},buildIcon=function()
{iconElement=$createElementFromString(TEMPLATES.ICON);$node.append(cartElement,iconElement);},buildCart=function(parentElement)
{buildAnchor();buildTotal();buildIcon();$node.append(parentElement,cartElement);},addEvents=function()
{EventManager.subscribe(null,CART_UPDATED_EVENT,onCartUpdate,SHOPPING_CART_COMP);},getDefault=function(item,defaultValue)
{if(item!==undefined)
{return item;}
return defaultValue;},setConfigDefaults=function()
{compConfig.href=getDefault(compConfig.href,'');compConfig.total=getDefault(compConfig.total,0);compConfig.visible=getDefault(compConfig.visible,true);compConfig.ariaLabel=compConfig.ariaLabel||{};compConfig.ariaLabel.multiple=compConfig.ariaLabel.multiple||ARIA_LABEL_DEFAULT;},render=function(parentElement)
{compConfig=dataSource.getComponentData(SHOPPING_CART_COMP);if(compConfig&&parentElement)
{setConfigDefaults();buildCart(parentElement);addEvents();}},destroy=function()
{componentManager.destroy();EventManager.cleanup(SHOPPING_CART_COMP);cartElement=totalElement=iconElement=compConfig=null;};VGN.shoppingCart={update:function(config)
{EventManager.dispatch(CART_UPDATED_EVENT,null,config);}};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var SITE_LIST_MENU_COMP='siteListMenu',SITE_LIST_DATA='sitePreferences',TEMPLATES={SITE_LIST_WRAPPER:'<div class="vgn-siteList {{dropDownClass}}" {{hasPopup}}></div>',SITE_INDICATOR:'<div class="vgn-siteIndicator {{hideClass}}">{{siteLabel}}</div>',ARROW_ELEMENT:'<span class="vgn-arrowIcon"></span>'},DROP_DOWN_CLASS='vgn-dropDownContainer',ARIA_HAS_POPUP='aria-haspopup="true"',HIDE_ON_LARGE='vgn-hideOnLarge',SITE_INDICATOR_MENU_LABEL_CLASS='vgn-siteIndicatorMenu vgn-dropDownLabel vgn-arrow vgn-showOnLarge';VGN.ComponentLibrary().module(SITE_LIST_MENU_COMP,['$createElementFromString','$stringUtils','$node','$browser','dataSource','LinkDropDown','Link','ComponentManager',function($createElementFromString,$stringUtils,$node,$browser,dataSource,LinkDropDown,Link,ComponentManager)
{var siteListElement,componentManager=new ComponentManager(),createSiteIndicatorMenuLabel=function(linkLabel,parentNode)
{var linkComponent=new Link({cssClass:SITE_INDICATOR_MENU_LABEL_CLASS,tabindex:0,label:linkLabel,parentElement:parentNode}),linkElement=linkComponent.render();componentManager.add(linkComponent);if($browser.isIe7orLess())
{$createElementFromString(TEMPLATES.ARROW_ELEMENT,{},linkElement);}
return linkElement;},createSiteIndicatorText=function(linkLabel,parentNode,hasSiteList)
{if(linkLabel!==''||hasSiteList)
{$createElementFromString(TEMPLATES.SITE_INDICATOR,{hideClass:hasSiteList?HIDE_ON_LARGE:'',siteLabel:linkLabel},parentNode);}},createSiteListWrapper=function(hasSiteList)
{return $createElementFromString(TEMPLATES.SITE_LIST_WRAPPER,{dropDownClass:hasSiteList?DROP_DOWN_CLASS:'',hasPopup:hasSiteList?ARIA_HAS_POPUP:''});},render=function(parentElement)
{var sitePreferenceData=dataSource.getComponentData(SITE_LIST_DATA),siteListDropDown,siteListData,hasSiteList=false,siteListItems,linkLabel,siteIndicatorMenuLabel;if(sitePreferenceData)
{siteListData=sitePreferenceData.siteList;if(siteListData)
{siteListItems=siteListData.items||{};hasSiteList=siteListItems&&siteListItems.length>0;linkLabel=siteListData.label||'';siteListElement=createSiteListWrapper(hasSiteList);createSiteIndicatorText(linkLabel,siteListElement,hasSiteList);if(hasSiteList)
{siteIndicatorMenuLabel=createSiteIndicatorMenuLabel(linkLabel,siteListElement);siteListDropDown=new LinkDropDown({list:siteListItems,parentCompData:sitePreferenceData,trigger:siteIndicatorMenuLabel,wrapper:siteListElement,isSiteList:true});componentManager.add(siteListDropDown);siteListDropDown.render();}
$node.append(parentElement,siteListElement);}}},destroy=function()
{componentManager.destroy();$node.remove(siteListElement);siteListElement=null;};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.ComponentLibrary().module('siteNavTourCookieManager',['$cookie',function($cookie)
{return{set:function(configCookie,isNotExpirable)
{var days=isNotExpirable?365:0;$cookie.set(configCookie,configCookie,days,true);},get:function(configCookie)
{return $cookie.get(configCookie);}};}]);}(window.VGN));(function(VGN)
{'use strict';var SITE_NAV_TOUR='siteNavTour';VGN.ComponentLibrary().module(SITE_NAV_TOUR,['$noOp','$document','$window','$bind','$createElement','$class','EventManager','$keyCodes','$select','siteNavTourCookieManager','webUsageProxy','linkTracking','detection','dataSource','$node','ComponentManager','Link',function($noOp,$document,$window,$bind,$createElement,$class,EventManager,$keyCodes,$select,siteNavTourCookieManager,webUsageProxy,linkTracking,detection,dataSource,$node,ComponentManager,Link)
{var data={},siteNavTourContainer,tourView,closeView,description,selectedButton,openScreen=null,transitionDelay=500,cookieName,currentTourData,vgnGlobalHeader,urlRewrite,rewrite_prefix='\\[',rewrite_suffix='\\]',rewrite_pattern,webUsageNamespace='siteNavTour',displaySubSiloEvent='DISPLAY_SUBSILO_CONTENTS',sitePrefClosedEvent='SITE_PREFERENCES_CLOSED',sitePrefOpenEvent='openSetSitePreference',activeSiloClosedEvent='activeSiloClosed',componentManager=new ComponentManager(),onDocumentInteraction=function(evt)
{var event=evt||$window.event;if(openScreen)
{EventManager.stopPropagation(event);}},isSiteNavTourOpen=function()
{return(openScreen!==null);},hasNoTourCookie=function()
{return!siteNavTourCookieManager.get(cookieName);},closeScreen=function(screen)
{openScreen=null;$class.remove(screen,'vgn-tourOpen');},showScreen=$noOp,openSiteNavTour=function()
{if(hasNoTourCookie()&&tourView)
{$window.setTimeout(function()
{showScreen(tourView);webUsageProxy.trackAction(webUsageNamespace+'.tourOpened');},transitionDelay);}},setSelectedButtonClass=function(button)
{if(selectedButton)
{$class.remove(selectedButton,'selected');}
selectedButton=button;if(selectedButton)
{$class.add(selectedButton,'selected');}},clearSelectedButton=function()
{setSelectedButtonClass(undefined);description.innerHTML='';},closeSiteNavTour=function()
{if(openScreen)
{closeScreen(openScreen);clearSelectedButton();}},initEvents=function()
{EventManager.addEvent(vgnGlobalHeader,'mouseover',onDocumentInteraction);EventManager.addEvent(siteNavTourContainer,'click',onDocumentInteraction);EventManager.subscribe(null,sitePrefClosedEvent,openSiteNavTour);EventManager.subscribe(null,sitePrefOpenEvent,closeSiteNavTour);},siloPanelCloseListener,removeSiloPanelCloseListener=function()
{EventManager.unsubscribe(null,activeSiloClosedEvent,siloPanelCloseListener);},attachSiloPanelCloseListener=function()
{EventManager.subscribe(null,activeSiloClosedEvent,siloPanelCloseListener);},rewriteURLs=function(text)
{var i,length;if(urlRewrite)
{for(i=0,length=urlRewrite.length;i<length;i+=1)
{rewrite_pattern=rewrite_prefix+urlRewrite[i].site+rewrite_suffix;text=text.replace(new RegExp(rewrite_pattern,'g'),urlRewrite[i].href);}}
return text;},sendTrackLink=function(event)
{webUsageProxy.trackLink(event,EventManager.getTarget(event),webUsageNamespace);},toggleDescription=function(buttonData)
{var anchors,i;description.innerHTML=rewriteURLs(buttonData.description);anchors=description.getElementsByTagName('a');for(i=0;i<anchors.length;i+=1)
{EventManager.addEvent(anchors[i],'click',sendTrackLink);}},openSubnavPanel=function(subPanelID)
{var customEvent=EventManager.createEvent(displaySubSiloEvent);if(currentTourData)
{customEvent.data.id=subPanelID||currentTourData.silo;$class.add(vgnGlobalHeader,currentTourData.id);EventManager.dispatch(customEvent);}},tourButtonHandler=function(buttonData,button,evt)
{var event=evt||$window.event;if((event.type==='click'||event.keyCode===$keyCodes.ENTER))
{removeSiloPanelCloseListener();toggleDescription(buttonData);setSelectedButtonClass(button);if(currentTourData)
{$class.remove(vgnGlobalHeader,currentTourData.id);}
currentTourData=buttonData;openSubnavPanel();webUsageProxy.trackAction(webUsageNamespace+'.selected.'+currentTourData.id);$window.setTimeout(attachSiloPanelCloseListener,100);}},closeTourHandler=function(evt)
{var event=evt||$window.event;if((event.type==='click'||event.keyCode===$keyCodes.ENTER))
{if(closeView)
{showScreen(closeView);}
else
{closeScreen(openScreen);}
EventManager.stopPropagation(event);}},cancelButtonHandler=function(event)
{if((event.type==='click'||event.keyCode===$keyCodes.ENTER)&&tourView!==undefined)
{showScreen(tourView);$window.setTimeout(openSubnavPanel,transitionDelay*3);}},confirmButtonHandler=function(hideTourOption,event)
{if((event.type==='click'||event.keyCode===$keyCodes.ENTER)&&openScreen)
{closeScreen(openScreen);EventManager.removeEvent($document,'mouseover',onDocumentInteraction);if(currentTourData)
{$class.remove(vgnGlobalHeader,currentTourData.id);}
siteNavTourCookieManager.set(cookieName,hideTourOption.checked);webUsageProxy.trackAction(webUsageNamespace+'.checked.'+hideTourOption.checked);}},buildCloseButton=function(parentNode)
{var container=$createElement('div',{'class':'vgn-siteNavTourCloseButton'}),linkComponent=new Link({cssClass:'vgn-closeBtn vgn-large',title:data.closeButtonTitle,tabindex:0,parentElement:container}),link=linkComponent.render();componentManager.add(linkComponent);EventManager.addEvent(link,'click keyup',$bind(closeTourHandler,this));$node.append(parentNode,container);},buildCancelButton=function(button)
{var cancelButton=$createElement('input',{'id':button.id,'class':'vgn-actionButton vgn-actionButton-secondary','type':'submit','value':button.label});EventManager.addEvent(cancelButton,'click keyup',$bind(cancelButtonHandler,this));return cancelButton;},buildConfirmButton=function(button,hideTourOption)
{var confirmButton=$createElement('input',{'id':button.id,'class':'vgn-actionButton vgn-actionButton-primary','type':'submit','value':button.label});EventManager.addEvent(confirmButton,'click keyup',$bind(confirmButtonHandler,this,hideTourOption));return confirmButton;},buildHighlightButton=function(buttonData,parentNode)
{var buttonComponent,button;buttonData.cssClass='vgn-highlight';buttonData.tabindex=0;buttonData.parentElement=parentNode;buttonComponent=new Link(buttonData);componentManager.add(buttonComponent);button=buttonComponent.render();EventManager.addEvent(button,'click keyup',$bind(tourButtonHandler,this,buttonData,button));},buildTourScreen=function(tourViewData)
{var header=$createElement('div',{'class':'vgn-tourHeader'}),introPara=$createElement('p'),buttonContainer=$createElement('div'),length=tourViewData.buttons.length,i=0;tourView=$createElement('div',{'class':'vgn-siteNavContent vgn-isCenterAligned'});description=$createElement('div',{'class':'vgn-siteNavDescription'});header.innerHTML=tourViewData.header;introPara.innerHTML=tourViewData.content;for(i;i<length;i+=1)
{buildHighlightButton(tourViewData.buttons[i],buttonContainer);}
buildCloseButton(tourView);$node.append(tourView,header);$node.append(tourView,introPara);$node.append(tourView,buttonContainer);$node.append(tourView,description);return tourView;},buildCloseScreen=function(closeViewData)
{var header=$createElement('div',{'class':'vgn-tourHeader'}),controlsDiv=$createElement('div',{'class':'vgn-siteNavConfirmControls'}),hideTourLabel=$createElement('label'),hideTourSpan=$createElement('span'),hideTourOption=$createElement('input',{'type':'checkbox','id':closeViewData.checkbox.id});closeView=$createElement('div',{'class':'vgn-siteNavContent vgn-isCenterAligned'});header.innerHTML=closeViewData.header;hideTourSpan.innerHTML=closeViewData.checkbox.label;$node.append(hideTourLabel,hideTourOption);$node.append(hideTourLabel,hideTourSpan);$node.append(controlsDiv,hideTourLabel);$node.append(controlsDiv,buildConfirmButton(closeViewData.buttons[1],hideTourOption));$node.append(controlsDiv,buildCancelButton(closeViewData.buttons[0]));$node.append(closeView,header);$node.append(closeView,controlsDiv);return closeView;},run=function(showSitePref)
{if(showSitePref!=='true')
{openSiteNavTour();}},populate=function()
{data=dataSource.getComponentData('siteNavTour');},render=function(parentElement)
{populate();if(data&&!detection.isMobileDevice())
{vgnGlobalHeader=$select('#vgn-globalHeader')[0];siteNavTourContainer=$createElement('div',{'class':'vgn-siteNavTour'});if(data.tourView)
{$node.append(siteNavTourContainer,buildTourScreen(data.tourView));}
if(data.closeView)
{$node.append(siteNavTourContainer,buildCloseScreen(data.closeView));}
if(data.cookieName)
{cookieName=data.cookieName;}
if(data.urlRewrite)
{urlRewrite=data.urlRewrite;}
initEvents();linkTracking(siteNavTourContainer,webUsageNamespace);$node.append(parentElement,siteNavTourContainer);}},destroy=function()
{EventManager.cleanup(SITE_NAV_TOUR);componentManager.destroy();$node.remove(siteNavTourContainer);};showScreen=function(screen)
{if(openScreen!==null)
{closeScreen(openScreen);$window.setTimeout(function()
{showScreen(screen);},transitionDelay);}
else
{openScreen=screen;$class.add(screen,'vgn-tourOpen');}};siloPanelCloseListener=function()
{clearSelectedButton();if(currentTourData)
{$class.remove(vgnGlobalHeader,currentTourData.id);}
removeSiloPanelCloseListener();};return{render:render,destroy:destroy,run:run,isSiteNavTourOpen:isSiteNavTourOpen};}]);}(window.VGN));(function(VGN)
{'use strict';VGN.ComponentLibrary().module('sitePreferenceCookieManager',['$cookie',function($cookie)
{var configCookie='_vgi_config',cookiePrefix='sp:',get=function()
{return $cookie.get(configCookie);},set=function(selectedValue)
{var currentCookieValue=get(),newVal='',position=-1;if(!currentCookieValue)
{newVal=cookiePrefix+selectedValue+';';}
else
{position=currentCookieValue.indexOf(cookiePrefix);if(position>-1)
{position=position+cookiePrefix.length;newVal=currentCookieValue.substring(0,position)+selectedValue+currentCookieValue.substring(position+1,currentCookieValue.length);}
else
{newVal=currentCookieValue+cookiePrefix+selectedValue+';';}}
$cookie.set(configCookie,newVal,2,true);};return{set:set,get:get};}]);}(window.VGN));(function(VGN)
{'use strict';var SITE_PREFERENCES_MODULE='sitePreferences',WEB_USAGE_NAMESPACE='sitePreference',CLASSES={RADIO:'vgn-radio',RADIO_LABEL:'vgn-radioLabel',CURRENT_SITE:'vgn-currentSite',PREFERRED_SITE:'vgn-preferredSite',PREFIX:'vgn-',OPEN_SUFFIX:'-open'},SELECTORS={CURRENT_SITE:'.'+CLASSES.CURRENT_SITE,PREFERRED_SITE:'.'+CLASSES.PREFERRED_SITE,UTILITY_BAR:'.vgn-utilityBar'},CHECKED='checked',NO_COOKIE_SCREEN_NAME='noCookie',NO_COOKIE_FORM='vgnNoCookie',NO_COOKIE_OPTION_NAME='vgnNoCookieOption',SET_COOKIE_SCREEN_NAME='selectSitePreference',SET_COOKIE_OPTION_NAME='vgnSetCookieOption',POSITIVE_SCREEN_NAME='positiveAcknowledgement',NEGATIVE_SCREEN_NAME='negativeAcknowledgement',TEMPLATES={FORM:'<form data-formID={{formId}} role="form"></form>',FIELD_SET:'<fieldset></fieldset>',LEGEND:'<legend>{{content}}</legend>',RADIO:'<input type="radio" value="{{value}}" name="{{name}}" id="{{id}}" class="{{cssClass}}" {{checked}} />',RADIO_LABEL:'<label for="{{forId}}" class="'+CLASSES.RADIO_LABEL+'">{{text}}</label>',CURRENT_SITE:'<strong class="'+CLASSES.CURRENT_SITE+'"></strong>',PREFERRED_SITE:'<strong class="'+CLASSES.PREFERRED_SITE+'"></strong>',OPTION_DESCRIPTION:'<p class="vgn-radioDescription">{{description}}</p>',SITE_PREFERENCES:'<div class="vgn-sitePreferences">',NO_COOKIE_SCREEN:'<div class="vgn-noCookie vgn-sitePreferenceScreen"></div>',SELECT_SITE_SCREEN:'<div class="vgn-selectSitePreference vgn-sitePreferenceScreen"></div>',POSITIVE_SCREEN:['<div class="vgn-positiveAcknowledgement vgn-sitePreferenceScreen">','<span class="vgn-preferredSiteIcon"></span>{{content}}','</div>'].join(''),NEGATIVE_SCREEN:'<div class="vgn-negativeAcknowledgement vgn-sitePreferenceScreen">{{content}}</div>'},EVENTS={UPDATE_SSP:'vgnUpdateSitePreference',OPEN_SSP:'openSetSitePreference'};VGN.ComponentLibrary().module(SITE_PREFERENCES_MODULE,['$noOp','$window','$browser','$createElement','$createElementFromString','$class','EventManager','$keyCodes','dataSource','sitePreferenceCookieManager','webUsageProxy','$stringUtils','siteNavTour','$node','$select','Link','ComponentManager',function($noOp,$window,$browser,$createElement,$createElementFromString,$class,EventManager,$keyCodes,dataSource,sitePreferenceCookieManager,webUsageProxy,$stringUtils,siteNavTour,$node,$select,Link,ComponentManager)
{var data,showOnLoadScreens=[],sitePreferenceContainer,noCookieScreen,setCookieScreen,positiveAcknowledgement,positiveAcknowledgementSite,negativeAcknowledgement,currentSite='',preferredSite='',openScreen=null,openScreenName,siteList,supportsTransition=$browser.supportsCssTransition(),transitionDelay=supportsTransition?10:0,transitionSpeed=supportsTransition?500:0,componentManager=new ComponentManager(),closeScreen=function(screen,screenName)
{openScreen=null;$class.remove(screen,CLASSES.PREFIX+screenName+CLASSES.OPEN_SUFFIX);},showScreen=$noOp,openSetCookie=function()
{showScreen(setCookieScreen,SET_COOKIE_SCREEN_NAME);webUsageProxy.trackAction(WEB_USAGE_NAMESPACE+'.opened');},getSiteLabel=function(value)
{var items=siteList.items||[],numItems=items.length,label=value,currentItem,index;for(index=0;index<numItems;index+=1)
{currentItem=items[index];if(value===currentItem.id)
{label=currentItem.label;break;}}
return label;},setPreferredSiteLabel=function(selectedValue)
{var value=selectedValue||preferredSite,label=getSiteLabel(value);positiveAcknowledgementSite.innerHTML=label;return label;},formSubmitHandler=function(event)
{var eventTarget=EventManager.getTarget(event),radioButtons=eventTarget.elements,selectedValue,i;EventManager.preventDefault(event);for(i=0;i<radioButtons.length;i+=1)
{if(radioButtons[i].checked)
{selectedValue=radioButtons[i].value;}}
if(selectedValue==='N')
{closeScreen(openScreen,openScreenName);$window.setTimeout(function()
{showScreen(negativeAcknowledgement,NEGATIVE_SCREEN_NAME);},transitionSpeed);}
else
{if(selectedValue==='Y')
{selectedValue=currentSite;}
closeScreen(openScreen,openScreenName);$window.setTimeout(function()
{showScreen(positiveAcknowledgement,POSITIVE_SCREEN_NAME);},transitionSpeed);}
sitePreferenceCookieManager.set(selectedValue);setPreferredSiteLabel(selectedValue);EventManager.dispatch(EVENTS.UPDATE_SSP,null,{newSite:selectedValue,oldSite:preferredSite});preferredSite=selectedValue;webUsageProxy.trackAction(WEB_USAGE_NAMESPACE+'.selected.'+preferredSite);},attachFormSubmitListener=function(form)
{EventManager.addEvent(form,'submit',formSubmitHandler,SITE_PREFERENCES_MODULE);},broadcastCloseSitePreference=function()
{var customEvent=EventManager.createEvent('SITE_PREFERENCES_CLOSED');EventManager.dispatch(customEvent);},closeScreenHandler=function()
{if(openScreen)
{closeScreen(openScreen,openScreenName);broadcastCloseSitePreference();}},buildCloseButton=function()
{var container=$createElement('div',{'class':'vgn-closeSitePreferences'}),linkComp=new Link({cssClass:'vgn-closeBtn vgn-large',title:data.closeButtonTitle,parentElement:container,onClick:closeScreenHandler});componentManager.add(linkComp);linkComp.render();return container;},buildSaveButton=function(label)
{return $createElement('input',{'class':'vgn-actionButton vgn-actionButton-primary','type':'submit','value':label});},getChecked=function(optionValue,isYesNo)
{if((isYesNo&&optionValue==='Y')||(optionValue===preferredSite))
{return CHECKED;}
return'';},getOptionValue=function(optionValue,isYesNo)
{if(isYesNo&&optionValue==='Y')
{return currentSite;}
return optionValue;},buildOptions=function(optionData,parentNode,isYesNo,optionGroupName)
{var options=optionData&&optionData.options,numOptions=options&&options.length,currentOption,currentOptionValue,currentOptionId,i;for(i=0;i<numOptions;i+=1)
{currentOption=options[i];currentOptionValue=currentOption.value;currentOptionId=optionGroupName+'_'+currentOptionValue;$createElementFromString(TEMPLATES.RADIO,{value:getOptionValue(currentOptionValue),name:optionGroupName,id:currentOptionId,cssClass:CLASSES.RADIO,checked:getChecked(currentOptionValue,isYesNo)},parentNode);$createElementFromString(TEMPLATES.RADIO_LABEL,{forId:currentOptionId,text:currentOption.label},parentNode);if(currentOption.description)
{$createElementFromString(TEMPLATES.OPTION_DESCRIPTION,currentOption,parentNode);}}},getNoCookieSite=function()
{var nodes=$select(SELECTORS.CURRENT_SITE,noCookieScreen);if(nodes.length>0)
{return nodes[0];}
return{};},buildLegend=function(legendData,parentNode)
{$createElementFromString($stringUtils.format(TEMPLATES.LEGEND,legendData),{currentSite:TEMPLATES.CURRENT_SITE},parentNode);},buildNoCookieScreen=function()
{var screenData=data.noCookieView,fieldSet,form;if(screenData!==undefined)
{fieldSet=$createElementFromString(TEMPLATES.FIELD_SET);form=$createElementFromString(TEMPLATES.FORM,{formId:NO_COOKIE_FORM});buildLegend(screenData,fieldSet);buildOptions(screenData,fieldSet,true,NO_COOKIE_OPTION_NAME);$node.append(fieldSet,buildSaveButton(screenData&&screenData.buttonLabel));$node.append(form,fieldSet);attachFormSubmitListener(form);noCookieScreen=$createElementFromString(TEMPLATES.NO_COOKIE_SCREEN);$node.append(noCookieScreen,form);$node.append(noCookieScreen,buildCloseButton());$node.append(sitePreferenceContainer,noCookieScreen);getNoCookieSite().innerHTML=getSiteLabel(currentSite);showOnLoadScreens.push({name:NO_COOKIE_SCREEN_NAME,element:noCookieScreen,showOnLoad:screenData.showOnLoad});}},buildSetCookieScreen=function()
{var screenData=data.setCookieView,fieldSet,form;if(screenData!==undefined)
{fieldSet=$createElementFromString(TEMPLATES.FIELD_SET);form=$createElement('form',{'role':'form','data-formID':'setCookieOption'});buildLegend(screenData,fieldSet);buildOptions(screenData,fieldSet,false,SET_COOKIE_OPTION_NAME);$node.append(form,fieldSet);$node.append(form,buildSaveButton(screenData&&screenData.buttonLabel));attachFormSubmitListener(form);setCookieScreen=$createElementFromString(TEMPLATES.SELECT_SITE_SCREEN);$node.append(setCookieScreen,form);$node.append(setCookieScreen,buildCloseButton());$node.append(sitePreferenceContainer,setCookieScreen);}},getPositiveAcknowledgementSite=function()
{var nodes=$select(SELECTORS.PREFERRED_SITE,positiveAcknowledgement);if(nodes.length>0)
{return nodes[0];}
return{};},buildPositiveAcknowledgementScreen=function()
{var screenData=data.positiveAcknowledgement;if(screenData!==undefined)
{positiveAcknowledgement=$createElementFromString($stringUtils.format(TEMPLATES.POSITIVE_SCREEN,screenData),{preferredSite:TEMPLATES.PREFERRED_SITE});positiveAcknowledgementSite=getPositiveAcknowledgementSite();setPreferredSiteLabel();$node.append(positiveAcknowledgement,buildCloseButton());$node.append(sitePreferenceContainer,positiveAcknowledgement);}},buildNegativeAcknowledgementScreen=function()
{var screenData=data.negativeAcknowledgement;if(screenData!==undefined)
{negativeAcknowledgement=$createElementFromString(TEMPLATES.NEGATIVE_SCREEN,screenData);$node.append(negativeAcknowledgement,buildCloseButton());$node.append(sitePreferenceContainer,negativeAcknowledgement);}},showOnLoad=function(screenData)
{if(screenData.showOnLoad===true)
{$window.setTimeout(function()
{showScreen(screenData.element,screenData.name);},transitionDelay);}},run=function()
{var numScreens=showOnLoadScreens.length,index;if(numScreens>0)
{for(index=0;index<numScreens;index+=1)
{showOnLoad(showOnLoadScreens[index]);}}},insertSitePreferences=function(element)
{var utilBar=$select(SELECTORS.UTILITY_BAR,element)[0];if(utilBar)
{$node.insertBefore(sitePreferenceContainer,utilBar,element);}
else
{$node.append(element,sitePreferenceContainer);}},render=function(element)
{data=dataSource.getComponentData(SITE_PREFERENCES_MODULE);if(data&&(data.noCookieView||data.setCookieView||data.positiveAcknowledgement||data.negativeAcknowledgement))
{siteList=data.siteList;currentSite=data.currentSite;preferredSite=data.preferredSite;sitePreferenceContainer=$createElementFromString(TEMPLATES.SITE_PREFERENCES);buildNoCookieScreen();buildSetCookieScreen();buildPositiveAcknowledgementScreen();buildNegativeAcknowledgementScreen();EventManager.subscribe(null,EVENTS.OPEN_SSP,openSetCookie);insertSitePreferences(element);}},destroy=function()
{EventManager.cleanup(SITE_PREFERENCES_MODULE);componentManager.destroy();$node.remove(sitePreferenceContainer);data=null;};showScreen=function(screen,screenName)
{if(openScreen!==null&&openScreen!==screen)
{closeScreen(openScreen,openScreenName);$window.setTimeout(function()
{showScreen(screen,screenName);},transitionSpeed+transitionDelay);}
else
{openScreen=screen;openScreenName=screenName;$class.add(screen,CLASSES.PREFIX+screenName+CLASSES.OPEN_SUFFIX);}};return{render:render,destroy:destroy,run:run};}]);}(window.VGN));(function(VGN)
{'use strict';var MODULE_NAME='subUtilityBar',CLASSES={SEARCH:'vgn-subUtilityBarSearch',LOGO:'vgn-logo',BAR_LOGO:'vgn-subUtilityBarLogo',SEARCH_ICON:'vgn-subUtilityBarSearchIcon',SUB_UTIL_BAR:'vgn-subUtilityBar',BAR_CONTAINER:'vgn-container',LOGO_LINK:'vgn-subUtilityBarLogoLink',SHOW_LARGE:'vgn-showOnLarge',BRAND_LOGO:'vgn-brandLogo'},SELECTORS={SUB_UTIL_BAR:'.'+CLASSES.SUB_UTIL_BAR,BAR_CONTAINER:'.'+CLASSES.BAR_CONTAINER},CO_BRAND_LOGO='coBrandLogo',DEFAULT_LOGO={TITLE:'Vanguard Logo',HREF:'https://www.vanguard.com/web/corpcontent/CorporatePortal.html',TARGET:'_top'},TEMPLATES={LOGO:'<a class="{{cssClass}}" target="_top" href="{{logoHref}}"></a>',LOGO_IMG:'<img class="{{logoClass}}" title="{{logoTitle}}" alt="{{logoAlt}}" src="{{logoSource}}" />',LOGO_CONTAINER:'<div class="vgn-subUtilityBarLogo"></div>',DEFAULT_LOGO_CONTAINER:'<div class="vgn-subUtilityBarLogo"></div>',CLEAR_FLOAT:'<div class="vgn-clearFloat"></div>'};VGN.ComponentLibrary().module(MODULE_NAME,['$noOp','dataSource','$createElement','$createElementFromString','$class','Search','EventManager','$select','$stringUtils','Link','ComponentManager',function($noOp,dataSource,$createElement,$createElementFromString,$class,Search,EventManager,$select,$stringUtils,Link,ComponentManager)
{var subUtilityBarData,coBrandLogo,subUtilDiv,subUtilContainer,search,componentManager=new ComponentManager(),addSubUtilSearchEvents=$noOp,addSearchBar=function()
{var container,bar;container=$createElement('div',{'class':CLASSES.SEARCH+' '+CLASSES.SHOW_LARGE},subUtilContainer);search=new Search(MODULE_NAME);componentManager.add(search);bar=search.render();if(bar)
{container.appendChild(bar);addSubUtilSearchEvents();}},createDefaultLogo=function()
{var defaultLogoContainer=$createElementFromString(TEMPLATES.DEFAULT_LOGO_CONTAINER,{},subUtilContainer),defaultLogoLinkComp=new Link({cssClass:[CLASSES.LOGO,CLASSES.LOGO_LINK].join(' '),target:DEFAULT_LOGO.TARGET,href:DEFAULT_LOGO.HREF,title:DEFAULT_LOGO.TITLE,parentElement:defaultLogoContainer});componentManager.add(defaultLogoLinkComp);defaultLogoLinkComp.render();},createBrandLink=function()
{var brandContainer=$createElementFromString(TEMPLATES.LOGO_CONTAINER,{},subUtilContainer),imageLinkComp=new Link({cssClass:CLASSES.LOGO_LINK,href:coBrandLogo.href,target:'_top',parentElement:brandContainer});componentManager.add(imageLinkComp);return imageLinkComp.render();},createBrandImage=function(brandLogo,parentNode)
{$createElementFromString(TEMPLATES.LOGO_IMG,{logoClass:CLASSES.BRAND_LOGO,logoTitle:brandLogo.title,logoAlt:brandLogo.altText,logoSource:brandLogo.src},parentNode);},createBrandLogo=function()
{var brandLogo=coBrandLogo&&coBrandLogo.image,imageLink;if(brandLogo)
{imageLink=createBrandLink();createBrandImage(brandLogo,imageLink);}},createSubUtilContainer=function()
{subUtilContainer=$select(SELECTORS.BAR_CONTAINER,subUtilDiv)[0]||$createElement('div',{'class':CLASSES.BAR_CONTAINER},subUtilDiv);subUtilContainer.innerHTML='';},createSubUtil=function(parentNode)
{subUtilDiv=$select(SELECTORS.SUB_UTIL_BAR,parentNode)[0]||$createElement('div',{'class':CLASSES.SUB_UTIL_BAR},parentNode);},render=function(element)
{subUtilityBarData=dataSource.getComponentData(MODULE_NAME);if(subUtilityBarData)
{createSubUtil(element);createSubUtilContainer();coBrandLogo=dataSource.getComponentData(CO_BRAND_LOGO);createDefaultLogo();createBrandLogo();if(subUtilityBarData.showSearch!==false)
{addSearchBar();}
$createElementFromString(TEMPLATES.CLEAR_FLOAT,{},subUtilContainer);}
return subUtilDiv;},destroy=function()
{componentManager.destroy();subUtilityBarData=null;EventManager.cleanup(MODULE_NAME);search.destroy();subUtilDiv.outerHTML='';subUtilDiv=null;};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var INT_ONLY_COMP='internalOnly',DEFAULT_MESSAGE='Internal Only',INT_ONLY_UPDATED_EVENT='VGN_INT_ONLY_UPDATED',TEMPLATES={BANNER:'<div class="vgn-intOnlyBar" aria-hidden="false"></div>',TEXT:'<div class="vgn-container"></div>'},UTILITY_BAR_SELECTOR='.vgn-utilityBar',isNotFalse=function(value)
{return(value!==false)&&(value!=='false');};VGN.ComponentLibrary().module(INT_ONLY_COMP,['$createElementFromString','$node','$select','dataSource','EventManager',function($createElementFromString,$node,$select,dataSource,EventManager)
{var config,banner,text,updateVisible=function(isVisible)
{if(isVisible!==undefined)
{$node.toggle(banner,isNotFalse(isVisible));}},updateMessage=function(message)
{if(message!==undefined)
{text.innerHTML=message;}},update=function(event,data)
{updateVisible(data.visible);updateMessage(data.message);},setDefaults=function()
{config.visible=isNotFalse(config.visible);if(config.message===undefined)
{config.message=DEFAULT_MESSAGE;}},insertBanner=function(element)
{var utilBar=$select(UTILITY_BAR_SELECTOR,element)[0];if(utilBar)
{$node.insertBefore(banner,utilBar,element);}
else
{$node.append(element,banner);}},createBanner=function(parentElement)
{banner=$createElementFromString(TEMPLATES.BANNER);text=$createElementFromString(TEMPLATES.TEXT);$node.append(banner,text);insertBanner(parentElement);update(null,config);},render=function(parentElement)
{config=dataSource.getComponentData(INT_ONLY_COMP);if(config&&parentElement)
{setDefaults();createBanner(parentElement);EventManager.subscribe(null,INT_ONLY_UPDATED_EVENT,update,INT_ONLY_COMP);}
return banner;},destroy=function()
{EventManager.cleanup(INT_ONLY_COMP);$node.remove(banner);banner=text=config=null;};VGN.internalOnly={update:function(config)
{EventManager.dispatch(INT_ONLY_UPDATED_EVENT,null,config);}};return{render:render,destroy:destroy};}]);}(window.VGN));(function(VGN)
{'use strict';var GC_HEADER_ID='#vgn-globalHeader',GC_SECTION_CLASS='vgn-section',PLACE_HOLDER_CLASS='vgn-placeHolder';VGN.ComponentLibrary().module('globalHeader',['$noOp','$bind','$select','$class','$node','dataSource','KeyboardModeDetector','siteNavTour','utilityBar','subUtilityBar','verticalNav','navBar','sitePreferences','linkReporting','internalOnly',function($noOp,$bind,$select,$class,$node,dataSource,KeyboardModeDetector,siteNavTour,utilityBar,subUtilityBar,verticalNav,navBar,sitePreferences,linkReporting,internalOnly)
{var element=$select(GC_HEADER_ID)[0],renderContent=function()
{sitePreferences.render(element);internalOnly.render(element);siteNavTour.render(element);utilityBar.render(element);subUtilityBar.render(element);navBar.render(element);verticalNav.render(element);$class.remove(element,PLACE_HOLDER_CLASS);},onDataAvailable=function(success)
{if(success)
{renderContent();sitePreferences.run();new KeyboardModeDetector().init(element);}},init=function()
{if(element)
{$class.add(element,GC_SECTION_CLASS);dataSource.load(element,$bind(onDataAvailable,this));linkReporting(element);}};init();return $noOp;}]);}(window.VGN));(function(VGN)
{'use strict';var GC_FOOTER_ID='#vgn-globalFooter',LEGAL_FOOTER_ATTR='data-legal-footer-only',GC_SECTION_CLASS='vgn-section';VGN.ComponentLibrary().module('globalFooter',['$noOp','$bind','$select','$class','$node','dataSource','KeyboardModeDetector','vanguardPromises','superFooter','legalFooter','linkReporting',function($noOp,$bind,$select,$class,$node,dataSource,KeyboardModeDetector,vanguardPromises,superFooter,legalFooter,linkReporting)
{var element=$select(GC_FOOTER_ID)[0],keyboardModeDetector;function renderFooter(success)
{var legalFooterOnly;if(success)
{legalFooterOnly=$node.attribute(element,LEGAL_FOOTER_ATTR)==='true';element.innerHTML='';if(!legalFooterOnly)
{vanguardPromises.render(element);superFooter.render(element);}
legalFooter.render(element);keyboardModeDetector=new KeyboardModeDetector();keyboardModeDetector.init(element);}}
function init()
{if(element)
{$class.add(element,GC_SECTION_CLASS);dataSource.load(element,$bind(renderFooter,this));linkReporting(element);}}
init();return $noOp;}]);}(window.VGN));(function(VGN)
{'use strict';var appInstance,defaultGHContent=document.getElementById('vgn-defaultContent');if(!defaultGHContent)
{appInstance=VGN.ComponentLibrary([VGN.CORE_LIBRARY]).newInstance();appInstance.run();}}(window.VGN));